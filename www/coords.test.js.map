{"version":3,"file":"coords.test.js","sourceRoot":"","sources":["../src/www/coords.test.ts"],"names":[],"mappings":"AAAA,EAAE;AACF,iBAAiB;AACjB,EAAE;AAEF,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,QAAQ,CAAC;AACtC,OAAO,EAAE,MAAM,EAAE,MAAM,MAAM,CAAC;AAC9B,OAAO,EAAE,wBAAwB,EAAE,wBAAwB,EAAE,MAAM,UAAU,CAAC;AAE9E,iDAAiD;AACjD,MAAM,WAAW,GAAG;IACnB,WAAW,EAAE,CAAC,EAAQ,wCAAwC;IAC9D,IAAI,EAAE,GAAG,EAAa,8BAA8B;IACpD,MAAM,EAAE,GAAG,EAAW,6BAA6B;IACnD,WAAW,EAAE,IAAI,EAAK,kCAAkC;IACxD,OAAO,EAAE,CAAC,CAAY,yDAAyD;CAC/E,CAAC;AAEF,yCAAyC;AACzC,MAAM,iBAAiB,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC;AACrD,MAAM,kBAAkB,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;AAGlD,oBAAoB;AAEpB,QAAQ,CAAC,mCAAmC,EAAE,GAAG,EAAE;IAElD,EAAE,CAAC,kEAAkE,EAAE,GAAG,EAAE;QAC3E,MAAM,UAAU,GAAG,wBAAwB,CAAC,iBAAiB,EAAE,WAAW,CAAC,CAAC;QAE5E,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kEAAkE,EAAE,GAAG,EAAE;QAC3E,MAAM,UAAU,GAAG,wBAAwB,CAAC,kBAAkB,EAAE,WAAW,CAAC,CAAC;QAE7E,iDAAiD;QACjD,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC/C,gCAAgC;QAChC,MAAM,UAAU,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC;QAExC,4BAA4B;QAC5B,MAAM,WAAW,GAAG,wBAAwB,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;QACtE,MAAM,WAAW,GAAG,wBAAwB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;QAEvE,wDAAwD;QACxD,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["//\r\n// coords.test.ts\r\n//\r\n\r\nimport { describe, it } from \"vitest\";\r\nimport { expect } from \"chai\";\r\nimport { localCoordsToRobotCoords, robotCoordsToLocalCoords } from \"./coords\";\r\n\r\n// --- Mock-Daten (basierend auf deinen Logs) ---\r\nconst MOCK_PARAMS = {\r\n\tscaleFactor: 8,       // Dein Wert aus der Config (angenommen)\r\n\tleft: 284,            // aus map.IMAGE.position.left\r\n\ttopMap: 364,          // aus map.IMAGE.position.top\r\n\timageHeight: 2880,    // aus map.IMAGE.dimensions.height\r\n\tmapMaxY: 0            // Wird nicht mehr verwendet, aber benÃ¶tigt vom Interface\r\n};\r\n\r\n// Deine bekannten Test-Werte aus dem Log\r\nconst KNOWN_WORLD_PIXEL = { x: 1744.85, y: 1672.19 };\r\nconst KNOWN_ROBOT_COORDS = { x: 25105, y: 25749 };\r\n\r\n\r\n// --- Die Tests ---\r\n\r\ndescribe(\"Koordinaten-Umrechnung (mit Chai)\", () => {\r\n\r\n\tit(\"sollte Pixel korrekt in Roboter-Koordinaten umwandeln (Statisch)\", () => {\r\n\t\tconst calculated = localCoordsToRobotCoords(KNOWN_WORLD_PIXEL, MOCK_PARAMS);\r\n\r\n\t\texpect(calculated.x).to.equal(KNOWN_ROBOT_COORDS.x);\r\n\t\texpect(calculated.y).to.equal(KNOWN_ROBOT_COORDS.y);\r\n\t});\r\n\r\n\tit(\"sollte Roboter-Koordinaten korrekt in Pixel umwandeln (Statisch)\", () => {\r\n\t\tconst calculated = robotCoordsToLocalCoords(KNOWN_ROBOT_COORDS, MOCK_PARAMS);\r\n\r\n\t\t// Toleranz von 1 Pixel wegen Rundungsdifferenzen\r\n\t\texpect(calculated.x).to.be.closeTo(KNOWN_WORLD_PIXEL.x, 1);\r\n\t\texpect(calculated.y).to.be.closeTo(KNOWN_WORLD_PIXEL.y, 1);\r\n\t});\r\n\r\n\tit(\"sollte ein perfekter Round-Trip sein\", () => {\r\n\t\t// Nimm einen sauberen Startwert\r\n\t\tconst startPixel = { x: 1800, y: 1700 };\r\n\r\n\t\t// Pixel -> Roboter -> Pixel\r\n\t\tconst robotCoords = localCoordsToRobotCoords(startPixel, MOCK_PARAMS);\r\n\t\tconst pixelCoords = robotCoordsToLocalCoords(robotCoords, MOCK_PARAMS);\r\n\r\n\t\t// Muss wieder nahe am Startwert sein (Toleranz 1 Pixel)\r\n\t\texpect(pixelCoords.x).to.be.closeTo(startPixel.x, 1);\r\n\t\texpect(pixelCoords.y).to.be.closeTo(startPixel.y, 1);\r\n\t});\r\n});"]}