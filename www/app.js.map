{
  "version": 3,
  "sources": ["../node_modules/d3-dispatch/src/dispatch.js", "../node_modules/d3-selection/src/namespaces.js", "../node_modules/d3-selection/src/namespace.js", "../node_modules/d3-selection/src/creator.js", "../node_modules/d3-selection/src/selector.js", "../node_modules/d3-selection/src/selection/select.js", "../node_modules/d3-selection/src/array.js", "../node_modules/d3-selection/src/selectorAll.js", "../node_modules/d3-selection/src/selection/selectAll.js", "../node_modules/d3-selection/src/matcher.js", "../node_modules/d3-selection/src/selection/selectChild.js", "../node_modules/d3-selection/src/selection/selectChildren.js", "../node_modules/d3-selection/src/selection/filter.js", "../node_modules/d3-selection/src/selection/sparse.js", "../node_modules/d3-selection/src/selection/enter.js", "../node_modules/d3-selection/src/constant.js", "../node_modules/d3-selection/src/selection/data.js", "../node_modules/d3-selection/src/selection/exit.js", "../node_modules/d3-selection/src/selection/join.js", "../node_modules/d3-selection/src/selection/merge.js", "../node_modules/d3-selection/src/selection/order.js", "../node_modules/d3-selection/src/selection/sort.js", "../node_modules/d3-selection/src/selection/call.js", "../node_modules/d3-selection/src/selection/nodes.js", "../node_modules/d3-selection/src/selection/node.js", "../node_modules/d3-selection/src/selection/size.js", "../node_modules/d3-selection/src/selection/empty.js", "../node_modules/d3-selection/src/selection/each.js", "../node_modules/d3-selection/src/selection/attr.js", "../node_modules/d3-selection/src/window.js", "../node_modules/d3-selection/src/selection/style.js", "../node_modules/d3-selection/src/selection/property.js", "../node_modules/d3-selection/src/selection/classed.js", "../node_modules/d3-selection/src/selection/text.js", "../node_modules/d3-selection/src/selection/html.js", "../node_modules/d3-selection/src/selection/raise.js", "../node_modules/d3-selection/src/selection/lower.js", "../node_modules/d3-selection/src/selection/append.js", "../node_modules/d3-selection/src/selection/insert.js", "../node_modules/d3-selection/src/selection/remove.js", "../node_modules/d3-selection/src/selection/clone.js", "../node_modules/d3-selection/src/selection/datum.js", "../node_modules/d3-selection/src/selection/on.js", "../node_modules/d3-selection/src/selection/dispatch.js", "../node_modules/d3-selection/src/selection/iterator.js", "../node_modules/d3-selection/src/selection/index.js", "../node_modules/d3-selection/src/select.js", "../node_modules/d3-selection/src/sourceEvent.js", "../node_modules/d3-selection/src/pointer.js", "../node_modules/d3-drag/src/noevent.js", "../node_modules/d3-drag/src/nodrag.js", "../node_modules/d3-drag/src/constant.js", "../node_modules/d3-drag/src/event.js", "../node_modules/d3-drag/src/drag.js", "../node_modules/d3-color/src/define.js", "../node_modules/d3-color/src/color.js", "../node_modules/d3-interpolate/src/basis.js", "../node_modules/d3-interpolate/src/basisClosed.js", "../node_modules/d3-interpolate/src/constant.js", "../node_modules/d3-interpolate/src/color.js", "../node_modules/d3-interpolate/src/rgb.js", "../node_modules/d3-interpolate/src/number.js", "../node_modules/d3-interpolate/src/string.js", "../node_modules/d3-interpolate/src/transform/decompose.js", "../node_modules/d3-interpolate/src/transform/parse.js", "../node_modules/d3-interpolate/src/transform/index.js", "../node_modules/d3-interpolate/src/zoom.js", "../node_modules/d3-timer/src/timer.js", "../node_modules/d3-timer/src/timeout.js", "../node_modules/d3-transition/src/transition/schedule.js", "../node_modules/d3-transition/src/interrupt.js", "../node_modules/d3-transition/src/selection/interrupt.js", "../node_modules/d3-transition/src/transition/tween.js", "../node_modules/d3-transition/src/transition/interpolate.js", "../node_modules/d3-transition/src/transition/attr.js", "../node_modules/d3-transition/src/transition/attrTween.js", "../node_modules/d3-transition/src/transition/delay.js", "../node_modules/d3-transition/src/transition/duration.js", "../node_modules/d3-transition/src/transition/ease.js", "../node_modules/d3-transition/src/transition/easeVarying.js", "../node_modules/d3-transition/src/transition/filter.js", "../node_modules/d3-transition/src/transition/merge.js", "../node_modules/d3-transition/src/transition/on.js", "../node_modules/d3-transition/src/transition/remove.js", "../node_modules/d3-transition/src/transition/select.js", "../node_modules/d3-transition/src/transition/selectAll.js", "../node_modules/d3-transition/src/transition/selection.js", "../node_modules/d3-transition/src/transition/style.js", "../node_modules/d3-transition/src/transition/styleTween.js", "../node_modules/d3-transition/src/transition/text.js", "../node_modules/d3-transition/src/transition/textTween.js", "../node_modules/d3-transition/src/transition/transition.js", "../node_modules/d3-transition/src/transition/end.js", "../node_modules/d3-transition/src/transition/index.js", "../node_modules/d3-ease/src/cubic.js", "../node_modules/d3-transition/src/selection/transition.js", "../node_modules/d3-transition/src/selection/index.js", "../node_modules/d3-brush/src/brush.js", "../node_modules/d3-zoom/src/constant.js", "../node_modules/d3-zoom/src/event.js", "../node_modules/d3-zoom/src/transform.js", "../node_modules/d3-zoom/src/noevent.js", "../node_modules/d3-zoom/src/zoom.js", "../src/common/coordTransformation.ts", "../src/common/images.ts", "../src/common/pathProcessor.ts", "../src/www/conn.ts", "../src/www/map.ts"],
  "sourcesContent": ["var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n", "export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n", "import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n", "import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n", "function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don\u2019t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n", "function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n", "export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n", "import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "export default function(update) {\n  return new Array(update.length);\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don\u2019t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn\u2019t worried about \u201Clive\u201D collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don\u2019t; we\u2019d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n", "export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n", "export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n", "export default function() {\n  return !this.node();\n}\n", "export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n", "import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n", "export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n", "import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n", "function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n", "function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n", "function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n", "function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n", "function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n", "function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n", "import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n", "import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n", "function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n", "function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n", "export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n", "function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n", "import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n", "export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n", "import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n", "import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n", "export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n", "import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n", "// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n", "export default x => () => x;\n", "export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n", "import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default x => () => x;\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n", "import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n", "import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n", "var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 \u2245 u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n", "var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we\u2019ve set an alarm, if we haven\u2019t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n", "import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n", "import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n", "import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n", "import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n", "import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n", "import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n", "import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n", "import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n", "import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n", "import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n", "import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n", "function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n", "import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n", "import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n", "import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n", "function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n", "import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n", "function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n", "import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n", "import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we\u2019re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n", "import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n", "export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n", "import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name \u201C__brush\u201D rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n", "export default x => () => x;\n", "export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n", "export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n", "export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won\u2019t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n", "\nexport interface TransformationParams {\n    x: number;      // Input X (robot coord in mm)\n    y: number;      // Input Y (robot coord in mm)\n    minX: number;   // Map offset X (in mm)\n    minY: number;   // Map offset Y (in mm)\n    sizeY: number;  // Map Height (in grid/pixel units)\n    resolution: number; // mm per pixel (usually 50)\n    scale: number;  // Visual scale factor (e.g. 1, 3, 8)\n}\n\n/**\n * Transforms Robot Coordinate (mm) to Visual Pixel Coordinate\n * Matches logic from MapBuilder.ts (Backend)\n */\nexport function robotToPixel(params: TransformationParams): { x: number, y: number } {\n\tconst { x, y, minX, minY, sizeY, resolution, scale } = params;\n\n\t// Calculate unscaled grid coordinates (with 0.5 centering from MapBuilder)\n\t// Formula: (wx - minX) / res + 0.5\n\tconst px = (x - minX) / resolution + 0.5;\n\n\t// Formula: sizeY - ((wy - minY) / res) - 0.5\n\tconst py = sizeY - ((y - minY) / resolution) - 0.5;\n\n\t// Apply visual scale\n\treturn {\n\t\tx: px * scale,\n\t\ty: py * scale\n\t};\n}\n\nexport interface InverseTransformationParams {\n    x: number;      // Visual Pixel X\n    y: number;      // Visual Pixel Y\n    minX: number;   // Map offset X (in mm)\n    minY: number;   // Map offset Y (in mm)\n    sizeY: number;  // Map Height (in grid/pixel units)\n    resolution: number; // mm per pixel\n    scale: number;  // Visual scale factor\n}\n\n/**\n * Transforms Visual Pixel Coordinate to Robot Coordinate (mm)\n * Inverse of robotToPixel\n */\nexport function pixelToRobot(params: InverseTransformationParams): { x: number, y: number } {\n\tconst { x, y, minX, minY, sizeY, resolution, scale } = params;\n\n\tconst px_unscaled = x / scale;\n\tconst py_unscaled = y / scale;\n\n\t// Inverse X: px = (robX - minX) / res + 0.5\n\t// robX = (px - 0.5) * res + minX\n\tconst robotX = (px_unscaled - 0.5) * resolution + minX;\n\n\t// Inverse Y: py = sizeY - ((robY - minY) / res) - 0.5\n\t// py + 0.5 = sizeY - ((robY - minY) / res)\n\t// ((robY - minY) / res) = sizeY - (py + 0.5)\n\t// robY - minY = (sizeY - py - 0.5) * res\n\t// robY = (sizeY - py - 0.5) * res + minY\n\tconst robotY = (sizeY - py_unscaled - 0.5) * resolution + minY;\n\n\treturn { x: robotX, y: robotY };\n}\n\n// -----------------------------------------------------------------------------\n// Frontend Helpers (formerly coords.ts)\n// -----------------------------------------------------------------------------\n\n// The true physical scale (50mm/pixel) used by Roborock\nconst MM_PER_PIXEL = 50;\n\nexport const VISUAL_BLOCK_SIZE = 3;\n\ninterface Point {\n    x: number;\n    y: number;\n}\n\n// Map parameters required for the calculations\nexport interface MapParams {\n    scaleFactor: number; // Config scale (e.g., 8) - used for visual scaling only\n    left: number; // Unscaled Pixel Offset X\n    topMap: number; // Unscaled Pixel Offset Y\n    imageHeight: number; // Unscaled Pixel Height\n    mapMaxY?: number; // Fallback height from content scan\n}\n\n/**\n * Converts LOCAL \"world\" pixel coordinates (px, Y-down) back to ROBOT coordinates (mm).\n * Used for Click-Tests, GoTo, and Zones.\n */\nexport function localCoordsToRobotCoords(localPoint: Point, params: MapParams): Point {\n\tif (!params) return { x: 0, y: 0 };\n\n\tconst height = (params.imageHeight || params.mapMaxY || 1024) / params.scaleFactor;\n\n\t// params.left/topMap are in Grid Units (Pixels). Shared Lib expects mm.\n\t// Convert: mm = pixels * 50\n\tconst minX_mm = params.left * MM_PER_PIXEL;\n\tconst minY_mm = params.topMap * MM_PER_PIXEL;\n\n\tconst result = pixelToRobot({\n\t\tx: localPoint.x,\n\t\ty: localPoint.y,\n\t\tminX: minX_mm,\n\t\tminY: minY_mm,\n\t\tsizeY: height,\n\t\tresolution: MM_PER_PIXEL,\n\t\tscale: params.scaleFactor // e.g. 3\n\t});\n\n\treturn { x: Math.round(result.x), y: Math.round(result.y) };\n}\n\n/**\n * Converts ROBOT coordinates (mm) to LOCAL \"world\" pixel coordinates (px, Y-down).\n * This is used to DRAW things on the map.\n */\nexport function robotCoordsToLocalCoords(robotPoint: Point, params: MapParams): Point {\n\tif (!params) return { x: 0, y: 0 };\n\n\tconst height = (params.imageHeight || params.mapMaxY || 1024) / VISUAL_BLOCK_SIZE;\n\n\tconst minX_mm = params.left * MM_PER_PIXEL;\n\tconst minY_mm = params.topMap * MM_PER_PIXEL;\n\n\treturn robotToPixel({\n\t\tx: robotPoint.x,\n\t\ty: robotPoint.y,\n\t\tminX: minX_mm,\n\t\tminY: minY_mm,\n\t\tsizeY: height,\n\t\tresolution: MM_PER_PIXEL,\n\t\tscale: VISUAL_BLOCK_SIZE // params.scaleFactor might be 3, check VISUAL_BLOCK_SIZE\n\t});\n}\n", "// src/lib/images.ts\n\nexport const IMG_ROBOT_DEFAULT =\n\t\"data:image/png;base64,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\";\n\nexport const IMG_ROBOT1 =\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAfCAMAAAHGjw8oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADbUExURQAAAICAgICAgICAgICAgICAgHx8fH19fX19fYCAgIGBgX5+foCAgH5+foCAgH9/f39/f35+foCAgH9/f39/f4CAgH5+foGBgYCAgICAgIGBgX9/f39/f35+foCAgH9/f39/f4CAgIODg4eHh4mJiZCQkJycnJ2dnZ6enqCgoKSkpKenp62trbGxsbKysry8vL29vcLCwsXFxcbGxsvLy87OztPT09XV1d/f3+Tk5Ojo6Ozs7O3t7e7u7vHx8fLy8vPz8/X19fb29vf39/j4+Pn5+f39/f7+/v///9yECocAAAAgdFJOUwAGChgcKCkzOT5PVWZnlJmfsLq7wcrS1Nre4OXz+vr7ZhJmqwAAAAlwSFlzAAAXEQAAFxEByibzPwAAAcpJREFUKFNlkolaWkEMhYPggliBFiwWhGOx3AqCsggI4lZt8/5P5ElmuEX5P5hMMjeZJBMRafCvUKnbIqpcioci96owTQWqP0QKC54nImUAyr9k7VD1me4YvibHlJKpVUzQhR+dmdTRSDUvdHh8NK8nhqUVch7cITmXA3rtYDmH+3OL4XI1T+BhJUcXczQxOBXJuve0/daeUr5A6g9muJzo5NI2kPKtyRSGBStKQZ5RC1hENWn6NSRTrDUqLD/lsNKoFTNRETlGMn9dDoGdoDcT1fHPi7EuUDD9dMBw4+6vMQVyInnPXDsdW+8tjWfbYTbzg/OstcagzSlb0+wL/6k+1KPhCrj6YFhzS5eXuHcYNF4bsGtDYhFLTOSMqTsx9e3iyKfynb1SK+RqtEq70RzZPwEGKwv7G0OK1QA42Y+HIgct9P3WWG9ItI/mQTgvoeuWAMdlTRclO/+Km2jwlhDvinGNbyJH6EWV84AJ1wl8JowejqTqTmv+0GqDmVLlg/wLX5Mp2rO3WRs2Zs5fznAVd1EzRh10OONr7hhhM4ctevhiVVxHdYsbq+JzHzaIfdjs5CZ9tGInSfoWEXuL7//fwtn9+Jp7wSryDjBFqnOGeuUxAAAAAElFTkSuQmCC\";\n\nexport const IMG_CHARGER =\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAdVBMVEUAAAA44Yo44Yo44Yo44Yo44Yo44Yo44Yo44Yp26q844Yr///9767Kv89DG9t2g8Md26q5C44/5/vvz/fjY+ei19NNV5ZtJ45T2/fmY78KP7r1v6atq6Kjs/PPi+u7e+uvM9+Gb8MSS7r+H7bhm6KVh56JZ5p3ZkKITAAAACnRSTlMABTr188xpJ4aepd0A4wAAANZJREFUKM9VklmCgzAMQwkQYCSmLKWl2+zL/Y9YcIUL7wvkJHIUJyKkVcyy+JIGCZILGF//QLEqlTmMdsBEXi56igfH/QVGqvXSu49+1KftCbn+dtxB5LOPfNGQNRaKaQNkTJ46OMGczZg8wJB/9TB+J3nFkyqJMp44vBrnWYhJJmOn/5uVzAotV/zACnbUtTbOpHcQzVx8kxw6mavdpYP90dsNcE5k6xd8RoIb2Xgk6xAbfm5C9NiHtxGiXD/U2P96UJunrS/LOeV2GG4wfBi241P5+NwBnAEUFx9FUdUAAAAASUVORK5CYII=\";\nexport const IMG_TANK =\n\t\"data:image/png;base64,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\";\nexport const IMG_SPACESHIP =\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAFMklEQVRYR+2YfUxVZRjAf+cAfiAOHZaIFxXD0g2V3LVipZFuOrRcm6KBHw0b/GHERpFGfoQokcV0M6x5mbiKyFK31NRls666RmUrP0gtUVQU8IP8AEGBe297zznXe+71fsBB+4v3D8Z97/M85/c+X+9zj8SDW7eBUJ25XsDdrpqXumpAp29jSoZMTDxsXCS2+wJNXbX/YAFTVsqMeg5WTO4GNBIZG90eNOI3l063B434zwK8oCnGkrISXRWfARzAT0CGEeNCp6ttppHIYWFExYIkQc4mCOsHeclw6wY01MC/taIXip5oaHUdMPmtMBa85/7w+jq4egX2bQRrWTegv9A00u1BQ6l7T6nbgx2tYiGXCsia7yqAKqAzHowFEjR9O1Cu9Um/Mewo4ETgQJAsYXc4cDi4CER3ErBGkjDJkoTNLvo3zwMHA2VYRwGFMaujLonk9D/Z9l29IcBZL0aatpY8iTRor+BKFId+oIDj48Opqm7m+s02Q4D9w0NMsTGhHD5y8+EAYhoJDZegpdEQIL37mogYDBdPPSTA9w9B+XKotBoDjEs0kboK3p3QacBSYIEuHyZ5JLCSg/gDnPkotLeqJuRgyN/veRfX4B9QFOKPOobPgYXOIjk8tFc/85LoZ8ms2iMqdSGwWSfsH3D+CpgRzkcrRioqb+efgoKD8INFPywEAkyTJam0OHYaa2p+5vydG78D4+8BxodFmnePnsuQX9Zhc9gDAV4CHgOuKXexBlhVIc4BsQkHPAEHAGeISxzsJ8RpQZJceuGZbKYf/5IjTfXugIBZ5zHvgJZTsHkJVOxwic5dCnMWKx50A7SchN2fwo71Ltn4qTB7ma8cTANEqjmXB2DUE2bS18OqaWC3eQfcdUtVbm50mQnti+jc9wHuvKkOsXrZM2dVPe9FkoYcVMryPVCSBbV/ewCaRppZVALLEvWAInHF64zRwIc4AZ14l8/DpdMqYN5MNq0TYvBa9nHI264CDh4BA4eqGseP6gEXix1xXK0gVcDVVvgkXbSigIBlQKvyELFCesL2K7oIALOjoKVJERGM92QdDtde7zD4plbVa9Ve1aREu/5XfrbQA5hnDHBLDfQJdwdzfkoeRG56JAW5jyNH7QWL5qGMsdhrk1ha+A+FJfWwtc5d32aDE5VwpwnykwwBVgLi2FMIADh8oIMRMaF8b73mBjg1cQCnq5s5e1nqCOA+IAo5KM53iEeMM7PWCgWpcP6EeuLgECj+FWTnlOXhyOIsOKYNJELmYzGFAW8kgF1MVMCYiZCpq2S9CSGT+TS0t6m7EdGQutpHDjoBvQfz/9mtOg0tzT4AJcmseEy/JBm+vgjBIoe9rJxJcPaY9oUEX4gZFpgvZlMl+WH4GCjS32CauMhD4bnUIeDQvK1UGtDeLvTdqljcCi97IAQBawLl4ISeA5jcP4a8c1a3HMwblsj+69UcunutIzm4BLB5PP9bcfv4G1iFO1spP+e7iueYyIqII3fIBAZVFLkB1iXkUHjhEOsbKtUo6JdSxX+pVbx6uvhGhEhLRI8g+kmuYF9KPnWKtILJEf29U0s4Q8T1vhVo5I8QLdpDyxLZI+yl/WNf5ak/LNy2tYkS/UBpSzlbVNGiV8TfKOCdPkEhWb+Ny2Dy0c+ob23a5eVFkvBcg6/jBAL0prf1kZA+s8pHzWRG5Ve02NsKgaWAnXkFqnyZ+Kj8AizoLYfk7oxLIfXkdq623d4GJHfGt0YA1wLZuodkAhsUQNfbMlGOAvB1oFgnuw54szOA/wGAoJRHR2vq3wAAAABJRU5ErkJggg==\";\nexport const IMG_ROBOT_2 =\n\t\"data:image/png;base64,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\";\nexport const IMG_ROBOT_ORIGINAL =\n\t\"data:image/png;base64,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\";\nexport const IMG_GO_TO_PIN =\n\t\"data:image/png;base64,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AAAOVWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDplODk0ZjlkMy1iNjZlLTQ1ODQtODY0MS0zMGI5MTk2ZDM2NTQiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjM1MWM4ODEtZmQwYi00MjlkLWExZDMtNjkwOTFiNWE1YzYxIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YTZlMmNkZTctOGZhZC00ZDVhLWI5N2UtY2VhZTc0NWNmYjVmIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE2NzczNjQ5MzQzNDYyMjgiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjM6MDI6MjVUMjM6NDI6MTIrMDE6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIzOjAyOjI1VDIzOjQyOjEyKzAxOjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjcxYWIyOGQtODExMy00NWRiLWJkMjQtNGJkOTJjZjk5NThmIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTAyLTI1VDIzOjI1OjIzIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MjZiNWE2LTgwZjctNDU2My1hY2UwLThjMTMzYjQyZmZhNCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wMi0yNVQyMzo0MjoxNCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6W+nyxAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5wIZFioOADz0AgAAAyVJREFUaN7tmr9uE0EQhz8ncmKSwglQkMSCIg0URMgFFUUkZARyj1DeIhQuIsQj0LqnJHkBK6FJ5QK5IIpBsuhiWVEiOY7y3/INxaybBOE9+27vbPknjWSfd2fmu/Xt7c4djDXWWGMNkRLhupcJ4CnwHHgNrADLwLxp0AT+AD+B78Ae8BsS3pCdR5kCeQPyA+QExAORHuaZtj9M36lhgX0FsmMB2Mt21Fd8QVMgGyA3AcB27cb4TMUNdgbkG0gnQNiudYzvmbjA3gPZDAH0tm1qrGhhJ0C+Wk5Kg5pnYk1ECfwB5NoBbNeuNWY0sPdBjhzCdu1IY7uFTYAUI4DtWlFzcAf8CKQeIXBdc/CvfieAt8Cinw6ZDBQKUC5Do6FWLuuxTMZ3/EWTg7MRrvgZkXxepFIR8Ty5I8/T3/J536NccQW7CHJpm9jKikitJj1Vq2lbH8CXmkv4wDk/y8dSSaxVKvleduZcXMNPgEmbhrkcZLP2jrNZ7WOpSZNL6MBztvvopSVIp+0dp9Pax8defs4F8LQtcCoFyaS942RS+/gAnnYBfAaITcOrK2i37R2329rHdjIxuYQOfAJYlWDqdWi17B23WtrHUp7JJfRZejVGs/SqC+CHIBcxuA9faC5uFh97MVhp7blcWq77XfBnMiKFgki5LNJoqJXLeiyT6WsDse4SeBnkPMLd0rnm4G63dAhUIyy1VE0OroATZ8BWhMBbJgenVY95kNMI/s6nGrs/DVABTDSBYgSjWzSxIynkPQNpOhzdpsbsXwPWeBO/gJLDM1wyMSMtxi+AtByMbktjDaYgqviH5lqWMM+qiXFIPCQLIMchju5xEKMbNPRaiMBrxE8yC7IbAuyu+o6lJAvSDhC2rT5jLfkU0IPxjvqKvWQOZD8A4H31NRSSFwNuH8/Vx9BIEuZlFK/PJ/0bjh+HBgI91eesvTtE72jdgX4McuAD9kD7DLXkvWVZ90bbjoTkc49bVUfbjIxkFmT7P8DbMV5N9Q39AKT6D9iq/jaSkpe39s4tPTbSknfmdYVL/exWEdzcZQL4aL58GcKXwccaa6yx3Okve0d25MUPGTcAAAAASUVORK5CYII=\";\n", "// src/lib/pathProcessor.ts\n\nexport interface PathPoint {\n\tx: number;\n\ty: number;\n}\n\n/** Result structure used by map.ts to bind SVG path strings */\nexport interface PathResult {\n\tmainPathD: string; // SVG String\n\tbackwashPathD: string; // SVG String\n\tpureCleanPathD: string; // SVG String\n\tmopPathD: string; // SVG String\n\t// Arrays for Canvas drawing (used by mapCreator)\n\tmainPath: PathPoint[][];\n\tbackwashPath: PathPoint[][];\n\tpureCleanPath: PathPoint[][];\n\tmopPath: PathPoint[][];\n}\n\ninterface PointConverter {\n\t(robotPoint: [number, number], params: any): PathPoint;\n}\n\n// --------------------\n// Helpers\n// --------------------\n\n/** Builds SVG path string segment (M/L) */\nfunction buildPathString(x: number, y: number, lastX: number, lastY: number, pathString: string, thresholdSq: number): [string, number, number] {\n\tif (lastX === -1 || pathString === \"\") {\n\t\tpathString += `M${x},${y}`;\n\t} else {\n\t\tconst isJump = (x - lastX) ** 2 + (y - lastY) ** 2 > thresholdSq;\n\t\tpathString += isJump ? `M${x},${y}` : `L${x},${y}`;\n\t}\n\treturn [pathString, x, y];\n}\n\n/** Appends point to segment array (for Canvas) */\nfunction appendPoint(pathSegments: PathPoint[][], currentPoint: PathPoint, lastPoint: PathPoint | null): PathPoint {\n\tif (!lastPoint || !pathSegments.length || pathSegments[pathSegments.length - 1].length === 0) {\n\t\tpathSegments.push([]);\n\t}\n\tpathSegments[pathSegments.length - 1].push(currentPoint);\n\treturn currentPoint;\n}\n\n// --------------------\n// Main Processor\n// --------------------\n\nexport function processPaths(points: [number, number][], flags: number[], converter: PointConverter, scale: number, params: any): PathResult {\n\t// SVG Accumulators\n\tlet mainPathD = \"\",\n\t\tbackwashPathD = \"\",\n\t\tpureCleanPathD = \"\",\n\t\tmopPathD = \"\";\n\n\t// Canvas Accumulators\n\tconst mainPath: PathPoint[][] = [[]];\n\tconst backwashPath: PathPoint[][] = [[]];\n\tconst pureCleanPath: PathPoint[][] = [[]];\n\tconst mopPath: PathPoint[][] = [[]];\n\n\t// Pen Lift States (SVG)\n\tlet lastX_main = -1,\n\t\tlastY_main = -1;\n\tlet lastX_backwash = -1,\n\t\tlastY_backwash = -1;\n\tlet lastX_pure = -1,\n\t\tlastY_pure = -1;\n\tlet lastX_mop = -1,\n\t\tlastY_mop = -1;\n\n\t// Pen Lift States (Canvas)\n\tlet lp_main: PathPoint | null = null;\n\tlet lp_backwash: PathPoint | null = null;\n\tlet lp_pure: PathPoint | null = null;\n\tlet lp_mop: PathPoint | null = null;\n\n\tconst thresholdSq = 10 * scale * (10 * scale);\n\tconst len = Math.min(points.length, flags.length);\n\n\tfor (let i = 0; i < len; i++) {\n\t\tconst robotPoint: [number, number] = points[i];\n\t\tconst pt = converter(robotPoint, params); // Scaled Pixel Point\n\t\tconst x = pt.x;\n\t\tconst y = pt.y;\n\t\tconst flag = flags[i];\n\n\t\t// Bit Logic\n\t\tconst isBackwash = ((flag >> 1) & 1) === 1 || ((flag >> 3) & 1) === 1;\n\t\tconst isPureClean = ((flag >> 2) & 1) === 1;\n\t\tconst isMop = (flag & 1) === 1;\n\n\t\t// Reset Pen Lifts for Exclusive Paths\n\t\tconst prevX_main = lastX_main;\n\t\tconst prevLP_main = lp_main;\n\t\tconst prevX_backwash = lastX_backwash;\n\t\tconst prevLP_backwash = lp_backwash;\n\t\tconst prevX_pure = lastX_pure;\n\t\tconst prevLP_pure = lp_pure;\n\n\t\tlastX_main = -1;\n\t\tlp_main = null;\n\t\tlastX_backwash = -1;\n\t\tlp_backwash = null;\n\t\tlastX_pure = -1;\n\t\tlp_pure = null;\n\n\t\t// --- 1. EXCLUSIVE PATHS ---\n\t\tif (isBackwash) {\n\t\t\t[backwashPathD, lastX_backwash, lastY_backwash] = buildPathString(x, y, prevX_backwash, lastY_backwash, backwashPathD, thresholdSq);\n\t\t\tlp_backwash = appendPoint(backwashPath, pt, prevLP_backwash);\n\t\t} else if (isPureClean) {\n\t\t\t[pureCleanPathD, lastX_pure, lastY_pure] = buildPathString(x, y, prevX_pure, lastY_pure, pureCleanPathD, thresholdSq);\n\t\t\tlp_pure = appendPoint(pureCleanPath, pt, prevLP_pure);\n\t\t} else {\n\t\t\t[mainPathD, lastX_main, lastY_main] = buildPathString(x, y, prevX_main, lastY_main, mainPathD, thresholdSq);\n\t\t\tlp_main = appendPoint(mainPath, pt, prevLP_main);\n\t\t}\n\n\t\t// --- 2. OVERLAY PATH (Bit 0) ---\n\t\tif (isMop) {\n\t\t\t[mopPathD, lastX_mop, lastY_mop] = buildPathString(x, y, lastX_mop, lastY_mop, mopPathD, thresholdSq);\n\t\t\tlp_mop = appendPoint(mopPath, pt, lp_mop);\n\t\t} else {\n\t\t\tlastX_mop = -1;\n\t\t\tlp_mop = null;\n\t\t}\n\t}\n\n\tconst filterEmpty = (arr: PathPoint[][]) => arr.filter((sub) => sub.length > 0);\n\n\treturn {\n\t\tmainPathD,\n\t\tbackwashPathD,\n\t\tpureCleanPathD,\n\t\tmopPathD,\n\t\tmainPath: filterEmpty(mainPath),\n\t\tbackwashPath: filterEmpty(backwashPath),\n\t\tpureCleanPath: filterEmpty(pureCleanPath),\n\t\tmopPath: filterEmpty(mopPath),\n\t};\n}\n", "//\n// conn.ts\n//\n\"use strict\";\n\n// Declare global variables from <script> tags for TypeScript\ndeclare let io: any; // Besser: npm install @types/socket.io-client\ndeclare let $: any; // Besser: npm install @types/jquery\ndeclare let storage: { get: (key: string) => any; set: (key: string, val: any) => void; empty: () => void };\ndeclare let socketNamespace: string | undefined;\ndeclare let socketUrl: string | undefined;\ndeclare let socketSession: string | undefined;\ndeclare let socketForceWebSockets: boolean | undefined;\ndeclare let app: {\n\tonConnChange: (isConnected: boolean) => void;\n\treadLocalFile: (filename: string, callback: (err: any, data: string | null, mimeType?: string) => void) => void;\n};\n\n// --- TypeScript-Interfaces ---\n\ninterface ConnOptions {\n\tname?: string;\n\tconnLink?: string;\n\tsocketSession?: string;\n\tsocketForceWebSockets?: boolean;\n\tmayReconnect?: () => boolean;\n}\n\ninterface ConnCallbacks {\n\tonConnChange?: (isConnected: boolean) => void;\n\tonUpdate?: (id: string, state: any) => void; // ioBroker.State\n\tonRefresh?: ((...args: any[]) => any) | null;\n\tonAuth?: ((...args: any[]) => any) | null;\n\tonCommand?: (instance: string, command: string, data: any) => any;\n\tonError?: (err: any) => void;\n\tonObjectChange?: (id: string, obj: any) => void;\n}\n\n/**\n * Modern, class-based and Promise-based version of servConn.\n */\nexport class Connection {\n\t// Private properties\n\tprivate _socket: any = null; // Typ SocketIOClient.Socket\n\tprivate _isConnected: boolean = false;\n\tprivate _disconnectedSince: number | null = null;\n\tprivate _connCallbacks: ConnCallbacks = {};\n\tprivate _isAuthDone: boolean = false;\n\tprivate _type: string = \"socket.io\";\n\tprivate _reconnectInterval: number = 10000;\n\tprivate _reloadInterval: number = 30;\n\tprivate _isSecure: boolean = false;\n\tprivate _useStorage: boolean = false;\n\tprivate _objects: Record<string, any> | null = null;\n\n\t// Auth-Promise: Methods that require auth will await this promise.\n\tprivate _authPromise: Promise<boolean> | null = null;\n\tprivate _resolveAuth: (value: boolean) => void = () => {};\n\tprivate _rejectAuth: (reason?: any) => void = () => {};\n\n\t// Public properties\n\tpublic namespace: string = \"vis.0\";\n\tpublic user: string = \"\";\n\n\t// Internal timers\n\tprivate _connectInterval: any = null;\n\tprivate _countInterval: any = null;\n\tprivate _timer: any = null;\n\tprivate _lastTimer: number = 0;\n\n\tconstructor(options?: { useStorage?: boolean }) {\n\t\tif (options?.useStorage) {\n\t\t\tthis._useStorage = true;\n\t\t}\n\t}\n\n\t/**\n\t * Initializes the connection and starts the authentication process.\n\t */\n\tpublic init(connOptions: ConnOptions, connCallbacks: ConnCallbacks, objectsRequired: boolean) {\n\t\tthis._connCallbacks = connCallbacks;\n\n\t\t// Create the promise that all API calls will await\n\t\tthis._authPromise = new Promise((resolve, reject) => {\n\t\t\tthis._resolveAuth = resolve;\n\t\t\tthis._rejectAuth = reject;\n\t\t});\n\n\t\tif (typeof socketNamespace !== \"undefined\") {\n\t\t\tthis.namespace = socketNamespace;\n\t\t}\n\t\tconnOptions = connOptions || {};\n\t\tif (!connOptions.name) {\n\t\t\tconnOptions.name = this.namespace;\n\t\t}\n\n\t\t// --- Logic for determining the connection type (local vs. socket.io) ---\n\t\tif (document.URL.split(\"/local/\")[1] || (typeof socketUrl === \"undefined\" && !connOptions.connLink) || (typeof socketUrl !== \"undefined\" && socketUrl === \"local\")) {\n\t\t\tthis._type = \"local\";\n\t\t}\n\n\t\t// --- Establish Connection ---\n\t\tif (this._type === \"local\") {\n\t\t\tthis._isConnected = true;\n\t\t\tthis._isAuthDone = true;\n\t\t\tif (this._connCallbacks.onConnChange) this._connCallbacks.onConnChange(true);\n\t\t\tif (typeof app !== \"undefined\") app.onConnChange(true);\n\t\t\tthis._resolveAuth(true); // Resolve auth promise\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof io === \"undefined\") {\n\t\t\tconsole.error(\"socket.io not loaded!\");\n\t\t\treturn;\n\t\t}\n\n\t\tlet connLink = connOptions.connLink || window.localStorage.getItem(\"connLink\");\n\t\tif (!connLink && typeof socketUrl !== \"undefined\") connLink = socketUrl;\n\n\t\tconnOptions.socketSession = connOptions.socketSession || (typeof socketSession !== \"undefined\" ? socketSession : \"nokey\");\n\n\t\tif (connOptions.socketForceWebSockets === undefined && typeof socketForceWebSockets !== \"undefined\") {\n\t\t\tconnOptions.socketForceWebSockets = socketForceWebSockets;\n\t\t}\n\n\t\tlet url: string;\n\t\tif (connLink) {\n\t\t\turl = connLink;\n\t\t\tif (connLink[0] === \":\") {\n\t\t\t\turl = `${location.protocol}//${location.hostname}${connLink}`;\n\t\t\t}\n\t\t} else {\n\t\t\turl = `${location.protocol}//${location.host}`;\n\t\t}\n\n\t\tthis._socket = io.connect(url, {\n\t\t\tquery: \"key=\" + connOptions.socketSession,\n\t\t\t\"reconnection limit\": 10000,\n\t\t\t\"max reconnection attempts\": Infinity,\n\t\t\treconnection: false,\n\t\t\tupgrade: !connOptions.socketForceWebSockets,\n\t\t\trememberUpgrade: connOptions.socketForceWebSockets,\n\t\t\ttransports: connOptions.socketForceWebSockets ? [\"websocket\"] : undefined,\n\t\t});\n\n\t\t// --- Register socket listeners ---\n\t\tthis._socket.on(\"connect\", () => this._onSocketConnect(connOptions, objectsRequired));\n\t\tthis._socket.on(\"reauthenticate\", () => this._onSocketReauthenticate());\n\t\tthis._socket.on(\"connect_error\", () => this._onSocketConnectError(connOptions));\n\t\tthis._socket.on(\"disconnect\", () => this._onSocketDisconnect(connOptions));\n\t\tthis._socket.on(\"reconnect\", () => this._onSocketReconnect());\n\t\tthis._socket.on(\"objectChange\", (id: string, obj: any) => this._onSocketObjectChange(id, obj));\n\t\tthis._socket.on(\"stateChange\", (id: string, state: any) => this._onSocketStateChange(id, state));\n\t\tthis._socket.on(\"permissionError\", (err: any) => this._onSocketPermissionError(err));\n\t}\n\n\t// --- Private Socket Handlers ---\n\n\tprivate _onSocketConnect(connOptions: ConnOptions, objectsRequired: boolean) {\n\t\tif (this._disconnectedSince) {\n\t\t\tconst offlineTime = new Date().getTime() - this._disconnectedSince;\n\t\t\tconsole.log(`was offline for ${offlineTime / 1000}s`);\n\t\t\tif (this._reloadInterval && offlineTime > this._reloadInterval * 1000) {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t\tthis._disconnectedSince = null;\n\t\t}\n\n\t\tif (this._connectInterval) {\n\t\t\tclearInterval(this._connectInterval);\n\t\t\tthis._connectInterval = null;\n\t\t}\n\t\tif (this._countInterval) {\n\t\t\tclearInterval(this._countInterval);\n\t\t\tthis._countInterval = null;\n\t\t}\n\t\tconst elem = document.getElementById(\"server-disconnect\");\n\t\tif (elem) elem.style.display = \"none\";\n\n\t\tthis._socket.emit(\"name\", connOptions.name);\n\t\tconsole.log(new Date().toISOString() + \" Connected => authenticate\");\n\n\t\tconst wait = setTimeout(() => {\n\t\t\tconsole.error(\"No answer from server\");\n\t\t\twindow.location.reload();\n\t\t}, 3000);\n\n\t\tthis._socket.emit(\"authenticate\", (isOk: boolean, isSecure: boolean) => {\n\t\t\tclearTimeout(wait);\n\t\t\tconsole.log(new Date().toISOString() + \" Authenticated: \" + isOk);\n\t\t\tif (isOk) {\n\t\t\t\tthis._onAuth(objectsRequired, isSecure);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"permissionError\");\n\t\t\t\tthis._rejectAuth(new Error(\"Permission Error\"));\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _onAuth(objectsRequired: boolean, isSecure: boolean) {\n\t\t// Set auth status before processing commands.\n\t\tthis._isAuthDone = true;\n\n\t\tthis._isSecure = isSecure;\n\n\t\tif (this._isSecure) {\n\t\t\tthis._lastTimer = new Date().getTime();\n\t\t\tthis._monitor();\n\t\t}\n\n\t\tif (objectsRequired) this._socket.emit(\"subscribeObjects\", \"*\");\n\n\t\tif (this._isConnected === true) {\n\t\t\t// Prevent double-firing on reconnect\n\t\t\tthis._resolveAuth(true); // Resolve auth promise regardless\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isConnected = true;\n\t\tif (this._connCallbacks.onConnChange) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._socket.emit(\"authEnabled\", (_auth: boolean, user: string) => {\n\t\t\t\t\tthis.user = user;\n\t\t\t\t\tthis._connCallbacks.onConnChange!(this._isConnected);\n\t\t\t\t\tif (typeof app !== \"undefined\") app.onConnChange(this._isConnected);\n\t\t\t\t});\n\t\t\t}, 0);\n\t\t}\n\n\t\t// Release all pending API calls (awaiting _checkReady)\n\t\tthis._resolveAuth(true);\n\t}\n\n\tprivate _onSocketReauthenticate() {\n\t\tif (this._connCallbacks.onConnChange) {\n\t\t\tthis._connCallbacks.onConnChange(false);\n\t\t\tif (typeof app !== \"undefined\") app.onConnChange(false);\n\t\t}\n\t\tconsole.warn(\"reauthenticate\");\n\t\twindow.location.reload();\n\t}\n\n\tprivate _onSocketConnectError(connOptions: ConnOptions) {\n\t\tif (typeof $ !== \"undefined\") {\n\t\t\t$(\".splash-screen-text\").css(\"color\", \"#002951\");\n\t\t}\n\t\tthis.reconnect(connOptions);\n\t}\n\n\tprivate _onSocketDisconnect(connOptions: ConnOptions) {\n\t\tthis._disconnectedSince = new Date().getTime();\n\t\tthis._isConnected = false;\n\n\t\t// Create a new, unresolved promise for the next connection\n\t\tthis._authPromise = new Promise((resolve, reject) => {\n\t\t\tthis._resolveAuth = resolve;\n\t\t\tthis._rejectAuth = reject;\n\t\t});\n\n\t\tif (this._connCallbacks.onConnChange) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst elem = document.getElementById(\"server-disconnect\");\n\t\t\t\tif (elem) elem.style.display = \"\";\n\t\t\t\tthis._connCallbacks.onConnChange!(this._isConnected);\n\t\t\t\tif (typeof app !== \"undefined\") app.onConnChange(this._isConnected);\n\t\t\t}, 5000);\n\t\t} else {\n\t\t\tconst elem = document.getElementById(\"server-disconnect\");\n\t\t\tif (elem) elem.style.display = \"\";\n\t\t}\n\t\tthis.reconnect(connOptions);\n\t}\n\n\tprivate _onSocketReconnect() {\n\t\tconst offlineTime = new Date().getTime() - (this._disconnectedSince || 0);\n\t\tconsole.log(`was offline for ${offlineTime / 1000}s`);\n\t\tif (this._reloadInterval && offlineTime > this._reloadInterval * 1000) {\n\t\t\twindow.location.reload();\n\t\t}\n\t}\n\n\tprivate _onSocketObjectChange(id: string, obj: any) {\n\t\tif (this._useStorage && typeof storage !== \"undefined\") {\n\t\t\t// ... (storage logic) ...\n\t\t}\n\t\tif (this._connCallbacks.onObjectChange) {\n\t\t\tthis._connCallbacks.onObjectChange(id, obj);\n\t\t}\n\t}\n\n\tprivate _onSocketStateChange(id: string, state: any) {\n\t\tif (!id || state === null || typeof state !== \"object\") return;\n\n\t\t// ... (original stateChange logic for commands) ...\n\n\t\tif (this._connCallbacks.onUpdate) {\n\t\t\tthis._connCallbacks.onUpdate(id, state);\n\t\t}\n\t}\n\n\tprivate _onSocketPermissionError(err: any) {\n\t\tif (this._connCallbacks.onError) {\n\t\t\tthis._connCallbacks.onError(err);\n\t\t} else {\n\t\t\tconsole.log(\"permissionError\", err);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the connection is initialized and authenticated.\n\t * Awaits the auth promise.\n\t */\n\tprivate async _checkReady(commandName: string): Promise<boolean> {\n\t\tif (this._type === \"local\") {\n\t\t\treturn true; // Always ready in local mode\n\t\t}\n\n\t\tif (!this._authPromise) {\n\t\t\tconsole.error(`Connection not initialized. Call .init() first for ${commandName}`);\n\t\t\tthrow new Error(\"Connection not initialized\");\n\t\t}\n\n\t\t// Waits until _onAuth() has called _resolveAuth(true).\n\t\tawait this._authPromise;\n\n\t\t// Additional checks (replaces _checkConnection)\n\t\tif (!this._isConnected) {\n\t\t\tconsole.log(`No connection for ${commandName}`);\n\t\t\tthrow new Error(\"No connection\");\n\t\t}\n\t\tif (this._socket === null) {\n\t\t\tconsole.log(`socket.io not initialized for ${commandName}`);\n\t\t\tthrow new Error(\"Socket.io not initialized\");\n\t\t}\n\n\t\t// We check _isAuthDone, which is set in _onAuth.\n\t\tif (!this._isAuthDone) {\n\t\t\tconsole.warn(`Auth not done for ${commandName}. Race condition?`);\n\t\t\tthrow new Error(\"Authentication not complete\");\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// --- Public API Methods (now with async/await) ---\n\n\tpublic getType = () => this._type;\n\tpublic getIsConnected = () => this._isConnected;\n\tpublic getIsLoginRequired = () => this._isSecure;\n\tpublic getUser = () => this.user;\n\n\tpublic setReloadTimeout = (timeout: number) => {\n\t\tthis._reloadInterval = parseInt(timeout as any, 10);\n\t};\n\tpublic setReconnectInterval = (interval: number) => {\n\t\tthis._reconnectInterval = parseInt(interval as any, 10);\n\t};\n\n\tpublic reconnect(connOptions: ConnOptions) {\n\t\tif ((!connOptions.mayReconnect || connOptions.mayReconnect()) && !this._connectInterval) {\n\t\t\tthis._connectInterval = setInterval(() => {\n\t\t\t\tconsole.log(\"Trying connect...\");\n\t\t\t\tthis._socket.connect();\n\t\t\t\t// ... (remaining reconnect logic with jQuery) ...\n\t\t\t}, this._reconnectInterval);\n\t\t\t// ...\n\t\t}\n\t}\n\n\tpublic async getVersion(): Promise<string> {\n\t\tawait this._checkReady(\"getVersion\");\n\t\treturn new Promise((resolve) => {\n\t\t\tthis._socket.emit(\"getVersion\", (_err: any, version: string) => {\n\t\t\t\tresolve(version);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Sends a command to an adapter instance.\n\t * (Your added function)\n\t */\n\tpublic async sendTo(adapterInstance: string, command: string, message: any): Promise<any> {\n\t\tawait this._checkReady(\"sendTo\");\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._socket.emit(\"sendTo\", adapterInstance, command, message, (result: any) => {\n\t\t\t\tif (result && result.error) {\n\t\t\t\t\treject(new Error(result.error));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Queries objects based on a view.\n\t * (Your added function)\n\t */\n\tpublic async getObjectView(design: string, search: string, params: any): Promise<{ rows: any[] }> {\n\t\tawait this._checkReady(\"getObjectView\");\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._socket.emit(\"getObjectView\", design, search, params, (err: any, res: any) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(res);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Reads a single object from the ioBroker database.\n\t */\n\tpublic async getObject(id: string): Promise<any> {\n\t\tawait this._checkReady(\"getObject\"); // Wait for auth to complete\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._socket.emit(\"getObject\", id, (err: any, obj: any) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(obj);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic async getStates(IDs: string[] | null): Promise<Record<string, any>> {\n\t\tif (this._type === \"local\") return {};\n\n\t\tawait this._checkReady(\"getStates\");\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._socket.emit(\"getStates\", IDs, (err: any, data: any) => {\n\t\t\t\tif (err || !data) {\n\t\t\t\t\treject(err || \"Authentication required\");\n\t\t\t\t} else {\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Subscribes to a specific state (or pattern) on the server.\n\t */\n\tpublic async subscribeState(id: string): Promise<void> {\n\t\tawait this._checkReady(\"subscribeState\"); // Wait for auth to complete\n\t\treturn new Promise((resolve) => {\n\t\t\t// console.log(`[conn] Subscribing to ${id}`);\n\t\t\tthis._socket.emit(\"subscribe\", id, () => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Unsubscribes from a specific state (or pattern) on the server.\n\t */\n\tpublic async unsubscribeState(id: string): Promise<void> {\n\t\tawait this._checkReady(\"unsubscribeState\"); // Wait for auth to complete\n\t\treturn new Promise((resolve) => {\n\t\t\t// console.log(`[conn] Unsubscribing from ${id}`);\n\t\t\tthis._socket.emit(\"unsubscribe\", id, () => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Reads all objects, enums, adapters, channels, and devices.\n\t * Flattens the callback hell with async/await.\n\t */\n\tpublic async getObjects(useCache: boolean = false): Promise<Record<string, any>> {\n\t\tif (this._useStorage && useCache) {\n\t\t\tif (typeof storage !== \"undefined\") {\n\t\t\t\tconst objects = this._objects || storage.get(\"objects\");\n\t\t\t\tif (objects) return objects;\n\t\t\t} else if (this._objects) {\n\t\t\t\treturn this._objects;\n\t\t\t}\n\t\t}\n\n\t\tawait this._checkReady(\"getObjects\");\n\n\t\ttry {\n\t\t\t// 1. Get main objects\n\t\t\tconst [err, data] = await new Promise<[any, Record<string, any>]>((resolve) => {\n\t\t\t\tthis._socket.emit(\"getObjects\", (err: any, data: any) => resolve([err, data]));\n\t\t\t});\n\t\t\tif (err) throw err;\n\n\t\t\t// 2. Get enums\n\t\t\tconst enumsRes = await this.getObjectView(\"system\", \"enum\", { startkey: \"enum.\", endkey: \"enum.\\u9999\" });\n\t\t\tconst enums: Record<string, any> = {};\n\t\t\tfor (const row of enumsRes.rows) {\n\t\t\t\tdata[row.id] = row.value;\n\t\t\t\tenums[row.id] = row.value;\n\t\t\t}\n\n\t\t\t// 3. Get adapter instances\n\t\t\tconst adaptersRes = await this.getObjectView(\"system\", \"instance\", { startkey: \"system.adapter.\", endkey: \"system.adapter.\\u9999\" });\n\t\t\tfor (const row of adaptersRes.rows) {\n\t\t\t\tdata[row.id] = row.value;\n\t\t\t}\n\n\t\t\t// 4. Get channels\n\t\t\tconst channelsRes = await this.getObjectView(\"system\", \"channel\", { startkey: \"\", endkey: \"\\u9999\" });\n\t\t\tfor (const row of channelsRes.rows) {\n\t\t\t\tdata[row.id] = row.value;\n\t\t\t}\n\n\t\t\t// 5. Get devices\n\t\t\tconst devicesRes = await this.getObjectView(\"system\", \"device\", { startkey: \"\", endkey: \"\\u9999\" });\n\t\t\tfor (const row of devicesRes.rows) {\n\t\t\t\tdata[row.id] = row.value;\n\t\t\t}\n\n\t\t\t// Save if caching is used\n\t\t\tif (this._useStorage) {\n\t\t\t\tthis._fillChildren(data);\n\t\t\t\tthis._objects = data;\n\t\t\t\tif (typeof storage !== \"undefined\") {\n\t\t\t\t\tstorage.set(\"objects\", data);\n\t\t\t\t\tstorage.set(\"enums\", enums);\n\t\t\t\t\tstorage.set(\"timeSync\", new Date().getTime());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in getObjects:\", error);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t// ... (Here the remaining methods like readFile, writeFile, getChildren etc.\n\t// \t\tconvert to async/await using the same pattern) ...\n\n\t// Example for readFile:\n\tpublic async readFile(filename: string, isRemote: boolean = false): Promise<{ data: any; mimeType?: string }> {\n\t\tif (this._type === \"local\") {\n\t\t\ttry {\n\t\t\t\tconst data = storage.get(filename);\n\t\t\t\treturn { data: data ? JSON.parse(data) : null };\n\t\t\t} catch (err) {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\n\t\tawait this._checkReady(\"readFile\");\n\n\t\tif (!isRemote && typeof app !== \"undefined\") {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tapp.readLocalFile(filename.replace(/^\\/vis\\.0\\//, \"\"), (err, data, mimeType) => {\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\telse resolve({ data, mimeType });\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tlet adapter = this.namespace;\n\t\tif (filename[0] === \"/\") {\n\t\t\tconst p = filename.split(\"/\");\n\t\t\tadapter = p[1];\n\t\t\tp.splice(0, 2);\n\t\t\tfilename = p.join(\"/\");\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._socket.emit(\"readFile\", adapter, filename, (err: any, data: any, mimeType: string) => {\n\t\t\t\tif (err) reject(err);\n\t\t\t\telse resolve({ data, mimeType });\n\t\t\t});\n\t\t});\n\t}\n\n\t// --- Private Helper Functions ---\n\n\tprivate _monitor() {\n\t\tif (this._timer) return;\n\t\tconst ts = new Date().getTime();\n\t\tif (this._reloadInterval && ts - this._lastTimer > this._reloadInterval * 1000) {\n\t\t\twindow.location.reload();\n\t\t} else {\n\t\t\tthis._lastTimer = ts;\n\t\t}\n\t\tthis._timer = setTimeout(() => {\n\t\t\tthis._timer = null;\n\t\t\tthis._monitor();\n\t\t}, 10000);\n\t}\n\n\tprivate _fillChildren(objects: Record<string, any>) {\n\t\tconst items = Object.keys(objects).sort();\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tconst id = items[i];\n\t\t\tif (objects[id].common) {\n\t\t\t\tlet j = i + 1;\n\t\t\t\tconst children: string[] = [];\n\t\t\t\tconst len = id.length + 1;\n\t\t\t\tconst name = id + \".\";\n\t\t\t\twhile (j < items.length && items[j].substring(0, len) === name) {\n\t\t\t\t\tchildren.push(items[j++]);\n\t\t\t\t}\n\t\t\t\tobjects[id].children = children;\n\t\t\t}\n\t\t}\n\t}\n}\n", "import * as d3 from \"d3\";\nimport { localCoordsToRobotCoords, robotCoordsToLocalCoords } from \"../common/coordTransformation\";\nimport { IMG_CHARGER, IMG_GO_TO_PIN, IMG_ROBOT_ORIGINAL } from \"../common/images\";\nimport type { PathResult } from \"../common/pathProcessor\";\nimport { processPaths } from \"../common/pathProcessor\";\nimport { Connection } from \"./conn.js\";\n\n// Interfaces\n// -----------------------------------------------------------------------------\n\ninterface MapData {\n\tIMAGE: {\n\t\tposition: { left: number; top: number };\n\t\tdimensions: { height: number; width: number };\n\t\tsegments: {\n\t\t\tlist: SegmentInfo[];\n\t\t};\n\t};\n\tROBOT_POSITION?: PositionBlock;\n\tCHARGER_LOCATION?: PositionBlock;\n\tPATH?: PathBlock;\n\tMOP_PATH?: number[];\n\tOBSTACLES2?: Array<[number, number, ...any]>;\n\tCARPET_MAP?: number[];\n}\n\ninterface PositionBlock {\n\tposition: [number, number];\n\tangle: number;\n}\n\ninterface PathBlock {\n\tcurrent_angle: number;\n\tpoints: [number, number][];\n}\n\ninterface SegmentInfo {\n\tid: number;\n\tname: string;\n\tcenter: [number, number]; // Robot coordinates\n}\n\ninterface Robot {\n\tduid: string;\n\tname: string;\n}\n\ninterface Point {\n\tx: number;\n\ty: number;\n}\n\ninterface Rect {\n\tid: number; // Unique ID for D3 data binding\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n}\n\ninterface ConnCallbacks {\n\tonConnChange?: (isConnected: boolean) => void;\n\tonUpdate?: (id: string, state: any | null | undefined) => void;\n\tonRefresh?: ((...args: any[]) => any) | null;\n\tonAuth?: ((...args: any[]) => any) | null;\n\tonCommand?: (instance: string, command: string, data: any) => any;\n\tonError?: (err: any) => void;\n\tonObjectChange?: (id: string, obj: any) => void;\n}\n\ninterface MapParams {\n\tscaleFactor: number;\n\tleft: number;\n\ttopMap: number;\n\tmapMaxY: number;\n\timageHeight: number;\n\timageWidth: number;\n}\n\n// -----------------------------------------------------------------------------\n// Constants\n// -----------------------------------------------------------------------------\n\nconst VISUAL_BLOCK_SIZE = 3; // Scale factor for visualization\nconst UI_CONSTANTS = {\n\tROBOT_SIZE_BASE: 5,\n\tCHARGER_SIZE_BASE: 3,\n\tOBSTACLE_RADIUS_BASE: 3,\n\tZONE_STROKE_BASE: 1.5,\n\tZONE_HANDLE_RADIUS_BASE: 5,\n\tPIN_WIDTH_BASE: 29,\n\tPIN_HEIGHT_BASE: 24,\n\tPIN_Y_OFFSET_BASE: 5,\n\tPATH_MOP_WIDTH_BASE: 6.5,\n\tPATH_MAIN_WIDTH_RATIO_BASE: 0.8,\n\tPATH_BACKWASH_WIDTH_BASE: 0.5,\n};\n\nconst OBSTACLE_MAPPING: Record<number, string> = {\n\t\"-99\": \"99\",\n\t0: \"0\",\n\t1: \"1\",\n\t2: \"2\",\n\t3: \"3\",\n\t4: \"3\",\n\t5: \"5_cn\",\n\t9: \"9\",\n\t10: \"10\",\n\t18: \"18\",\n\t25: \"25\",\n\t26: \"26\",\n\t27: \"26\",\n\t34: \"10\",\n\t42: \"18\",\n\t48: \"48\",\n\t49: \"49\",\n\t50: \"50\",\n\t51: \"51\",\n\t54: \"54\",\n\t65: \"65\",\n\t67: \"67\",\n\t69: \"69\",\n\t70: \"70\",\n\t99: \"99\",\n};\n\n// -----------------------------------------------------------------------------\n// Map Application Class\n// -----------------------------------------------------------------------------\n\nclass MapApplication {\n\t// State\n\tprivate connection: Connection;\n\tprivate instanceId: string = \"\";\n\tprivate currentRobotDuid: string | null = null;\n\tprivate onStateChange: ((id: string, state: any | null | undefined) => void) | null = null;\n\tprivate currentMapSubscriptions: string[] = [];\n\n\t// Map Data\n\tprivate map: MapData | undefined;\n\tprivate mapImage: MapData[\"IMAGE\"] | undefined;\n\tprivate mapMinX: number = 0;\n\tprivate mapMinY: number = 0;\n\tprivate mapSizeX: number = 0;\n\tprivate mapSizeY: number = 0;\n\tprivate mapMaxY: number = 0;\n\tprivate goToTarget = false;\n\tprivate zoomLevel = 0.55;\n\n\t// D3 & SVG State\n\tprivate image = new Image();\n\tprivate initialTransform: d3.ZoomTransform | undefined;\n\tprivate svg: d3.Selection<d3.BaseType, unknown, HTMLElement, any>;\n\tprivate svgContainer: d3.Selection<d3.BaseType, unknown, HTMLElement, any>;\n\tprivate mainGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate mapImageElement: d3.Selection<SVGImageElement, unknown, HTMLElement, any>;\n\n\t// Layers\n\tprivate carpetGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate pathGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate mopPathGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate backwashPathGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate pureCleanPathGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\n\t// Element Groups\n\tprivate chargerGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate robotGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate roomNameGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate zoneGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate obstacleGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate pinGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\tprivate zoom: d3.ZoomBehavior<Element, unknown>;\n\n\tprivate wheelZoom = 1;\n\tprivate readonly minZoom = 0.1;\n\tprivate readonly maxZoom = 10;\n\n\t// UI Interaction State\n\tprivate popupTimeout: number | null = null;\n\tprivate popupX: number = 0;\n\tprivate popupY: number = 0;\n\tprivate selectedObstacleID: any;\n\tprivate model: string | null = null;\n\tprivate robotModels: Record<string, string> = {};\n\tprivate rects: Rect[] = [];\n\tprivate zones: number[][] = [];\n\tprivate rectCounter = 0;\n\n\t// DOM Elements\n\tprivate popup!: HTMLElement;\n\tprivate popupImage!: HTMLImageElement;\n\tprivate triangle!: HTMLElement;\n\tprivate largePhoto!: HTMLElement;\n\tprivate largePhotoImage!: HTMLImageElement;\n\tprivate largePhotoBBox!: HTMLElement;\n\tprivate robotSelect!: HTMLSelectElement;\n\tprivate deleteButton!: HTMLButtonElement;\n\tprivate addButton!: HTMLButtonElement;\n\tprivate startButton!: HTMLButtonElement;\n\tprivate pauseButton!: HTMLButtonElement;\n\tprivate stopButton!: HTMLButtonElement;\n\tprivate dockButton!: HTMLButtonElement;\n\tprivate goToButton!: HTMLButtonElement;\n\tprivate resetZoomButton!: HTMLButtonElement;\n\n\tconstructor() {\n\t\tthis.connection = new Connection();\n\t\t// Initialize D3 selections with empty selections initially or in init()\n\t\t// We will initialize them properly in init() after DOM is ready\n\t\tthis.svg = d3.select(null) as any;\n\t\tthis.svgContainer = d3.select(null) as any;\n\t\tthis.mainGroup = d3.select(null) as any;\n\t\tthis.mapImageElement = d3.select(null) as any;\n\t\tthis.carpetGroup = d3.select(null) as any;\n\t\tthis.pathGroup = d3.select(null) as any;\n\t\tthis.mopPathGroup = d3.select(null) as any;\n\t\tthis.backwashPathGroup = d3.select(null) as any;\n\t\tthis.pureCleanPathGroup = d3.select(null) as any;\n\t\tthis.chargerGroup = d3.select(null) as any;\n\t\tthis.robotGroup = d3.select(null) as any;\n\t\tthis.roomNameGroup = d3.select(null) as any;\n\t\tthis.zoneGroup = d3.select(null) as any;\n\t\tthis.obstacleGroup = d3.select(null) as any;\n\t\tthis.pinGroup = d3.select(null) as any;\n\t\tthis.zoom = d3.zoom();\n\t}\n\n\tpublic async init() {\n\t\tthis.bindDomElements();\n\t\tthis.setupD3();\n\t\tthis.setupConnection();\n\t\tthis.bindUiEvents();\n\t}\n\n\tprivate bindDomElements() {\n\t\tconst getElement = <T extends HTMLElement>(id: string): T => {\n\t\t\tconst el = document.getElementById(id);\n\t\t\tif (!el) throw new Error(`Missing DOM element: ${id}`);\n\t\t\treturn el as T;\n\t\t};\n\n\t\tthis.popup = getElement(\"popup\");\n\t\tthis.popupImage = getElement(\"popup-image\");\n\t\tthis.triangle = getElement(\"triangle\");\n\t\tthis.largePhoto = getElement(\"largePhoto\");\n\t\tthis.largePhotoImage = getElement(\"largePhoto-image\");\n\t\tthis.largePhotoBBox = getElement(\"largePhoto-bbox\");\n\t\tthis.robotSelect = getElement(\"robotSelect\");\n\t\tthis.deleteButton = getElement(\"deleteButton\");\n\t\tthis.addButton = getElement(\"addButton\");\n\t\tthis.startButton = getElement(\"startButton\");\n\t\tthis.pauseButton = getElement(\"pauseButton\");\n\t\tthis.stopButton = getElement(\"stopButton\");\n\t\tthis.dockButton = getElement(\"dockButton\");\n\t\tthis.goToButton = getElement(\"goToButton\");\n\t\tthis.resetZoomButton = getElement(\"resetZoomButton\");\n\t}\n\n\tprivate setupD3() {\n\t\tthis.svgContainer = d3.select(\"#mapSvgContainer\");\n\t\tthis.svg = d3.select(\"#mapSvg\");\n\t\tthis.mainGroup = this.svg.append(\"g\").attr(\"class\", \"main-group\");\n\t\tthis.mapImageElement = this.mainGroup.append(\"image\").attr(\"class\", \"map-image\");\n\n\t\t// Add carpet layer (Vector SVG)\n\t\tthis.carpetGroup = this.mainGroup.append(\"g\").attr(\"class\", \"carpet\");\n\n\t\tthis.mopPathGroup = this.mainGroup\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"mop-paths\")\n\t\t\t.style(\"opacity\", 0.18);\n\t\tthis.pathGroup = this.mainGroup\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"paths\")\n\t\t\t.style(\"opacity\", 0.5);\n\t\tthis.backwashPathGroup = this.mainGroup\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"backwash-paths\")\n\t\t\t.style(\"opacity\", 0.2);\n\t\tthis.pureCleanPathGroup = this.mainGroup\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"pure-clean-paths\");\n\n\t\tthis.chargerGroup = this.mainGroup.append(\"g\").attr(\"class\", \"charger\");\n\t\tthis.obstacleGroup = this.mainGroup.append(\"g\").attr(\"class\", \"obstacles\");\n\t\tthis.zoneGroup = this.mainGroup.append(\"g\").attr(\"class\", \"zones\");\n\t\tthis.robotGroup = this.mainGroup.append(\"g\").attr(\"class\", \"robot\");\n\t\tthis.pinGroup = this.mainGroup.append(\"g\").attr(\"class\", \"pins\");\n\t\tthis.roomNameGroup = this.mainGroup.append(\"g\").attr(\"class\", \"room-names\");\n\n\t\tthis.pinGroup\n\t\t\t.append(\"image\")\n\t\t\t.attr(\"class\", \"goto-pin\")\n\t\t\t.attr(\"href\", IMG_GO_TO_PIN)\n\t\t\t.attr(\"width\", 29)\n\t\t\t.attr(\"height\", 24)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.style(\"display\", \"none\")\n\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\tthis.zoom = d3\n\t\t\t.zoom()\n\t\t\t.scaleExtent([this.minZoom, this.maxZoom])\n\t\t\t.on(\"zoom\", (event: any) => this.handleZoom(event));\n\n\t\tthis.svgContainer.call(this.zoom as any);\n\t}\n\n\tprivate setupConnection() {\n\t\tconst instance = this.getQueryParam(\"instance\");\n\t\tif (instance === null) {\n\t\t\tdocument.body.innerHTML = \"<h1>Error: No instance specified in URL.</h1>\";\n\t\t\treturn;\n\t\t}\n\t\tthis.instanceId = `roborock.${instance}`;\n\n\t\tconst connCallbacks: ConnCallbacks = {\n\t\t\tonConnChange: async (isConnected: boolean) => {\n\t\t\t\tif (isConnected) {\n\t\t\t\t\tthis.fetchRobotList();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonUpdate: (id, state) => {\n\t\t\t\tif (this.onStateChange) this.onStateChange(id, state as any);\n\t\t\t},\n\t\t\tonError: (err) => {\n\t\t\t\tconsole.error(\"Connection error:\", err);\n\t\t\t},\n\t\t};\n\n\t\tconst socketUrl = `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\n\t\tthis.connection.init({ name: this.instanceId, connLink: socketUrl }, connCallbacks, true);\n\t}\n\n\tprivate fetchRobotList() {\n\t\tconst startKey = `${this.instanceId}.Devices.`;\n\t\tconst endKey = `${this.instanceId}.Devices.\\u9999`;\n\n\t\tthis.connection\n\t\t\t.getObjectView(\"system\", \"device\", { startkey: startKey, endkey: endKey })\n\t\t\t.then((res: { rows: { id: string; value: any }[] }) => {\n\t\t\t\tconst robots: Robot[] = [];\n\t\t\t\tif (res && res.rows) {\n\t\t\t\t\tres.rows.forEach((row) => {\n\t\t\t\t\t\tconst idParts = row.id.split(\".\");\n\t\t\t\t\t\tconst duid = idParts[idParts.length - 1];\n\t\t\t\t\t\tconst name = row.value && row.value.common && row.value.common.name ? row.value.common.name : duid;\n\t\t\t\t\t\t// Extract model from native object\n\t\t\t\t\t\tconst model = row.value?.native?.model || row.value?.native?.deviceInfo?.model || null;\n\n\t\t\t\t\t\tif (duid) {\n\t\t\t\t\t\t\trobots.push({ duid: duid, name: name });\n\t\t\t\t\t\t\tif (model) {\n\t\t\t\t\t\t\t\tthis.robotModels[duid] = model;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (robots.length === 0) {\n\t\t\t\t\tconst instanceDuid = this.getQueryParam(\"instance\");\n\t\t\t\t\tif (instanceDuid) {\n\t\t\t\t\t\tthis.robotSelect.innerHTML = \"\";\n\t\t\t\t\t\tconst option = document.createElement(\"option\");\n\t\t\t\t\t\toption.value = instanceDuid;\n\t\t\t\t\t\toption.text = `Roborock (Instance ${instanceDuid})`;\n\t\t\t\t\t\tthis.robotSelect.appendChild(option);\n\t\t\t\t\t\tthis.currentRobotDuid = instanceDuid;\n\t\t\t\t\t\tthis.setupSocketListeners(instanceDuid);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.robotSelect.innerHTML = \"\";\n\t\t\t\trobots.forEach((robot: Robot) => {\n\t\t\t\t\tconst option = document.createElement(\"option\");\n\t\t\t\t\toption.value = robot.duid;\n\t\t\t\t\toption.text = robot.name;\n\t\t\t\t\tthis.robotSelect.appendChild(option);\n\t\t\t\t});\n\n\t\t\t\tif (robots.length > 0) {\n\t\t\t\t\tconst duid = robots[0].duid;\n\t\t\t\t\tthis.currentRobotDuid = duid;\n\t\t\t\t\tthis.robotSelect.value = duid;\n\t\t\t\t\tthis.setupSocketListeners(duid);\n\t\t\t\t}\n\n\t\t\t\t// Fetch HomeData to resolve models reliably\n\t\t\t\tconst homeDataId = `${this.instanceId}.HomeData`;\n\t\t\t\tthis.connection.getStates([homeDataId]).then((states: Record<string, any>) => {\n\t\t\t\t\tconst state = states[homeDataId];\n\t\t\t\t\tif (state && state.val) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst homeData = typeof state.val === \"string\" ? JSON.parse(state.val) : state.val;\n\t\t\t\t\t\t\tconst productMap: Record<string, string> = {};\n\t\t\t\t\t\t\tif (homeData.products) {\n\t\t\t\t\t\t\t\thomeData.products.forEach((p: any) => {\n\t\t\t\t\t\t\t\t\tif (p.id && p.model) productMap[p.id] = p.model;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst processDeviceList = (list: any[]) => {\n\t\t\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\t\t\tlist.forEach((d: any) => {\n\t\t\t\t\t\t\t\t\t\tif (d.duid && d.productId && productMap[d.productId]) {\n\t\t\t\t\t\t\t\t\t\t\tthis.robotModels[d.duid] = productMap[d.productId];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tprocessDeviceList(homeData.devices);\n\t\t\t\t\t\t\tprocessDeviceList(homeData.receivedDevices);\n\n\t\t\t\t\t\t\t// Re-trigger listeners if we have a model now\n\t\t\t\t\t\t\tif (this.currentRobotDuid && this.robotModels[this.currentRobotDuid]) {\n\t\t\t\t\t\t\t\tthis.model = this.robotModels[this.currentRobotDuid];\n\t\t\t\t\t\t\t\t// Refresh obstacles if they were drawn with fallback\n\t\t\t\t\t\t\t\tif (this.map && this.map.OBSTACLES2) {\n\t\t\t\t\t\t\t\t\tthis.drawObstacles(this.map.OBSTACLES2);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(\"Failed to parse HomeData:\", e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.error(\"Error fetching robot list:\", err));\n\t}\n\n\tprivate setupSocketListeners(duid: string) {\n\t\tif (this.onStateChange && this.currentMapSubscriptions.length > 0) {\n\t\t\tthis.currentMapSubscriptions.forEach((id) => {\n\t\t\t\tthis.connection.unsubscribeState(id);\n\t\t\t});\n\t\t\tthis.currentMapSubscriptions = [];\n\t\t}\n\n\t\tthis.map = undefined;\n\t\tthis.mapImage = undefined;\n\t\tthis.mapImageElement.attr(\"href\", null);\n\t\tthis.carpetGroup.selectAll(\"*\").remove();\n\t\tthis.obstacleGroup.selectAll(\"*\").remove();\n\t\tthis.pinGroup.select(\"image.goto-pin\").style(\"display\", \"none\").style(\"opacity\", 0);\n\t\tthis.robotGroup.selectAll(\"*\").remove();\n\t\tthis.chargerGroup.selectAll(\"*\").remove();\n\t\tthis.roomNameGroup.selectAll(\"*\").remove();\n\t\tthis.pathGroup.selectAll(\"*\").remove();\n\t\tthis.mopPathGroup.selectAll(\"*\").remove();\n\t\tthis.backwashPathGroup.selectAll(\"*\").remove();\n\t\tthis.pureCleanPathGroup.selectAll(\"*\").remove();\n\t\tthis.rects = [];\n\t\tthis.drawZones();\n\t\tthis.deleteButton.disabled = true;\n\t\tthis.addButton.disabled = false;\n\n\t\tconst mapBase64StateId = `${this.instanceId}.Devices.${duid}.map.mapBase64Clean`;\n\t\tconst mapDataStateId = `${this.instanceId}.Devices.${duid}.map.mapData`;\n\n\t\tthis.currentMapSubscriptions = [mapBase64StateId, mapDataStateId];\n\n\t\tthis.onStateChange = (id: string, state: any | null | undefined) => {\n\t\t\tif (!state || !state.val) {\n\t\t\t\tif (id === mapBase64StateId) {\n\t\t\t\t\tthis.mapImageElement.attr(\"href\", null);\n\t\t\t\t}\n\t\t\t\tif (id === mapDataStateId) {\n\t\t\t\t\tthis.map = undefined;\n\t\t\t\t\tthis.robotGroup.selectAll(\"*\").remove();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (id) {\n\t\t\t\tcase mapBase64StateId:\n\t\t\t\t\tthis.pinGroup.select(\"image.goto-pin\").style(\"display\", \"none\").style(\"opacity\", 0);\n\t\t\t\t\tthis.drawBackgroundImage(state.val as string);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase mapDataStateId:\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.map = typeof state.val === \"string\" ? JSON.parse(state.val) : state.val;\n\t\t\t\t\t\tif (this.map && this.map.IMAGE) {\n\t\t\t\t\t\t\tthis.mapImage = this.map.IMAGE;\n\t\t\t\t\t\t\tthis.updateMapImageSize();\n\t\t\t\t\t\t\tthis.drawRobotAndCharger(this.map.ROBOT_POSITION, this.map.CHARGER_LOCATION);\n\t\t\t\t\t\t\tthis.drawPaths(this.map.PATH, this.map.MOP_PATH);\n\t\t\t\t\t\t\tthis.drawObstacles(this.map.OBSTACLES2);\n\t\t\t\t\t\t\tthis.drawRoomNames(this.map.IMAGE.segments.list);\n\t\t\t\t\t\t\tthis.drawCarpet(this.map.CARPET_MAP);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"Failed to parse map data JSON:\", state.val, e);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tthis.connection.subscribeState(mapBase64StateId);\n\t\tthis.connection.subscribeState(mapDataStateId);\n\n\t\tthis.connection.getStates([mapBase64StateId, mapDataStateId]).then((states: Record<string, any | null | undefined>) => {\n\t\t\tif (!this.onStateChange) return;\n\n\t\t\t// Try to resolve model from map if already populated\n\t\t\tif (this.robotModels[duid]) {\n\t\t\t\tthis.model = this.robotModels[duid];\n\t\t\t}\n\n\t\t\tthis.onStateChange(mapBase64StateId, states[mapBase64StateId]);\n\t\t\tthis.onStateChange(mapDataStateId, states[mapDataStateId]);\n\t\t});\n\t}\n\t// -----------------------------------------------------------------------------\n\t// Drawing Methods\n\t// -----------------------------------------------------------------------------\n\n\tprivate updateMapImageSize() {\n\t\tif (!this.image.naturalWidth || !this.image.naturalHeight) return;\n\n\t\t// Use natural size of the image (1:1 scale)\n\t\tconst displayWidth = this.image.naturalWidth;\n\t\tconst displayHeight = this.image.naturalHeight;\n\n\t\tthis.mapImageElement\n\t\t\t.attr(\"href\", this.image.src)\n\t\t\t.attr(\"width\", displayWidth)\n\t\t\t.attr(\"height\", displayHeight)\n\t\t\t.attr(\"transform\", null)\n\t\t\t.style(\"image-rendering\", \"pixelated\");\n\t}\n\n\tprivate drawBackgroundImage(mapBase64: string) {\n\t\tif (!mapBase64) {\n\t\t\tthis.mapImageElement.attr(\"href\", null);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.image.src = mapBase64;\n\t\tthis.image.onload = () => {\n\t\t\tconst tempCanvas = document.createElement(\"canvas\");\n\t\t\tconst tempCtx = tempCanvas.getContext(\"2d\", { willReadFrequently: true });\n\t\t\tif (!tempCtx) return;\n\n\t\t\ttempCanvas.width = this.image.width;\n\t\t\ttempCanvas.height = this.image.height;\n\t\t\ttempCtx.imageSmoothingEnabled = false;\n\t\t\ttempCtx.drawImage(this.image, 0, 0);\n\n\t\t\tlet mapMaxX = 0;\n\t\t\tthis.mapMaxY = 0;\n\t\t\tthis.mapMinX = this.image.width;\n\t\t\tthis.mapMinY = this.image.height;\n\n\t\t\tconst imageData = tempCtx.getImageData(0, 0, this.image.width, this.image.height);\n\t\t\tconst pixels = imageData.data;\n\t\t\tfor (let i = 0; i < pixels.length; i += 4) {\n\t\t\t\tconst alpha = pixels[i + 3];\n\t\t\t\tif (alpha > 50) {\n\t\t\t\t\tconst x = (i / 4) % this.image.width;\n\t\t\t\t\tconst y = Math.floor(i / 4 / this.image.width);\n\t\t\t\t\tif (x < this.mapMinX) this.mapMinX = x;\n\t\t\t\t\tif (x > mapMaxX) mapMaxX = x;\n\t\t\t\t\tif (y < this.mapMinY) this.mapMinY = y;\n\t\t\t\t\tif (y > this.mapMaxY) this.mapMaxY = y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.mapMinX > mapMaxX) {\n\t\t\t\tthis.mapMinX = 0;\n\t\t\t\tmapMaxX = this.image.width;\n\t\t\t\tthis.mapMinY = 0;\n\t\t\t\tthis.mapMaxY = this.image.height;\n\t\t\t}\n\n\t\t\t// Calculate content dimensions based on detected pixels\n\t\t\tthis.mapSizeX = mapMaxX - this.mapMinX;\n\t\t\tthis.mapSizeY = this.mapMaxY - this.mapMinY;\n\n\t\t\t// Sanity check\n\t\t\tif (this.mapSizeX <= 0) this.mapSizeX = this.image.width;\n\t\t\tif (this.mapSizeY <= 0) this.mapSizeY = this.image.height;\n\n\t\t\tthis.updateMapImageSize();\n\n\t\t\tthis.carpetGroup.attr(\"transform\", null);\n\n\t\t\tconst svgWidth = parseFloat(this.svg.attr(\"width\")) || 800;\n\t\t\tconst svgHeight = parseFloat(this.svg.attr(\"height\")) || 600;\n\n\t\t\t// Zoom-to-fit calculations\n\t\t\tconst aspectRatio = svgWidth / svgHeight;\n\t\t\tconst contentAspectRatio = this.mapSizeX / this.mapSizeY;\n\n\t\t\tif (contentAspectRatio > aspectRatio) {\n\t\t\t\tthis.zoomLevel = this.roundTwoDecimals((svgWidth * 0.95) / this.mapSizeX); // 95% fit\n\t\t\t} else {\n\t\t\t\tthis.zoomLevel = this.roundTwoDecimals((svgHeight * 0.95) / this.mapSizeY);\n\t\t\t}\n\n\t\t\tif (this.zoomLevel < 0.1) this.zoomLevel = 0.1;\n\n\t\t\t// Center the content within the SVG\n\t\t\tconst contentCenterX = this.mapMinX + this.mapSizeX / 2;\n\t\t\tconst contentCenterY = this.mapMinY + this.mapSizeY / 2;\n\n\t\t\tthis.initialTransform = d3.zoomIdentity\n\t\t\t\t.translate(svgWidth / 2, svgHeight / 2)\n\t\t\t\t.scale(this.zoomLevel)\n\t\t\t\t.translate(-contentCenterX, -contentCenterY);\n\n\t\t\tthis.svgContainer.call(this.zoom.transform as any, this.initialTransform);\n\n\t\t\tif (this.map) {\n\t\t\t\tthis.drawRobotAndCharger(this.map.ROBOT_POSITION, this.map.CHARGER_LOCATION);\n\t\t\t\tthis.drawPaths(this.map.PATH, this.map.MOP_PATH);\n\t\t\t\tthis.drawObstacles(this.map.OBSTACLES2);\n\t\t\t\tthis.drawRoomNames(this.map.IMAGE.segments.list);\n\t\t\t\tthis.drawCarpet(this.map.CARPET_MAP);\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate drawRobotAndCharger(robotPos?: PositionBlock, chargerPos?: PositionBlock) {\n\t\tthis.robotGroup.selectAll(\"image.robot\").remove();\n\t\tthis.chargerGroup.selectAll(\"image.charger\").remove();\n\n\t\tif (!robotPos && !chargerPos) return;\n\n\t\tconst params = this.getMapParams();\n\t\tif (!params) return;\n\n\t\tconst scaledChargerSize = this.rescaler.chargerSize();\n\t\tconst scaledRobotSize = this.rescaler.robotSize();\n\n\t\t// Charger\n\t\tconst chargerData = chargerPos ? [chargerPos] : [];\n\t\tconst charger = this.chargerGroup.selectAll(\"image.charger\").data(chargerData);\n\t\tcharger.exit().remove();\n\t\tcharger\n\t\t\t.enter()\n\t\t\t.append(\"image\")\n\t\t\t.attr(\"class\", \"charger\")\n\t\t\t.attr(\"href\", IMG_CHARGER)\n\t\t\t.merge(charger as any)\n\t\t\t.attr(\"width\", scaledChargerSize)\n\t\t\t.attr(\"height\", scaledChargerSize)\n\t\t\t.attr(\"x\", (d) => this.robotToSvg({ x: d.position[0], y: d.position[1] }, params).x - scaledChargerSize / 2)\n\t\t\t.attr(\"y\", (d) => this.robotToSvg({ x: d.position[0], y: d.position[1] }, params).y - scaledChargerSize / 2);\n\n\t\t// Robot\n\t\tconst robotData = robotPos ? [robotPos] : [];\n\t\tconst robot = this.robotGroup.selectAll(\"image.robot\").data(robotData);\n\t\trobot.exit().remove();\n\t\trobot\n\t\t\t.enter()\n\t\t\t.append(\"image\")\n\t\t\t.attr(\"class\", \"robot\")\n\t\t\t.attr(\"href\", IMG_ROBOT_ORIGINAL)\n\t\t\t.merge(robot as any)\n\t\t\t.attr(\"width\", scaledRobotSize)\n\t\t\t.attr(\"height\", scaledRobotSize)\n\t\t\t.attr(\"transform\", (d) => {\n\t\t\t\tconst svgCoords = this.robotToSvg({ x: d.position[0], y: d.position[1] }, params);\n\t\t\t\tconst angle = -(d.angle ?? 0) + 90;\n\t\t\t\treturn `translate(${svgCoords.x}, ${svgCoords.y}) rotate(${angle}) translate(${-scaledRobotSize / 2}, ${-scaledRobotSize / 2})`;\n\t\t\t});\n\t}\n\n\tprivate drawRoomNames(segmentsList: SegmentInfo[]) {\n\t\tconst params = this.getMapParams();\n\t\tif (!params || !segmentsList) {\n\t\t\tthis.roomNameGroup.selectAll(\"text.room-name\").remove();\n\t\t\treturn;\n\t\t}\n\t\tconst baseFontSize = 12;\n\t\tconst baseStrokeWidth = 2.5;\n\n\t\tconst textElements = this.roomNameGroup.selectAll(\"text.room-name\").data(segmentsList, (d: any) => d.id);\n\t\ttextElements.exit().remove();\n\t\ttextElements\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"class\", \"room-name\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"dominant-baseline\", \"middle\")\n\t\t\t.style(\"fill\", \"#000\")\n\t\t\t.style(\"stroke\", \"white\")\n\t\t\t.style(\"pointer-events\", \"none\")\n\t\t\t.style(\"font-weight\", \"900\")\n\t\t\t.style(\"font-size\", `${baseFontSize}px`)\n\t\t\t.style(\"stroke-width\", `${baseStrokeWidth}px`)\n\t\t\t.style(\"paint-order\", \"stroke\")\n\t\t\t.attr(\"shape-rendering\", \"geometricPrecision\")\n\t\t\t.merge(textElements as any)\n\t\t\t.text((d) => d.name)\n\t\t\t.attr(\"x\", (d) => {\n\t\t\t\tif (d.center && typeof d.center[0] === \"number\" && !isNaN(d.center[0]))\n\t\t\t\t\treturn this.robotToSvg({ x: d.center[0], y: d.center[1] }, params).x;\n\t\t\t\treturn -1000;\n\t\t\t})\n\t\t\t.attr(\"y\", (d) => {\n\t\t\t\tif (d.center && typeof d.center[1] === \"number\" && !isNaN(d.center[1]))\n\t\t\t\t\treturn this.robotToSvg({ x: d.center[0], y: d.center[1] }, params).y;\n\t\t\t\treturn -1000;\n\t\t\t});\n\t}\n\n\tprivate drawPaths(pathData?: PathBlock, mopData?: number[]) {\n\t\tconst params = this.getMapParams();\n\t\tif (!params || !pathData?.points || !mopData) {\n\t\t\tthis.pathGroup.selectAll(\"*\").remove();\n\t\t\tthis.mopPathGroup.selectAll(\"*\").remove();\n\t\t\tthis.backwashPathGroup.selectAll(\"*\").remove();\n\t\t\tthis.pureCleanPathGroup.selectAll(\"*\").remove();\n\t\t\treturn;\n\t\t}\n\n\t\tconst scale = VISUAL_BLOCK_SIZE;\n\n\t\tconst paths: PathResult = processPaths(\n\t\t\tpathData.points,\n\t\t\tmopData,\n\t\t\t(robotPoint, p) => this.robotToSvg({ x: robotPoint[0], y: robotPoint[1] }, p),\n\t\t\tscale,\n\t\t\tparams\n\t\t);\n\n\t\tconst scaledMopWidth = this.rescaler.pathMopWidth();\n\t\tconst scaledPathWidth = this.rescaler.pathMainWidth();\n\t\tconst scaledBackwashWidth = this.rescaler.pathBackwashWidth();\n\n\t\t// 1. Main Path\n\t\tconst mainPath = this.pathGroup.selectAll(\"path.main-path\").data(paths.mainPathD ? [paths.mainPathD] : []);\n\t\tmainPath.exit().remove();\n\t\tmainPath\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\", \"main-path\")\n\t\t\t.merge(mainPath as any)\n\t\t\t.attr(\"d\", (d) => d)\n\t\t\t.style(\"fill\", \"none\")\n\t\t\t.style(\"stroke\", \"rgba(255,255,255,1.0)\")\n\t\t\t.style(\"stroke-width\", `${scaledPathWidth}px`)\n\t\t\t.style(\"stroke-linecap\", \"round\")\n\t\t\t.style(\"stroke-linejoin\", \"round\");\n\n\t\t// 2. Backwash Path\n\t\tconst backwashPath = this.backwashPathGroup.selectAll(\"path.backwash-path\").data(paths.backwashPathD ? [paths.backwashPathD] : []);\n\t\tbackwashPath.exit().remove();\n\t\tbackwashPath\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\", \"backwash-path\")\n\t\t\t.merge(backwashPath as any)\n\t\t\t.attr(\"d\", (d) => d)\n\t\t\t.style(\"fill\", \"none\")\n\t\t\t.style(\"stroke\", \"rgba(255,255,255,1.0)\")\n\t\t\t.style(\"stroke-width\", `${scaledBackwashWidth}px`)\n\t\t\t.style(\"stroke-dasharray\", `${4}, ${8}`)\n\t\t\t.style(\"stroke-linecap\", \"round\")\n\t\t\t.style(\"stroke-linejoin\", \"round\");\n\n\t\t// 3. PureClean Path\n\t\tconst pureCleanPath = this.pureCleanPathGroup.selectAll(\"path.pure-clean-path\").data(paths.pureCleanPathD ? [paths.pureCleanPathD] : []);\n\t\tpureCleanPath.exit().remove();\n\t\tpureCleanPath\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\", \"pure-clean-path\")\n\t\t\t.merge(pureCleanPath as any)\n\t\t\t.attr(\"d\", (d) => d)\n\t\t\t.style(\"fill\", \"none\")\n\t\t\t.style(\"stroke\", \"rgba(255,255,255,1.0)\")\n\t\t\t.style(\"stroke-width\", `${scaledBackwashWidth}px`)\n\t\t\t.style(\"stroke-linecap\", \"round\")\n\t\t\t.style(\"stroke-linejoin\", \"round\");\n\n\t\t// 4. Mop Path\n\t\tconst mopPath = this.mopPathGroup.selectAll(\"path.mop-path\").data(paths.mopPathD ? [paths.mopPathD] : []);\n\t\tmopPath.exit().remove();\n\t\tmopPath\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\", \"mop-path\")\n\t\t\t.merge(mopPath as any)\n\t\t\t.attr(\"d\", (d) => d)\n\t\t\t.style(\"fill\", \"none\")\n\t\t\t.style(\"stroke\", \"rgba(255,255,255,1.0)\")\n\t\t\t.style(\"stroke-width\", `${scaledMopWidth}px`)\n\t\t\t.style(\"stroke-linecap\", \"round\")\n\t\t\t.style(\"stroke-linejoin\", \"round\");\n\t}\n\n\tprivate drawObstacles(obstaclesData?: Array<[number, number, ...any]>) {\n\t\tconst params = this.getMapParams();\n\t\tif (!params || !obstaclesData) {\n\t\t\tthis.obstacleGroup.selectAll(\".obstacle-group\").remove();\n\t\t\treturn;\n\t\t}\n\t\tconst fixedRadius = this.rescaler.scale() * UI_CONSTANTS.OBSTACLE_RADIUS_BASE;\n\t\tconst bgRadius = fixedRadius * 1.1;\n\t\tconst imageSize = fixedRadius * 1.8;\n\n\t\tconst groups = this.obstacleGroup.selectAll(\".obstacle-group\").data(obstaclesData);\n\n\t\tgroups.exit().remove();\n\n\t\tconst enterGroups = groups\n\t\t\t.enter()\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"obstacle-group\")\n\t\t\t.style(\"cursor\", \"default\")\n\t\t\t.on(\"click\", (event: MouseEvent, d: any) => {\n\t\t\t\tif (!this.currentRobotDuid) return;\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.selectedObstacleID = d[6];\n\t\t\t\tconst robotPoint = { x: d[0], y: d[1] };\n\t\t\t\tconst worldPoint = robotCoordsToLocalCoords(robotPoint, params!);\n\t\t\t\tthis.popupX = worldPoint.x;\n\t\t\t\tthis.popupY = worldPoint.y;\n\n\t\t\t\tif (this.popupTimeout) clearTimeout(this.popupTimeout);\n\n\t\t\t\tthis.connection\n\t\t\t\t\t.sendTo(this.instanceId, \"get_obstacle_image\", { obstacleId: this.selectedObstacleID, duid: this.currentRobotDuid, type: 1 })\n\t\t\t\t\t.then((response) => {\n\n\t\t\t\t\t\tif (response && (response as any).image) {\n\t\t\t\t\t\t\tlet imageData = (response as any).image as string;\n\t\t\t\t\t\t\tif (typeof imageData === \"string\" && !imageData.startsWith(\"data:image/\")) imageData = \"data:image/png;base64,\" + imageData;\n\t\t\t\t\t\t\tthis.popupImage.src = imageData;\n\t\t\t\t\t\t\tthis.popup.style.display = \"block\";\n\t\t\t\t\t\t\tthis.triangle.style.display = \"block\";\n\t\t\t\t\t\t\tthis.updatePopupPosition();\n\t\t\t\t\t\t\tthis.popupTimeout = window.setTimeout(() => {\n\t\t\t\t\t\t\t\tthis.popup.style.display = \"none\";\n\t\t\t\t\t\t\t\tthis.triangle.style.display = \"none\";\n\t\t\t\t\t\t\t\tthis.popupTimeout = null;\n\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t} else if (response && (response as any).data && (response as any).version === undefined) {\n\t\t\t\t\t\t\t// Fallback for raw buffer if passed as object\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => console.error(\"Error getting obstacle image:\", err));\n\t\t\t\tthis.updatePopupPosition();\n\t\t\t});\n\n\t\tenterGroups\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"class\", \"obstacle-bg\")\n\t\t\t.attr(\"r\", bgRadius)\n\t\t\t.attr(\"fill\", \"rgba(100, 100, 100, 0.2)\") // More transparent\n\t\t\t.attr(\"stroke\", \"white\")\n\t\t\t.attr(\"stroke-width\", 0.5); // Thinner border\n\n\t\tenterGroups\n\t\t\t.append(\"image\")\n\t\t\t.attr(\"class\", \"obstacle-icon\")\n\t\t\t.attr(\"width\", imageSize)\n\t\t\t.attr(\"height\", imageSize)\n\t\t\t.attr(\"x\", -imageSize / 2)\n\t\t\t.attr(\"y\", -imageSize / 2)\n\t\t\t.on(\"error\", function () {\n\t\t\t\t// Revert to a generic fallback icon instead of making the obstacle invisible\n\t\t\t\t// Use 'default' model folder which we know exists\n\t\t\t\td3.select(this).attr(\"href\", `assets/default/drawable-mdpi/projects_comroborocktanos_resources_obstacle_new_p18.png`);\n\t\t\t});\n\n\t\tconst allGroups = enterGroups.merge(groups as any);\n\n\t\tallGroups.attr(\"transform\", (d: any) => {\n\t\t\tconst pos = this.robotToSvg({ x: d[0] + 25, y: d[1] + 25 }, params); // Added +25 offset for obstacle center?\n\t\t\treturn `translate(${pos.x}, ${pos.y})`;\n\t\t});\n\n\t\tallGroups\n\t\t\t.select(\"image\")\n\t\t\t.attr(\"href\", (d: any) => {\n\t\t\t\tconst type = d[2];\n\t\t\t\tconst suffix = OBSTACLE_MAPPING[type] || \"18\";\n\t\t\t\tconst modelFolder = this.model || \"default\";\n\t\t\t\treturn `assets/${modelFolder}/drawable-mdpi/projects_comroborocktanos_resources_obstacle_new_p${suffix}.png`;\n\t\t\t});\n\t}\n\n\tprivate drawCarpet(carpetMap?: number[]) {\n\t\tif (!carpetMap || !this.mapImage || !this.mapImage.dimensions) {\n\t\t\tthis.carpetGroup.selectAll(\"*\").remove();\n\t\t\treturn;\n\t\t}\n\n\t\t// mapData provides UNSCALED dimensions (raw grid size)\n\t\t// We do NOT divide by VISUAL_BLOCK_SIZE here because dimensions IS the grid size.\n\t\tconst gridWidth = this.mapImage.dimensions.width;\n\t\tconst gridHeight = this.mapImage.dimensions.height;\n\t\tconst stride = 3;\n\n\t\tconst pathCoords: string[] = [];\n\n\t\t// Consistent Offsets with Coords.ts\n\t\t// For grid-based elements (Carpet), we align to the grid cell (0,0), not the center (1.5, 1.5).\n\t\t// Paths use 1.5 to be in the center of the cell. Carpets fill the cell.\n\t\tconst offsetX = 0;\n\t\tconst offsetY = 0;\n\n\t\tcarpetMap.forEach((px) => {\n\t\t\tconst col = px % gridWidth;\n\t\t\tconst row = Math.floor(px / gridWidth);\n\t\t\tconst invertedRow = gridHeight - row - 1;\n\n\t\t\tconst baseX = col * VISUAL_BLOCK_SIZE + offsetX;\n\t\t\tconst baseY = invertedRow * VISUAL_BLOCK_SIZE + offsetY;\n\n\t\t\tfor (let dx = 0; dx < VISUAL_BLOCK_SIZE; dx++) {\n\t\t\t\tfor (let dy = 0; dy < VISUAL_BLOCK_SIZE; dy++) {\n\t\t\t\t\tif ((dx + dy) % stride === 2) {\n\t\t\t\t\t\tpathCoords.push(`M${baseX + dx} ${baseY + dy}h1v1h-1z`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst combinedPathData = pathCoords.join(\"\");\n\n\t\tconst pathSelection = this.carpetGroup.selectAll(\"path.carpet-path\").data([combinedPathData]);\n\t\tpathSelection.exit().remove();\n\t\tpathSelection\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\", \"carpet-path\")\n\t\t\t.style(\"fill\", \"rgba(0, 0, 0, 0.4)\")\n\t\t\t.attr(\"shape-rendering\", \"crispEdges\")\n\t\t\t.merge(pathSelection as any)\n\t\t\t.attr(\"d\", (d) => d);\n\t}\n\n\tprivate drawZones() {\n\t\tconst dragHandler = d3\n\t\t\t.drag<SVGGElement, Rect>()\n\t\t\t.on(\"start\", (event: any) => {\n\t\t\t\tconst element = event.sourceEvent.target.closest(\"g.zone\");\n\t\t\t\tif (element) d3.select(element).raise().style(\"cursor\", \"grabbing\");\n\t\t\t\tthis.deleteButton.disabled = false;\n\t\t\t})\n\t\t\t.on(\"drag\", (event: any, d: Rect) => {\n\t\t\t\tif (!this.mapImage) return;\n\t\t\t\tconst minBoundX = this.mapMinX,\n\t\t\t\t\tminBoundY = this.mapMinY,\n\t\t\t\t\tmaxBoundX = this.mapMinX + this.mapSizeX,\n\t\t\t\t\tmaxBoundY = this.mapMinY + this.mapSizeY;\n\t\t\t\tlet newX = Math.max(minBoundX, d.x + event.dx);\n\t\t\t\tlet newY = Math.max(minBoundY, d.y + event.dy);\n\t\t\t\tif (newX + d.width > maxBoundX) newX = maxBoundX - d.width;\n\t\t\t\tif (newY + d.height > maxBoundY) newY = maxBoundY - d.height;\n\t\t\t\td.x = newX;\n\t\t\t\td.y = newY;\n\t\t\t\tconst element = event.sourceEvent.target.closest(\"g.zone\");\n\t\t\t\tif (element) d3.select(element).attr(\"transform\", `translate(${d.x}, ${d.y})`);\n\t\t\t})\n\t\t\t.on(\"end\", (event: any) => {\n\t\t\t\tconst element = event.sourceEvent.target.closest(\"g.zone\");\n\t\t\t\tif (element) d3.select(element).style(\"cursor\", \"move\");\n\t\t\t\tthis.updateRobotZones();\n\t\t\t});\n\n\t\tconst resizeHandler = d3\n\t\t\t.drag<SVGCircleElement, Rect>()\n\t\t\t.on(\"start\", (event: any) => {\n\t\t\t\tevent.sourceEvent.stopPropagation();\n\t\t\t\tconst element = event.sourceEvent.target;\n\t\t\t\tif (element) d3.select(element).raise();\n\t\t\t})\n\t\t\t.on(\"drag\", (event: any, d: Rect) => {\n\t\t\t\tif (!this.mapImage) return;\n\t\t\t\tconst maxBoundX = this.mapMinX + this.mapSizeX,\n\t\t\t\t\tmaxBoundY = this.mapMinY + this.mapSizeY;\n\t\t\t\tlet newWidth = Math.max(d.width + event.dx, 20);\n\t\t\t\tlet newHeight = Math.max(d.height + event.dy, 20);\n\t\t\t\tif (d.x + newWidth > maxBoundX) newWidth = maxBoundX - d.x;\n\t\t\t\tif (d.y + newHeight > maxBoundY) newHeight = maxBoundY - d.y;\n\t\t\t\td.width = newWidth;\n\t\t\t\td.height = newHeight;\n\t\t\t\tconst element = event.sourceEvent.target;\n\t\t\t\tif (element) {\n\t\t\t\t\tconst parentGroup = d3.select(element.parentNode as SVGGElement);\n\t\t\t\t\tparentGroup.select(\"rect\").attr(\"width\", d.width).attr(\"height\", d.height);\n\t\t\t\t\tparentGroup.select(\"circle.zone-handle\").attr(\"cx\", d.width).attr(\"cy\", d.height);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on(\"end\", () => this.updateRobotZones());\n\n\t\tconst selection = this.zoneGroup.selectAll(\"g.zone\").data(this.rects, (d: any) => d.id);\n\t\tselection.exit().remove();\n\t\tconst enterGroup = selection.enter().append(\"g\").attr(\"class\", \"zone\").call(dragHandler as any);\n\t\tenterGroup.append(\"rect\").attr(\"class\", \"zone-rect\").attr(\"x\", 0).attr(\"y\", 0).style(\"stroke-width\", this.rescaler.zoneStrokeWidth());\n\t\tenterGroup.append(\"circle\").attr(\"class\", \"zone-handle\").attr(\"r\", this.rescaler.zoneHandleRadius()).call(resizeHandler as any);\n\t\tconst mergedSelection = selection.merge(enterGroup as any);\n\t\tmergedSelection.attr(\"transform\", (d: Rect) => `translate(${d.x}, ${d.y})`);\n\t\tmergedSelection\n\t\t\t.select(\"rect\")\n\t\t\t.attr(\"width\", (d: Rect) => d.width)\n\t\t\t.attr(\"height\", (d: Rect) => d.height)\n\t\t\t.style(\"stroke-width\", this.rescaler.zoneStrokeWidth());\n\t\tmergedSelection\n\t\t\t.select(\"circle.zone-handle\")\n\t\t\t.attr(\"cx\", (d: Rect) => d.width)\n\t\t\t.attr(\"cy\", (d: Rect) => d.height)\n\t\t\t.attr(\"r\", this.rescaler.zoneHandleRadius());\n\t}\n\n\t// -----------------------------------------------------------------------------\n\t// Helper Methods\n\t// -----------------------------------------------------------------------------\n\n\tprivate updateRobotZones() {\n\t\tconst params = this.getMapParams();\n\t\tif (!params) return;\n\t\tconst cleanCountInput = document.getElementById(\"cleanCount\") as HTMLInputElement;\n\t\tthis.zones = [];\n\t\tconst cleanCount = parseInt(cleanCountInput.value) || 1;\n\t\tfor (const rect of this.rects) {\n\t\t\tconst p1 = { x: rect.x, y: rect.y };\n\t\t\tconst p2 = { x: rect.x + rect.width, y: rect.y + rect.height };\n\t\t\tconst coords1 = localCoordsToRobotCoords(p1, params);\n\t\t\tconst coords2 = localCoordsToRobotCoords(p2, params);\n\t\t\tthis.zones.push([\n\t\t\t\tMath.min(coords1.x, coords2.x),\n\t\t\t\tMath.min(coords1.y, coords2.y),\n\t\t\t\tMath.max(coords1.x, coords2.x),\n\t\t\t\tMath.max(coords1.y, coords2.y),\n\t\t\t\tcleanCount,\n\t\t\t]);\n\t\t}\n\t}\n\n\tprivate updatePopupPosition() {\n\t\tif (this.popup.style.display === \"block\" && this.popupX !== undefined && this.popupY !== undefined) {\n\t\t\tconst transform = d3.zoomTransform(this.svgContainer.node() as Element);\n\t\t\tconst svgCoords = this.worldToSvgCoords(this.popupX, this.popupY);\n\t\t\tconst screenCoords = transform.apply([svgCoords.x, svgCoords.y]);\n\t\t\tthis.popup.style.left = `${screenCoords[0]}px`;\n\t\t\tthis.popup.style.top = `${screenCoords[1]}px`;\n\t\t}\n\t}\n\n\tprivate handleZoom(event: any) {\n\t\tconst transform = event.transform;\n\t\tthis.mainGroup.attr(\"transform\", transform);\n\t\tthis.wheelZoom = transform.k;\n\n\t\tthis.zoneGroup.selectAll(\"rect.zone-rect\").style(\"stroke-width\", this.rescaler.zoneStrokeWidth());\n\t\tthis.zoneGroup.selectAll(\"circle.zone-handle\").attr(\"r\", this.rescaler.zoneHandleRadius());\n\n\t\tconst scaledRobotSize = this.rescaler.robotSize();\n\t\tthis.robotGroup\n\t\t\t.selectAll(\"image.robot\")\n\t\t\t.attr(\"width\", scaledRobotSize)\n\t\t\t.attr(\"height\", scaledRobotSize)\n\t\t\t.attr(\"transform\", (d: any) => {\n\t\t\t\tconst params = this.getMapParams();\n\t\t\t\tif (!params) return \"\";\n\t\t\t\tconst svgCoords = this.robotToSvg({ x: d.position[0], y: d.position[1] }, params);\n\t\t\t\tconst angle = -(d.angle ?? 0) + 90;\n\t\t\t\treturn `translate(${svgCoords.x}, ${svgCoords.y}) rotate(${angle}) translate(${-scaledRobotSize / 2}, ${-scaledRobotSize / 2})`;\n\t\t\t});\n\n\t\tconst scaledChargerSize = this.rescaler.chargerSize();\n\t\tthis.chargerGroup\n\t\t\t.selectAll(\"image.charger\")\n\t\t\t.attr(\"width\", scaledChargerSize)\n\t\t\t.attr(\"height\", scaledChargerSize)\n\t\t\t.attr(\"x\", (d: any) => {\n\t\t\t\tconst params = this.getMapParams();\n\t\t\t\tif (!params) return 0;\n\t\t\t\treturn this.robotToSvg({ x: d.position[0], y: d.position[1] }, params).x - scaledChargerSize / 2;\n\t\t\t})\n\t\t\t.attr(\"y\", (d: any) => {\n\t\t\t\tconst params = this.getMapParams();\n\t\t\t\tif (!params) return 0;\n\t\t\t\treturn this.robotToSvg({ x: d.position[0], y: d.position[1] }, params).y - scaledChargerSize / 2;\n\t\t\t});\n\n\t\tthis.pathGroup.selectAll(\"path.main-path\").style(\"stroke-width\", `${this.rescaler.pathMainWidth()}px`);\n\t\tthis.backwashPathGroup.selectAll(\"path.backwash-path\").style(\"stroke-width\", `${this.rescaler.pathBackwashWidth()}px`);\n\t\tthis.mopPathGroup.selectAll(\"path.mop-path\").style(\"stroke-width\", `${this.rescaler.pathMopWidth()}px`);\n\t\tthis.pureCleanPathGroup.selectAll(\"path.pure-clean-path\").style(\"stroke-width\", `${this.rescaler.pathBackwashWidth()}px`);\n\n\t\tconst scaledPinWidth = this.rescaler.pinWidth();\n\t\tconst scaledPinHeight = this.rescaler.pinHeight();\n\t\tconst scaledPinYOffset = this.rescaler.pinYOffset();\n\t\tthis.pinGroup\n\t\t\t.selectAll(\"image.goto-pin\")\n\t\t\t.attr(\"width\", scaledPinWidth)\n\t\t\t.attr(\"height\", scaledPinHeight)\n\t\t\t.attr(\"x\", function () {\n\t\t\t\tconst centerX = d3.select(this).attr(\"data-center-x\");\n\t\t\t\treturn (parseFloat(centerX) || 0) - scaledPinWidth / 2;\n\t\t\t})\n\t\t\t.attr(\"y\", function () {\n\t\t\t\tconst centerY = d3.select(this).attr(\"data-center-y\");\n\t\t\t\treturn (parseFloat(centerY) || 0) - (scaledPinHeight - scaledPinYOffset);\n\t\t\t});\n\n\t\tthis.updatePopupPosition();\n\t}\n\n\tprivate getMapParams(): MapParams | null {\n\t\tif (!this.mapImage || !this.mapImage.dimensions || this.mapMaxY === undefined) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tscaleFactor: VISUAL_BLOCK_SIZE,\n\t\t\tleft: this.mapImage.position.left,\n\t\t\ttopMap: this.mapImage.position.top,\n\t\t\tmapMaxY: this.mapMaxY,\n\t\t\timageHeight: this.mapImage.dimensions.height,\n\t\t\timageWidth: this.mapImage.dimensions.width,\n\t\t};\n\t}\n\n\tprivate screenToWorldCoords(x: number, y: number): Point {\n\t\tif (this.mapMinX === undefined || this.mapMinY === undefined) return { x: 0, y: 0 };\n\t\tconst transform = d3.zoomTransform(this.svgContainer.node() as Element);\n\t\tconst inverted = transform.invert([x, y]);\n\t\treturn { x: inverted[0], y: inverted[1] };\n\t}\n\n\tprivate worldToSvgCoords(x: number, y: number): Point {\n\t\t// Since we no longer translate the background image (it sits at 0,0),\n\t\t// we should not subtract mapMinX from the coordinates.\n\t\t// However, World Coordinates (from coords.ts) are 0-based relative to the Grid.\n\t\t// And the Image starts at Grid 0.\n\t\t// So WorldX = SvgX.\n\t\treturn { x: x, y: y };\n\t}\n\n\tprivate robotToSvg(robotPoint: Point, params: any): Point {\n\t\tconst worldPoint = robotCoordsToLocalCoords(robotPoint, params);\n\t\treturn this.worldToSvgCoords(worldPoint.x, worldPoint.y);\n\t}\n\n\tprivate roundTwoDecimals(number: number): number {\n\t\treturn Math.round(number * 100) / 100;\n\t}\n\n\tprivate getQueryParam(param: string): string | null {\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\treturn urlParams.get(param);\n\t}\n\n\tprivate bindUiEvents() {\n\t\tthis.robotSelect.addEventListener(\"change\", () => {\n\t\t\tconst newDuid = this.robotSelect.value;\n\t\t\tif (newDuid && newDuid !== this.currentRobotDuid) {\n\t\t\t\tthis.currentRobotDuid = newDuid;\n\t\t\t\tthis.setupSocketListeners(newDuid);\n\t\t\t}\n\t\t});\n\n\t\tthis.deleteButton.addEventListener(\"click\", () => {\n\t\t\tif (this.rects.length > 0) {\n\t\t\t\tthis.rects.pop();\n\t\t\t\tthis.drawZones();\n\t\t\t\tif (this.rects.length < 5) this.addButton.disabled = false;\n\t\t\t\tif (this.rects.length < 1) this.deleteButton.disabled = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.addButton.addEventListener(\"click\", () => {\n\t\t\tif (this.goToTarget) {\n\t\t\t\tthis.goToTarget = false;\n\t\t\t\tthis.svg.style(\"cursor\", \"grab\");\n\t\t\t\tthis.svgContainer.on(\"mousemove.gototarget\", null);\n\t\t\t\tthis.svgContainer.on(\"click.gototarget\", null);\n\t\t\t\tthis.pinGroup.select(\"image.goto-pin\").style(\"display\", \"none\").style(\"opacity\", 0);\n\t\t\t\tthis.goToButton.textContent = \"GoTo Point\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst svgWidth = parseFloat(this.svg.attr(\"width\"));\n\t\t\tconst svgHeight = parseFloat(this.svg.attr(\"height\"));\n\t\t\tconst centerWorld = this.screenToWorldCoords(svgWidth / 2, svgHeight / 2);\n\t\t\tconst params = this.getMapParams();\n\t\t\tif (!params) return;\n\n\t\t\tthis.rects.push({\n\t\t\t\tid: this.rectCounter++,\n\t\t\t\tx: centerWorld.x - 25 * params.scaleFactor,\n\t\t\t\ty: centerWorld.y - 25 * params.scaleFactor,\n\t\t\t\twidth: 50 * params.scaleFactor,\n\t\t\t\theight: 50 * params.scaleFactor,\n\t\t\t});\n\t\t\tthis.drawZones();\n\t\t\tif (this.rects.length > 0) this.deleteButton.disabled = false;\n\t\t\tif (this.rects.length > 4) this.addButton.disabled = true;\n\t\t\tthis.updateRobotZones();\n\t\t});\n\n\t\tthis.startButton.addEventListener(\"click\", () => {\n\t\t\tif (!this.currentRobotDuid) return;\n\t\t\tthis.updateRobotZones();\n\t\t\tconst command = this.zones.length > 0 ? \"app_zoned_clean\" : \"app_start\";\n\t\t\tconst parameters = this.zones.length > 0 ? { zones: this.zones, duid: this.currentRobotDuid } : { duid: this.currentRobotDuid };\n\t\t\tthis.connection.sendTo(this.instanceId, command, parameters).catch((err) => console.error(\"Error sending command:\", err));\n\t\t\tthis.rects = [];\n\t\t\tthis.drawZones();\n\t\t\tthis.deleteButton.disabled = true;\n\t\t\tthis.addButton.disabled = false;\n\t\t\tthis.startButton.style.display = \"none\";\n\t\t\tthis.pauseButton.style.display = \"inline-block\";\n\t\t});\n\n\t\tthis.pauseButton.addEventListener(\"click\", () => {\n\t\t\tif (!this.currentRobotDuid) return;\n\t\t\tthis.connection.sendTo(this.instanceId, \"app_pause\", { duid: this.currentRobotDuid });\n\t\t\tthis.startButton.style.display = \"inline-block\";\n\t\t\tthis.pauseButton.style.display = \"none\";\n\t\t});\n\n\t\tthis.stopButton.addEventListener(\"click\", () => {\n\t\t\tif (!this.currentRobotDuid) return;\n\t\t\tthis.connection.sendTo(this.instanceId, \"app_stop\", { duid: this.currentRobotDuid });\n\t\t\tthis.startButton.style.display = \"inline-block\";\n\t\t\tthis.pauseButton.style.display = \"none\";\n\t\t});\n\n\t\tthis.dockButton.addEventListener(\"click\", () => {\n\t\t\tif (!this.currentRobotDuid) return;\n\t\t\tthis.connection.sendTo(this.instanceId, \"app_charge\", { duid: this.currentRobotDuid });\n\t\t});\n\n\t\tthis.goToButton.addEventListener(\"click\", () => {\n\t\t\tif (this.goToTarget) {\n\t\t\t\tthis.goToTarget = false;\n\t\t\t\tthis.svg.style(\"cursor\", \"grab\");\n\t\t\t\tthis.svgContainer.on(\"mousemove.gototarget\", null);\n\t\t\t\tthis.svgContainer.on(\"click.gototarget\", null);\n\t\t\t\tthis.pinGroup.select(\"image.goto-pin\").style(\"display\", \"none\").style(\"opacity\", 0);\n\t\t\t\tthis.goToButton.textContent = \"GoTo Point\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.goToTarget = true;\n\t\t\tthis.svg.style(\"cursor\", \"none\");\n\t\t\tthis.goToButton.textContent = \"Cancel\";\n\t\t\tconst transform = d3.zoomTransform(this.svgContainer.node() as Element);\n\t\t\tconst svgWidth = parseFloat(this.svg.attr(\"width\"));\n\t\t\tconst svgHeight = parseFloat(this.svg.attr(\"height\"));\n\t\t\tconst [initialX, initialY] = transform.invert([svgWidth / 2, svgHeight / 2]);\n\t\t\tconst scaledPinWidth = this.rescaler.pinWidth();\n\t\t\tconst scaledPinHeight = this.rescaler.pinHeight();\n\t\t\tconst scaledPinYOffset = this.rescaler.pinYOffset();\n\t\t\tconst pin = this.pinGroup.select(\"image.goto-pin\");\n\t\t\tpin\n\t\t\t\t.style(\"display\", \"block\")\n\t\t\t\t.style(\"opacity\", 0.7)\n\t\t\t\t.attr(\"data-center-x\", initialX)\n\t\t\t\t.attr(\"data-center-y\", initialY)\n\t\t\t\t.attr(\"x\", initialX - scaledPinWidth / 2)\n\t\t\t\t.attr(\"y\", initialY - (scaledPinHeight - scaledPinYOffset));\n\n\t\t\tthis.svgContainer.on(\"mousemove.gototarget\", (event: MouseEvent) => {\n\t\t\t\tconst [mouseX, mouseY] = d3.pointer(event, this.mainGroup.node());\n\t\t\t\tconst scaledW = this.rescaler.pinWidth();\n\t\t\t\tconst scaledH = this.rescaler.pinHeight();\n\t\t\t\tconst scaledOff = this.rescaler.pinYOffset();\n\t\t\t\tpin\n\t\t\t\t\t.attr(\"data-center-x\", mouseX)\n\t\t\t\t\t.attr(\"data-center-y\", mouseY)\n\t\t\t\t\t.attr(\"x\", mouseX - scaledW / 2)\n\t\t\t\t\t.attr(\"y\", mouseY - (scaledH - scaledOff));\n\t\t\t});\n\n\t\t\tthis.svgContainer.on(\"click.gototarget\", (event: MouseEvent) => {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tconst params = this.getMapParams();\n\t\t\t\tif (!this.currentRobotDuid || !params) return;\n\t\t\t\tconst [mouseX, mouseY] = d3.pointer(event, this.mainGroup.node());\n\t\t\t\tconst worldX = mouseX;\n\t\t\t\tconst worldY = mouseY;\n\t\t\t\tconst point = localCoordsToRobotCoords({ x: worldX, y: worldY }, params);\n\t\t\t\tthis.connection.sendTo(this.instanceId, \"app_goto_target\", { points: [point.x, point.y], duid: this.currentRobotDuid });\n\t\t\t\tpin.style(\"opacity\", 1.0);\n\t\t\t\tthis.goToTarget = false;\n\t\t\t\tthis.svg.style(\"cursor\", \"grab\");\n\t\t\t\tthis.svgContainer.on(\"mousemove.gototarget\", null);\n\t\t\t\tthis.svgContainer.on(\"click.gototarget\", null);\n\t\t\t\tthis.goToButton.textContent = \"GoTo Point\";\n\t\t\t});\n\t\t});\n\n\t\tthis.resetZoomButton.addEventListener(\"click\", () => {\n\t\t\tif (this.initialTransform) {\n\t\t\t\tthis.svgContainer.transition().duration(750).call(this.zoom.transform as any, this.initialTransform);\n\t\t\t}\n\t\t});\n\n\t\tthis.popupImage.addEventListener(\"click\", () => {\n\t\t\tthis.largePhoto.style.display = \"block\";\n\t\t\tthis.popup.style.display = \"none\";\n\t\t\tthis.triangle.style.display = \"none\";\n\t\t\tif (this.popupTimeout) clearTimeout(this.popupTimeout);\n\t\t\tthis.popupTimeout = null;\n\t\t\tif (!this.currentRobotDuid || !this.selectedObstacleID) return;\n\t\t\tthis.largePhotoImage.src = \"\";\n\t\t\tthis.largePhotoBBox.style.display = \"none\";\n\n\t\t\tthis.connection\n\t\t\t\t.sendTo(this.instanceId, \"get_obstacle_image\", { obstacleId: this.selectedObstacleID, duid: this.currentRobotDuid, type: 0 })\n\t\t\t\t.then((response: any) => {\n\t\t\t\t\tif (response && (response as any).image) {\n\t\t\t\t\t\tlet imageData = (response as any).image as string;\n\t\t\t\t\t\tif (typeof imageData === \"string\" && !imageData.startsWith(\"data:image/\")) imageData = \"data:image/png;base64,\" + imageData;\n\t\t\t\t\t\t// Define the onload handler BEFORE setting .src to avoid race conditions\n\t\t\t\t\t\tthis.largePhotoImage.onload = () => {\n\t\t\t\t\t\t\t// Handle Bounding Box scaling if present\n\t\t\t\t\t\t\tif (response.bbox) {\n\t\t\t\t\t\t\t\tconst bbox = response.bbox;\n\t\t\t\t\t\t\t\tconst displayedWidth = this.largePhotoImage.clientWidth;\n\t\t\t\t\t\t\t\tconst displayedHeight = this.largePhotoImage.clientHeight;\n\n\t\t\t\t\t\t\t\t// Calculate scaling factor\n\t\t\t\t\t\t\t\t// Calculate scaling factor, protecting against zero division\n\t\t\t\t\t\t\t\tif (bbox.imageWidth > 0 && bbox.imageHeight > 0) {\n\t\t\t\t\t\t\t\t\tconst scaleX = displayedWidth / bbox.imageWidth;\n\t\t\t\t\t\t\t\t\tconst scaleY = displayedHeight / bbox.imageHeight;\n\n\t\t\t\t\t\t\t\t\t// Position BBox\n\t\t\t\t\t\t\t\t\tthis.largePhotoBBox.style.left = (bbox.x * scaleX) + \"px\";\n\t\t\t\t\t\t\t\t\tthis.largePhotoBBox.style.top = (bbox.y * scaleY) + \"px\";\n\t\t\t\t\t\t\t\t\tthis.largePhotoBBox.style.width = (bbox.w * scaleX) + \"px\";\n\t\t\t\t\t\t\t\t\tthis.largePhotoBBox.style.height = (bbox.h * scaleY) + \"px\";\n\t\t\t\t\t\t\t\t\tthis.largePhotoBBox.style.display = \"block\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.largePhotoImage.src = imageData.replace(/\\s/g, \"\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => console.error(\"Error getting large obstacle image:\", err));\n\t\t});\n\n\t\tthis.largePhoto.addEventListener(\"click\", () => {\n\t\t\tthis.largePhoto.style.display = \"none\";\n\t\t});\n\t}\n\n\n\t// Rescaler Helper\n\tprivate get rescaler() {\n\t\treturn {\n\t\t\tscale: () => VISUAL_BLOCK_SIZE,\n\t\t\trobotSize: () => VISUAL_BLOCK_SIZE * UI_CONSTANTS.ROBOT_SIZE_BASE,\n\t\t\tchargerSize: () => VISUAL_BLOCK_SIZE * UI_CONSTANTS.CHARGER_SIZE_BASE,\n\t\t\tzoneStrokeWidth: () => UI_CONSTANTS.ZONE_STROKE_BASE / this.wheelZoom,\n\t\t\tzoneHandleRadius: () => UI_CONSTANTS.ZONE_HANDLE_RADIUS_BASE / this.wheelZoom,\n\t\t\tpinWidth: () => UI_CONSTANTS.PIN_WIDTH_BASE / this.wheelZoom,\n\t\t\tpinHeight: () => UI_CONSTANTS.PIN_HEIGHT_BASE / this.wheelZoom,\n\t\t\tpinYOffset: () => UI_CONSTANTS.PIN_Y_OFFSET_BASE / this.wheelZoom,\n\t\t\tpathMopWidth: () => UI_CONSTANTS.PATH_MOP_WIDTH_BASE * VISUAL_BLOCK_SIZE,\n\t\t\tpathMainWidth: () => Math.max(1, VISUAL_BLOCK_SIZE * UI_CONSTANTS.PATH_MAIN_WIDTH_RATIO_BASE),\n\t\t\tpathBackwashWidth: () => UI_CONSTANTS.PATH_BACKWASH_WIDTH_BASE * VISUAL_BLOCK_SIZE,\n\t\t};\n\t}\n}\n\n// =================================================================================\n// --- Main Entry Point ---\n// =================================================================================\n\nwindow.onload = async () => {\n\tconst app = new MapApplication();\n\tapp.init().catch((err) => console.error(\"Failed to initialize Map Application:\", err));\n};\n"],
  "mappings": "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",
  "names": ["noop", "dispatch", "i", "n", "_", "t", "Dispatch", "parseTypenames", "typenames", "types", "name", "typename", "callback", "T", "get", "set", "copy", "type", "that", "args", "c", "dispatch_default", "xhtml", "namespaces_default", "namespace_default", "name", "prefix", "i", "namespaces_default", "creatorInherit", "name", "document", "uri", "xhtml", "creatorFixed", "fullname", "creator_default", "namespace_default", "none", "selector_default", "selector", "select_default", "select", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "Selection", "array", "x", "empty", "selectorAll_default", "selector", "arrayAll", "select", "array", "selectAll_default", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "Selection", "matcher_default", "selector", "childMatcher", "node", "find", "childFind", "match", "childFirst", "selectChild_default", "childMatcher", "filter", "children", "childrenFilter", "match", "selectChildren_default", "childMatcher", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Selection", "sparse_default", "update", "enter_default", "Selection", "sparse_default", "EnterNode", "parent", "datum", "child", "next", "selector", "constant_default", "x", "bindIndex", "parent", "group", "enter", "update", "exit", "data", "node", "groupLength", "dataLength", "EnterNode", "bindKey", "key", "i", "nodeByKeyValue", "keyValues", "keyValue", "datum", "data_default", "value", "bind", "parents", "groups", "constant_default", "m", "j", "arraylike", "enterGroup", "updateGroup", "exitGroup", "i0", "i1", "previous", "next", "Selection", "exit_default", "Selection", "sparse_default", "join_default", "onenter", "onupdate", "onexit", "enter", "update", "exit", "merge_default", "context", "selection", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Selection", "order_default", "groups", "j", "m", "group", "i", "next", "node", "sort_default", "compare", "ascending", "compareNode", "a", "b", "groups", "m", "sortgroups", "j", "group", "n", "sortgroup", "node", "i", "Selection", "call_default", "callback", "nodes_default", "node_default", "groups", "j", "m", "group", "i", "n", "node", "size_default", "size", "node", "empty_default", "each_default", "callback", "groups", "j", "m", "group", "i", "n", "node", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "value", "attrConstantNS", "attrFunction", "v", "attrFunctionNS", "attr_default", "namespace_default", "node", "window_default", "node", "styleRemove", "name", "styleConstant", "value", "priority", "styleFunction", "v", "style_default", "styleValue", "node", "window_default", "propertyRemove", "name", "propertyConstant", "value", "propertyFunction", "v", "property_default", "classArray", "string", "classList", "node", "ClassList", "name", "i", "classedAdd", "names", "list", "n", "classedRemove", "classedTrue", "classedFalse", "classedFunction", "value", "classed_default", "textRemove", "textConstant", "value", "textFunction", "v", "text_default", "htmlRemove", "htmlConstant", "value", "htmlFunction", "v", "html_default", "raise", "raise_default", "lower", "lower_default", "append_default", "name", "create", "creator_default", "constantNull", "insert_default", "name", "before", "create", "creator_default", "select", "selector_default", "remove", "parent", "remove_default", "selection_cloneShallow", "clone", "parent", "selection_cloneDeep", "clone_default", "deep", "datum_default", "value", "contextListener", "listener", "event", "parseTypenames", "typenames", "t", "name", "i", "onRemove", "typename", "on", "j", "m", "o", "onAdd", "value", "options", "on_default", "n", "dispatchEvent", "node", "type", "params", "window", "window_default", "event", "dispatchConstant", "dispatchFunction", "dispatch_default", "iterator_default", "groups", "j", "m", "group", "i", "n", "node", "root", "Selection", "groups", "parents", "selection", "selection_selection", "select_default", "selectAll_default", "selectChild_default", "selectChildren_default", "filter_default", "data_default", "enter_default", "exit_default", "join_default", "merge_default", "order_default", "sort_default", "call_default", "nodes_default", "node_default", "size_default", "empty_default", "each_default", "attr_default", "style_default", "property_default", "classed_default", "text_default", "html_default", "raise_default", "lower_default", "append_default", "insert_default", "remove_default", "clone_default", "datum_default", "on_default", "dispatch_default", "iterator_default", "selection_default", "select_default", "selector", "Selection", "root", "sourceEvent_default", "event", "sourceEvent", "pointer_default", "event", "node", "sourceEvent_default", "svg", "point", "rect", "nonpassive", "nonpassivecapture", "nopropagation", "event", "noevent_default", "nodrag_default", "view", "root", "selection", "select_default", "noevent_default", "nonpassivecapture", "yesdrag", "noclick", "constant_default", "x", "DragEvent", "type", "sourceEvent", "subject", "target", "identifier", "active", "x", "y", "dx", "dy", "dispatch", "value", "defaultFilter", "event", "defaultContainer", "defaultSubject", "d", "defaultTouchable", "drag_default", "filter", "container", "subject", "touchable", "gestures", "listeners", "dispatch_default", "active", "mousedownx", "mousedowny", "mousemoving", "touchending", "clickDistance2", "drag", "selection", "mousedowned", "touchstarted", "touchmoved", "nonpassive", "touchended", "gesture", "beforestart", "select_default", "mousemoved", "nonpassivecapture", "mouseupped", "nodrag_default", "nopropagation", "noevent_default", "dx", "dy", "yesdrag", "touches", "c", "n", "i", "that", "identifier", "touch", "dispatch", "p", "pointer_default", "s", "DragEvent", "type", "p0", "_", "constant_default", "value", "define_default", "constructor", "factory", "prototype", "extend", "parent", "definition", "key", "Color", "darker", "brighter", "reI", "reN", "reP", "reHex", "reRgbInteger", "reRgbPercent", "reRgbaInteger", "reRgbaPercent", "reHslPercent", "reHslaPercent", "named", "define_default", "color", "channels", "color_formatHex", "color_formatHex8", "color_formatHsl", "color_formatRgb", "hslConvert", "format", "m", "l", "rgbn", "Rgb", "rgba", "hsla", "n", "r", "g", "b", "a", "rgbConvert", "o", "rgb", "opacity", "extend", "k", "clampi", "clampa", "rgb_formatHex", "rgb_formatHex8", "rgb_formatRgb", "hex", "value", "h", "s", "Hsl", "min", "max", "hsl", "m2", "m1", "hsl2rgb", "clamph", "clampt", "basis", "t1", "v0", "v1", "v2", "v3", "t2", "t3", "basis_default", "values", "n", "t", "i", "basisClosed_default", "values", "n", "t", "i", "v0", "v1", "v2", "v3", "basis", "constant_default", "x", "linear", "a", "d", "t", "exponential", "b", "y", "gamma", "y", "nogamma", "a", "b", "exponential", "constant_default", "d", "linear", "rgb_default", "rgbGamma", "y", "color", "gamma", "rgb", "start", "end", "r", "g", "b", "opacity", "nogamma", "t", "rgbSpline", "spline", "colors", "rgbBasis", "basis_default", "rgbBasisClosed", "basisClosed_default", "number_default", "a", "b", "t", "reA", "reB", "zero", "b", "one", "t", "string_default", "a", "bi", "am", "bm", "bs", "q", "number_default", "i", "o", "degrees", "identity", "decompose_default", "a", "b", "c", "d", "e", "f", "scaleX", "scaleY", "skewX", "svgNode", "parseCss", "value", "m", "identity", "decompose_default", "parseSvg", "interpolateTransform", "parse", "pxComma", "pxParen", "degParen", "pop", "s", "translate", "xa", "ya", "xb", "yb", "q", "i", "number_default", "rotate", "a", "b", "skewX", "scale", "t", "n", "o", "interpolateTransformCss", "parseCss", "interpolateTransformSvg", "parseSvg", "epsilon2", "cosh", "x", "sinh", "tanh", "zoom_default", "zoomRho", "rho", "rho2", "rho4", "zoom", "p0", "p1", "ux0", "uy0", "w0", "ux1", "uy1", "w1", "dx", "dy", "d2", "i", "S", "t", "d1", "b0", "b1", "r0", "r1", "s", "coshr0", "u", "_", "_1", "_2", "_4", "frame", "timeout", "interval", "pokeDelay", "taskHead", "taskTail", "clockLast", "clockNow", "clockSkew", "clock", "setFrame", "f", "now", "clearNow", "Timer", "timer", "callback", "delay", "time", "sleep", "t", "timerFlush", "wake", "nap", "poke", "t0", "t1", "t2", "timeout_default", "callback", "delay", "time", "t", "Timer", "elapsed", "emptyOn", "dispatch_default", "emptyTween", "CREATED", "SCHEDULED", "STARTING", "STARTED", "RUNNING", "ENDING", "ENDED", "schedule_default", "node", "name", "id", "index", "group", "timing", "schedules", "create", "init", "schedule", "get", "set", "self", "tween", "timer", "elapsed", "start", "i", "j", "n", "o", "stop", "timeout_default", "tick", "t", "interrupt_default", "node", "name", "schedules", "schedule", "active", "empty", "STARTING", "ENDING", "ENDED", "interrupt_default", "name", "tweenRemove", "id", "name", "tween0", "tween1", "schedule", "set", "tween", "n", "tweenFunction", "value", "t", "i", "tween_default", "get", "tweenValue", "transition", "node", "interpolate_default", "a", "b", "c", "number_default", "color", "rgb_default", "string_default", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "interpolate", "value1", "string00", "string1", "interpolate0", "string0", "attrConstantNS", "attrFunction", "value", "string10", "attrFunctionNS", "attr_default", "namespace_default", "i", "interpolateTransformSvg", "interpolate_default", "tweenValue", "attrInterpolate", "name", "i", "t", "attrInterpolateNS", "fullname", "attrTweenNS", "value", "t0", "i0", "tween", "attrTween", "attrTween_default", "key", "namespace_default", "delayFunction", "id", "value", "init", "delayConstant", "delay_default", "get", "durationFunction", "id", "value", "set", "durationConstant", "duration_default", "get", "easeConstant", "id", "value", "set", "ease_default", "get", "easeVarying", "id", "value", "v", "set", "easeVarying_default", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Transition", "merge_default", "transition", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Transition", "start", "name", "t", "i", "onFunction", "id", "listener", "on0", "on1", "sit", "init", "set", "schedule", "on", "on_default", "get", "removeFunction", "id", "parent", "i", "remove_default", "select_default", "select", "name", "id", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "schedule_default", "get", "Transition", "selectAll_default", "select", "name", "id", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "children", "child", "inherit", "get", "k", "l", "schedule_default", "Transition", "Selection", "selection_default", "styleNull", "name", "interpolate", "string00", "string10", "interpolate0", "string0", "styleValue", "string1", "styleRemove", "styleConstant", "value1", "styleFunction", "value", "styleMaybeRemove", "id", "on0", "on1", "listener0", "key", "event", "remove", "schedule", "set", "on", "listener", "style_default", "priority", "i", "interpolateTransformCss", "interpolate_default", "tweenValue", "styleInterpolate", "name", "i", "priority", "t", "styleTween", "value", "i0", "tween", "styleTween_default", "key", "textConstant", "value", "textFunction", "value1", "text_default", "tweenValue", "textInterpolate", "i", "t", "textTween", "value", "t0", "i0", "tween", "textTween_default", "key", "transition_default", "name", "id0", "id1", "newId", "groups", "m", "j", "group", "n", "node", "i", "inherit", "get", "schedule_default", "Transition", "end_default", "on0", "on1", "that", "id", "size", "resolve", "reject", "cancel", "end", "schedule", "set", "on", "id", "Transition", "groups", "parents", "name", "transition", "selection_default", "newId", "selection_prototype", "select_default", "selectAll_default", "filter_default", "merge_default", "transition_default", "on_default", "attr_default", "attrTween_default", "style_default", "styleTween_default", "text_default", "textTween_default", "remove_default", "tween_default", "delay_default", "duration_default", "ease_default", "easeVarying_default", "end_default", "cubicInOut", "defaultTiming", "cubicInOut", "inherit", "node", "id", "timing", "transition_default", "name", "Transition", "newId", "now", "groups", "m", "j", "group", "n", "i", "schedule_default", "selection_default", "interrupt_default", "transition_default", "abs", "max", "min", "number1", "e", "number2", "X", "type", "x", "xy", "Y", "y", "XY", "type", "constant_default", "x", "ZoomEvent", "type", "sourceEvent", "target", "transform", "dispatch", "Transform", "k", "x", "y", "point", "location", "identity", "transform", "node", "nopropagation", "event", "noevent_default", "defaultFilter", "event", "defaultExtent", "e", "defaultTransform", "identity", "defaultWheelDelta", "defaultTouchable", "defaultConstrain", "transform", "extent", "translateExtent", "dx0", "dx1", "dy0", "dy1", "zoom_default", "filter", "constrain", "wheelDelta", "touchable", "scaleExtent", "duration", "interpolate", "listeners", "dispatch_default", "touchstarting", "touchfirst", "touchending", "touchDelay", "wheelDelay", "clickDistance2", "tapDistance", "zoom", "selection", "wheeled", "mousedowned", "dblclicked", "touchstarted", "touchmoved", "touchended", "collection", "point", "schedule", "gesture", "k", "p", "k0", "k1", "t0", "p0", "centroid", "p1", "translate", "scale", "x", "y", "t", "Transform", "transition", "that", "args", "g", "w", "a", "b", "i", "l", "clean", "Gesture", "key", "type", "d", "select_default", "ZoomEvent", "pointer_default", "interrupt_default", "noevent_default", "wheelidled", "currentTarget", "v", "mousemoved", "mouseupped", "x0", "y0", "nodrag_default", "nopropagation", "dx", "dy", "yesdrag", "t1", "touches", "n", "started", "l0", "l1", "dp", "dl", "_", "constant_default", "value", "robotToPixel", "params", "x", "y", "minX", "minY", "sizeY", "resolution", "scale", "px", "py", "pixelToRobot", "px_unscaled", "py_unscaled", "robotX", "robotY", "MM_PER_PIXEL", "VISUAL_BLOCK_SIZE", "localCoordsToRobotCoords", "localPoint", "height", "minX_mm", "minY_mm", "result", "robotCoordsToLocalCoords", "robotPoint", "IMG_CHARGER", "IMG_ROBOT_ORIGINAL", "IMG_GO_TO_PIN", "buildPathString", "x", "y", "lastX", "lastY", "pathString", "thresholdSq", "isJump", "appendPoint", "pathSegments", "currentPoint", "lastPoint", "processPaths", "points", "flags", "converter", "scale", "params", "mainPathD", "backwashPathD", "pureCleanPathD", "mopPathD", "mainPath", "backwashPath", "pureCleanPath", "mopPath", "lastX_main", "lastY_main", "lastX_backwash", "lastY_backwash", "lastX_pure", "lastY_pure", "lastX_mop", "lastY_mop", "lp_main", "lp_backwash", "lp_pure", "lp_mop", "len", "i", "robotPoint", "pt", "flag", "isBackwash", "isPureClean", "isMop", "prevX_main", "prevLP_main", "prevX_backwash", "prevLP_backwash", "prevX_pure", "prevLP_pure", "filterEmpty", "arr", "sub", "Connection", "options", "connOptions", "connCallbacks", "objectsRequired", "resolve", "reject", "connLink", "url", "id", "obj", "state", "err", "offlineTime", "elem", "wait", "isOk", "isSecure", "_auth", "user", "commandName", "timeout", "interval", "_err", "version", "adapterInstance", "command", "message", "result", "design", "search", "params", "res", "IDs", "data", "useCache", "objects", "enumsRes", "enums", "row", "adaptersRes", "channelsRes", "devicesRes", "error", "filename", "isRemote", "mimeType", "adapter", "p", "ts", "items", "i", "j", "children", "len", "name", "VISUAL_BLOCK_SIZE", "UI_CONSTANTS", "OBSTACLE_MAPPING", "MapApplication", "Connection", "select_default", "zoom_default", "getElement", "id", "el", "IMG_GO_TO_PIN", "event", "instance", "connCallbacks", "isConnected", "state", "err", "socketUrl", "startKey", "endKey", "res", "robots", "row", "idParts", "duid", "name", "model", "instanceDuid", "option", "robot", "homeDataId", "states", "homeData", "productMap", "p", "processDeviceList", "list", "d", "e", "mapBase64StateId", "mapDataStateId", "displayWidth", "displayHeight", "mapBase64", "tempCanvas", "tempCtx", "mapMaxX", "pixels", "i", "x", "y", "svgWidth", "svgHeight", "aspectRatio", "contentCenterX", "contentCenterY", "identity", "robotPos", "chargerPos", "params", "scaledChargerSize", "scaledRobotSize", "chargerData", "charger", "IMG_CHARGER", "robotData", "IMG_ROBOT_ORIGINAL", "svgCoords", "angle", "segmentsList", "baseFontSize", "baseStrokeWidth", "textElements", "pathData", "mopData", "scale", "paths", "processPaths", "robotPoint", "scaledMopWidth", "scaledPathWidth", "scaledBackwashWidth", "mainPath", "backwashPath", "pureCleanPath", "mopPath", "obstaclesData", "fixedRadius", "bgRadius", "imageSize", "groups", "enterGroups", "worldPoint", "robotCoordsToLocalCoords", "response", "imageData", "allGroups", "pos", "type", "suffix", "carpetMap", "gridWidth", "gridHeight", "stride", "pathCoords", "offsetX", "offsetY", "px", "col", "invertedRow", "baseX", "baseY", "dx", "dy", "combinedPathData", "pathSelection", "dragHandler", "drag_default", "element", "minBoundX", "minBoundY", "maxBoundX", "maxBoundY", "newX", "newY", "resizeHandler", "newWidth", "newHeight", "parentGroup", "selection", "enterGroup", "mergedSelection", "cleanCountInput", "cleanCount", "rect", "p1", "p2", "coords1", "localCoordsToRobotCoords", "coords2", "transform", "screenCoords", "scaledPinWidth", "scaledPinHeight", "scaledPinYOffset", "centerX", "centerY", "inverted", "number", "param", "newDuid", "centerWorld", "command", "parameters", "initialX", "initialY", "pin", "mouseX", "mouseY", "pointer_default", "scaledW", "scaledH", "scaledOff", "point", "bbox", "displayedWidth", "displayedHeight", "scaleX", "scaleY"]
}
