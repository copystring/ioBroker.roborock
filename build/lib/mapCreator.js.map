{"version":3,"file":"mapCreator.js","sourceRoot":"","sources":["../../src/lib/mapCreator.ts"],"names":[],"mappings":"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","sourcesContent":["import { Roborock } from \"../main\";\r\n\r\nconst { createCanvas, loadImage } = require(\"@napi-rs/canvas\");\r\nconst { Image } = require(\"@napi-rs/canvas\");\r\n\r\n// Farben Ã¤ndern\r\nconst colors = {\r\n\tfloor: \"#23465e\",\r\n\tobstacle: \"#2b2e30\",\r\n\tpath: \"rgba(255,255,255,0.5)\",\r\n\tnewmap: true,\r\n};\r\nconst orgcolors = [\r\n\t\"#C05A41\", // 0\r\n\t\"#4579B5\", // 1\r\n\t\"#017E82\", // 2\r\n\t\"#BD7B00\", // 3\r\n\t\"#434242\", // 4 wall\r\n\t\"#dfdfdf\", // 5 deselected floor\r\n];\r\nconst offset = 60;\r\nconst MATRIX_SIZE = 32; // 32x32 grid\r\n\r\nconst robot =\r\n\t\"data:image/png;base64,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\";\r\nconst robot1 =\r\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAfCAMAAAHGjw8oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADbUExURQAAAICAgICAgICAgICAgICAgHx8fH19fX19fYCAgIGBgX5+foCAgH5+foCAgH9/f39/f35+foCAgH9/f39/f4CAgH5+foGBgYCAgICAgIGBgX9/f39/f35+foCAgH9/f39/f4CAgIODg4eHh4mJiZCQkJycnJ2dnZ6enqCgoKSkpKenp62trbGxsbKysry8vL29vcLCwsXFxcbGxsvLy87OztPT09XV1d/f3+Tk5Ojo6Ozs7O3t7e7u7vHx8fLy8vPz8/X19fb29vf39/j4+Pn5+f39/f7+/v///9yECocAAAAgdFJOUwAGChgcKCkzOT5PVWZnlJmfsLq7wcrS1Nre4OXz+vr7ZhJmqwAAAAlwSFlzAAAXEQAAFxEByibzPwAAAcpJREFUKFNlkolaWkEMhYPggliBFiwWhGOx3AqCsggI4lZt8/5P5ElmuEX5P5hMMjeZJBMRafCvUKnbIqpcioci96owTQWqP0QKC54nImUAyr9k7VD1me4YvibHlJKpVUzQhR+dmdTRSDUvdHh8NK8nhqUVch7cITmXA3rtYDmH+3OL4XI1T+BhJUcXczQxOBXJuve0/daeUr5A6g9muJzo5NI2kPKtyRSGBStKQZ5RC1hENWn6NSRTrDUqLD/lsNKoFTNRETlGMn9dDoGdoDcT1fHPi7EuUDD9dMBw4+6vMQVyInnPXDsdW+8tjWfbYTbzg/OstcagzSlb0+wL/6k+1KPhCrj6YFhzS5eXuHcYNF4bsGtDYhFLTOSMqTsx9e3iyKfynb1SK+RqtEq70RzZPwEGKwv7G0OK1QA42Y+HIgct9P3WWG9ItI/mQTgvoeuWAMdlTRclO/+Km2jwlhDvinGNbyJH6EWV84AJ1wl8JowejqTqTmv+0GqDmVLlg/wLX5Mp2rO3WRs2Zs5fznAVd1EzRh10OONr7hhhM4ctevhiVVxHdYsbq+JzHzaIfdjs5CZ9tGInSfoWEXuL7//fwtn9+Jp7wSryDjBFqnOGeuUxAAAAAElFTkSuQmCC\";\r\nconst charger =\r\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAdVBMVEUAAAA44Yo44Yo44Yo44Yo44Yo44Yo44Yo44Yp26q844Yr///9767Kv89DG9t2g8Md26q5C44/5/vvz/fjY+ei19NNV5ZtJ45T2/fmY78KP7r1v6atq6Kjs/PPi+u7e+uvM9+Gb8MSS7r+H7bhm6KVh56JZ5p3ZkKITAAAACnRSTlMABTr188xpJ4aepd0A4wAAANZJREFUKM9VklmCgzAMQwkQYCSmLKWl2+zL/Y9YcIUL7wvkJHIUJyKkVcyy+JIGCZILGF//QLEqlTmMdsBEXi56igfH/QVGqvXSu49+1KftCbn+dtxB5LOPfNGQNRaKaQNkTJ46OMGczZg8wJB/9TB+J3nFkyqJMp44vBrnWYhJJmOn/5uVzAotV/zACnbUtTbOpHcQzVx8kxw6mavdpYP90dsNcE5k6xd8RoIb2Xgk6xAbfm5C9NiHtxGiXD/U2P96UJunrS/LOeV2GG4wfBi241P5+NwBnAEUFx9FUdUAAAAASUVORK5CYII=\";\r\nconst tank =\r\n\t\"data:image/png;base64,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\";\r\nconst spaceship =\r\n\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAFMklEQVRYR+2YfUxVZRjAf+cAfiAOHZaIFxXD0g2V3LVipZFuOrRcm6KBHw0b/GHERpFGfoQokcV0M6x5mbiKyFK31NRls666RmUrP0gtUVQU8IP8AEGBe297zznXe+71fsBB+4v3D8Z97/M85/c+X+9zj8SDW7eBUJ25XsDdrpqXumpAp29jSoZMTDxsXCS2+wJNXbX/YAFTVsqMeg5WTO4GNBIZG90eNOI3l063B434zwK8oCnGkrISXRWfARzAT0CGEeNCp6ttppHIYWFExYIkQc4mCOsHeclw6wY01MC/taIXip5oaHUdMPmtMBa85/7w+jq4egX2bQRrWTegv9A00u1BQ6l7T6nbgx2tYiGXCsia7yqAKqAzHowFEjR9O1Cu9Um/Mewo4ETgQJAsYXc4cDi4CER3ErBGkjDJkoTNLvo3zwMHA2VYRwGFMaujLonk9D/Z9l29IcBZL0aatpY8iTRor+BKFId+oIDj48Opqm7m+s02Q4D9w0NMsTGhHD5y8+EAYhoJDZegpdEQIL37mogYDBdPPSTA9w9B+XKotBoDjEs0kboK3p3QacBSYIEuHyZ5JLCSg/gDnPkotLeqJuRgyN/veRfX4B9QFOKPOobPgYXOIjk8tFc/85LoZ8ms2iMqdSGwWSfsH3D+CpgRzkcrRioqb+efgoKD8INFPywEAkyTJam0OHYaa2p+5vydG78D4+8BxodFmnePnsuQX9Zhc9gDAV4CHgOuKXexBlhVIc4BsQkHPAEHAGeISxzsJ8RpQZJceuGZbKYf/5IjTfXugIBZ5zHvgJZTsHkJVOxwic5dCnMWKx50A7SchN2fwo71Ltn4qTB7ma8cTANEqjmXB2DUE2bS18OqaWC3eQfcdUtVbm50mQnti+jc9wHuvKkOsXrZM2dVPe9FkoYcVMryPVCSBbV/ewCaRppZVALLEvWAInHF64zRwIc4AZ14l8/DpdMqYN5MNq0TYvBa9nHI264CDh4BA4eqGseP6gEXix1xXK0gVcDVVvgkXbSigIBlQKvyELFCesL2K7oIALOjoKVJERGM92QdDtde7zD4plbVa9Ve1aREu/5XfrbQA5hnDHBLDfQJdwdzfkoeRG56JAW5jyNH7QWL5qGMsdhrk1ha+A+FJfWwtc5d32aDE5VwpwnykwwBVgLi2FMIADh8oIMRMaF8b73mBjg1cQCnq5s5e1nqCOA+IAo5KM53iEeMM7PWCgWpcP6EeuLgECj+FWTnlOXhyOIsOKYNJELmYzGFAW8kgF1MVMCYiZCpq2S9CSGT+TS0t6m7EdGQutpHDjoBvQfz/9mtOg0tzT4AJcmseEy/JBm+vgjBIoe9rJxJcPaY9oUEX4gZFpgvZlMl+WH4GCjS32CauMhD4bnUIeDQvK1UGtDeLvTdqljcCi97IAQBawLl4ISeA5jcP4a8c1a3HMwblsj+69UcunutIzm4BLB5PP9bcfv4G1iFO1spP+e7iueYyIqII3fIBAZVFLkB1iXkUHjhEOsbKtUo6JdSxX+pVbx6uvhGhEhLRI8g+kmuYF9KPnWKtILJEf29U0s4Q8T1vhVo5I8QLdpDyxLZI+yl/WNf5ak/LNy2tYkS/UBpSzlbVNGiV8TfKOCdPkEhWb+Ny2Dy0c+ob23a5eVFkvBcg6/jBAL0prf1kZA+s8pHzWRG5Ve02NsKgaWAnXkFqnyZ+Kj8AizoLYfk7oxLIfXkdq623d4GJHfGt0YA1wLZuodkAhsUQNfbMlGOAvB1oFgnuw54szOA/wGAoJRHR2vq3wAAAABJRU5ErkJggg==\";\r\nconst robot2 =\r\n\t\"data:image/png;base64,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\";\r\nconst originalRobot =\r\n\t\"data:image/png;base64,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\";\r\nconst go_to_pin =\r\n\t\"data:image/png;base64,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AAAOVWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDplODk0ZjlkMy1iNjZlLTQ1ODQtODY0MS0zMGI5MTk2ZDM2NTQiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjM1MWM4ODEtZmQwYi00MjlkLWExZDMtNjkwOTFiNWE1YzYxIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YTZlMmNkZTctOGZhZC00ZDVhLWI5N2UtY2VhZTc0NWNmYjVmIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iV2luZG93cyIKICAgR0lNUDpUaW1lU3RhbXA9IjE2NzczNjQ5MzQzNDYyMjgiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjM6MDI6MjVUMjM6NDI6MTIrMDE6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIzOjAyOjI1VDIzOjQyOjEyKzAxOjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjcxYWIyOGQtODExMy00NWRiLWJkMjQtNGJkOTJjZjk5NThmIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTAyLTI1VDIzOjI1OjIzIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MjZiNWE2LTgwZjctNDU2My1hY2UwLThjMTMzYjQyZmZhNCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMy0wMi0yNVQyMzo0MjoxNCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6W+nyxAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5wIZFioOADz0AgAAAyVJREFUaN7tmr9uE0EQhz8ncmKSwglQkMSCIg0URMgFFUUkZARyj1DeIhQuIsQj0LqnJHkBK6FJ5QK5IIpBsuhiWVEiOY7y3/INxaybBOE9+27vbPknjWSfd2fmu/Xt7c4djDXWWGMNkRLhupcJ4CnwHHgNrADLwLxp0AT+AD+B78Ae8BsS3pCdR5kCeQPyA+QExAORHuaZtj9M36lhgX0FsmMB2Mt21Fd8QVMgGyA3AcB27cb4TMUNdgbkG0gnQNiudYzvmbjA3gPZDAH0tm1qrGhhJ0C+Wk5Kg5pnYk1ECfwB5NoBbNeuNWY0sPdBjhzCdu1IY7uFTYAUI4DtWlFzcAf8CKQeIXBdc/CvfieAt8Cinw6ZDBQKUC5Do6FWLuuxTMZ3/EWTg7MRrvgZkXxepFIR8Ty5I8/T3/J536NccQW7CHJpm9jKikitJj1Vq2lbH8CXmkv4wDk/y8dSSaxVKvleduZcXMNPgEmbhrkcZLP2jrNZ7WOpSZNL6MBztvvopSVIp+0dp9Pax8defs4F8LQtcCoFyaS942RS+/gAnnYBfAaITcOrK2i37R2329rHdjIxuYQOfAJYlWDqdWi17B23WtrHUp7JJfRZejVGs/SqC+CHIBcxuA9faC5uFh97MVhp7blcWq77XfBnMiKFgki5LNJoqJXLeiyT6WsDse4SeBnkPMLd0rnm4G63dAhUIyy1VE0OroATZ8BWhMBbJgenVY95kNMI/s6nGrs/DVABTDSBYgSjWzSxIynkPQNpOhzdpsbsXwPWeBO/gJLDM1wyMSMtxi+AtByMbktjDaYgqviH5lqWMM+qiXFIPCQLIMchju5xEKMbNPRaiMBrxE8yC7IbAuyu+o6lJAvSDhC2rT5jLfkU0IPxjvqKvWQOZD8A4H31NRSSFwNuH8/Vx9BIEuZlFK/PJ/0bjh+HBgI91eesvTtE72jdgX4McuAD9kD7DLXkvWVZ90bbjoTkc49bVUfbjIxkFmT7P8DbMV5N9Q39AKT6D9iq/jaSkpe39s4tPTbSknfmdYVL/exWEdzcZQL4aL58GcKXwccaa6yx3Okve0d25MUPGTcAAAAASUVORK5CYII=\";\r\n\r\n//const ctximg = canvasImg.getContext('2d');\r\n\r\nlet img = new Image(); // Create a new Image\r\n\r\nlet img_charger = new Image();\r\n\r\nconst obstacleTitles = {\r\n\t0: \"Wire\",\r\n\t1: \"Pet waste\",\r\n\t2: \"Footwear\",\r\n\t3: \"Pedestal\",\r\n\t4: \"Pedestal\",\r\n\t5: \"Power strip\",\r\n\t9: \"Scale\",\r\n\t10: \"Fabric\",\r\n\t18: \"Dustpan\",\r\n\t25: \"Dustpan\",\r\n\t26: \"Bar\",\r\n\t27: \"Bar\",\r\n};\r\n\r\ninterface CanvasMapOptions {\r\n\tselectedMap?: any;\r\n\tmappedRooms?: any;\r\n\toptions?: any;\r\n}\r\n\r\nexport class MapCreator {\r\n\tadapter: Roborock;\r\n\tadjacencyMatrix: number[][];\r\n\r\n\tconstructor(adapter: Roborock) {\r\n\t\tthis.adapter = adapter;\r\n\t\tthis.adjacencyMatrix = new Array(1024).fill(0); // Matrix, initial leer\r\n\t}\r\n\r\n\tgetX(dimensions, px) {\r\n\t\treturn (px * this.adapter.config.map_scale) % dimensions.width;\r\n\t}\r\n\tgetY(dimensions, px) {\r\n\t\treturn dimensions.height - Math.floor(px / (dimensions.width / this.adapter.config.map_scale)) * this.adapter.config.map_scale - this.adapter.config.map_scale;\r\n\t}\r\n\r\n\trobotXtoPixelX(image, robotCoord) {\r\n\t\treturn (robotCoord - image.position.left) * this.adapter.config.map_scale + 1;\r\n\t}\r\n\trobotYtoPixelY(image, robotCoord) {\r\n\t\treturn (image.dimensions.height / this.adapter.config.map_scale + image.position.top - robotCoord) * this.adapter.config.map_scale - 1;\r\n\t}\r\n\r\n\trotateCanvas(img, angleInDegrees) {\r\n\t\tconst canvasImg = createCanvas(img.width, img.height);\r\n\t\tconst ctx = canvasImg.getContext(\"2d\");\r\n\t\tconst angleOffset = 90;\r\n\t\tlet angleInRadians = ((angleInDegrees - angleOffset) * Math.PI) / 180;\r\n\t\tangleInRadians = ((angleInRadians + Math.PI) % (2 * Math.PI)) - Math.PI; // Normalize angle to -Ï to Ï\r\n\r\n\t\tctx.translate(img.width / 2, img.height / 2);\r\n\t\tctx.rotate(-angleInRadians);\r\n\t\tctx.translate(-img.width / 2, -img.height / 2);\r\n\t\tctx.drawImage(img, 0, 0);\r\n\r\n\t\treturn canvasImg;\r\n\t}\r\n\r\n\tdrawLineBresenham(imageData, x1, y1, x2, y2) {\r\n\t\tconst pixels = imageData.data;\r\n\r\n\t\tconst dx = Math.abs(x2 - x1);\r\n\t\tconst dy = Math.abs(y2 - y1);\r\n\t\tconst sx = x1 < x2 ? 1 : -1;\r\n\t\tconst sy = y1 < y2 ? 1 : -1;\r\n\t\tlet err = dx - dy;\r\n\r\n\t\tfor (;;) {\r\n\t\t\t// Setze Pixel im ImageData\r\n\t\t\tif (x1 >= 0 && x1 < imageData.width && y1 >= 0 && y1 < imageData.height) {\r\n\t\t\t\t// handle out of bounds. lineto would already do this but we need to set pixels directly\r\n\t\t\t\tconst index = (x1 + y1 * imageData.width) * 4;\r\n\t\t\t\tpixels[index] = 128; // r\r\n\t\t\t\tpixels[index + 1] = 128; // g\r\n\t\t\t\tpixels[index + 2] = 128; // b\r\n\t\t\t\tpixels[index + 3] = 128; // a\r\n\t\t\t}\r\n\r\n\t\t\tif (x1 === x2 && y1 === y2) break;\r\n\t\t\tconst e2 = 2 * err;\r\n\t\t\tif (e2 > -dy) {\r\n\t\t\t\terr -= dy;\r\n\t\t\t\tx1 += sx;\r\n\t\t\t}\r\n\t\t\tif (e2 < dx) {\r\n\t\t\t\terr += dx;\r\n\t\t\t\ty1 += sy;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Builds an adjacency matrix indicating which segments (rooms) touch each other.\r\n\t * The matrix is 32x32 because segment IDs range from 0 to 31.\r\n\t * It only checks neighbors above and to the left to avoid double counting.\r\n\t *\r\n\t * @param {number[]} segmentPixels - Array of pixels with embedded segment IDs.\r\n\t * @param {number} width - Width of the map in pixels.\r\n\t * @param {number} height - Height of the map in pixels.\r\n\t * @returns {number[][]} - A 32x32 matrix where matrix[a][b] === 1 means segment a touches segment b.\r\n\t */\r\n\tbuildAdjacencyMatrix(segmentPixels, width, height) {\r\n\t\t// Initialize 32x32 matrix filled with zeros\r\n\t\tconst matrix = Array.from({ length: MATRIX_SIZE }, () => Array(MATRIX_SIZE).fill(0));\r\n\t\t// Create a map from pixel index to segment number, default -1 (no segment)\r\n\t\tconst segMap = new Array(width * height).fill(-1);\r\n\r\n\t\t// Fill segMap with segment numbers extracted from pixels\r\n\t\tfor (const px of segmentPixels) {\r\n\t\t\tconst pixelIndex = px & 0x1fffff; // pixel index (lower 21 bits)\r\n\t\t\tconst segnum = (px >> 21) & 0x1f; // segment id (next 5 bits)\r\n\t\t\tsegMap[pixelIndex] = segnum;\r\n\t\t}\r\n\r\n\t\t// Check only the pixel above and to the left for adjacency\r\n\t\tfor (let i = 0; i < segMap.length; i++) {\r\n\t\t\tconst segA = segMap[i];\r\n\t\t\tif (segA < 0) continue; // no segment here\r\n\t\t\tconst x = i % width;\r\n\t\t\tconst y = Math.floor(i / width);\r\n\r\n\t\t\t// Check pixel above\r\n\t\t\tif (y > 0) {\r\n\t\t\t\tconst idxTop = i - width;\r\n\t\t\t\tconst segB = segMap[idxTop];\r\n\t\t\t\tif (segB >= 0 && segA !== segB) {\r\n\t\t\t\t\tmatrix[segA][segB] = 1;\r\n\t\t\t\t\tmatrix[segB][segA] = 1; // adjacency is symmetric\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Check pixel to the left\r\n\t\t\tif (x > 0) {\r\n\t\t\t\tconst idxLeft = i - 1;\r\n\t\t\t\tconst segB = segMap[idxLeft];\r\n\t\t\t\tif (segB >= 0 && segA !== segB) {\r\n\t\t\t\t\tmatrix[segA][segB] = 1;\r\n\t\t\t\t\tmatrix[segB][segA] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn matrix;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the room name for a given segment number by looking up mappings.\r\n\t *\r\n\t * @param {number|string} segnum           The segment number to find the room name for.\r\n\t * @param {Array} mappedRooms               Array of mappedRooms entries, e.g., [[segmentNum, \"roomIdString\", mappedIndex], ...]\r\n\t * @param {Array} roomIDs                   Array of room objects, e.g., [{id: number, name: string}, ...]\r\n\t * @returns {string}                       The found room name, or \"Room X\" as a fallback.\r\n\t */\r\n\tgetRoomNameBySegment(segnum, mappedRooms, roomIDs) {\r\n\t\tif (!Array.isArray(mappedRooms) || !Array.isArray(roomIDs)) return \"Room \" + segnum;\r\n\r\n\t\t// Find the mapping entry for the given segment number\r\n\t\tconst mapping = mappedRooms.find((entry) => entry[0] == segnum);\r\n\t\tif (!mapping) return \"Room \" + segnum;\r\n\r\n\t\tconst [, roomIdString, mappedIndex] = mapping;\r\n\t\tconst numId = Number(roomIdString);\r\n\r\n\t\t// 1. Try to find room by roomId\r\n\t\tconst room = roomIDs.find((r) => r.id === numId);\r\n\t\tif (room && room.name) return room.name;\r\n\r\n\t\t// 2. Try to find room by mapped index (0-based)\r\n\t\tif (typeof mappedIndex === \"number\") {\r\n\t\t\tif (roomIDs[mappedIndex] && roomIDs[mappedIndex].name) return roomIDs[mappedIndex].name;\r\n\t\t\tif (roomIDs[mappedIndex - 1] && roomIDs[mappedIndex - 1].name) return roomIDs[mappedIndex - 1].name;\r\n\t\t}\r\n\r\n\t\treturn \"Room \" + segnum;\r\n\t}\r\n\r\n\thexToRGBA(hex, alpha = 1) {\r\n\t\tconst r = parseInt(hex.slice(1, 3), 16);\r\n\t\tconst g = parseInt(hex.slice(3, 5), 16);\r\n\t\tconst b = parseInt(hex.slice(5, 7), 16);\r\n\t\treturn `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n\t}\r\n\r\n\tasync canvasMap(mapdata: any, params: CanvasMapOptions = {}) {\r\n\t\tconst {\r\n\t\t\tselectedMap = null,\r\n\t\t\tmappedRooms = null,\r\n\t\t\toptions = {},\r\n\t\t} = params;\r\n\r\n\t\tif (options) {\r\n\t\t\tcolors.floor = options.FLOORCOLOR;\r\n\t\t\tcolors.obstacle = options.WALLCOLOR;\r\n\t\t\tcolors.path = options.PATHCOLOR;\r\n\t\t\tcolors.newmap = options && options.newmap ? options.newmap : true;\r\n\t\t\tif (options.ROBOT === \"robot\") {\r\n\t\t\t\timg = await loadImage(robot);\r\n\t\t\t} else if (options.ROBOT === \"robot1\") {\r\n\t\t\t\timg = await loadImage(robot1);\r\n\t\t\t} else if (options.ROBOT === \"tank\") {\r\n\t\t\t\timg = await loadImage(tank);\r\n\t\t\t} else if (options.ROBOT === \"spaceship\") {\r\n\t\t\t\timg = await loadImage(spaceship);\r\n\t\t\t} else if (options.ROBOT === \"robot2\") {\r\n\t\t\t\timg = await loadImage(robot2);\r\n\t\t\t} else if (options.ROBOT === \"originalRobot\") {\r\n\t\t\t\timg = await loadImage(originalRobot);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\timg = await loadImage(originalRobot);\r\n\t\t}\r\n\t\timg_charger = await loadImage(charger);\r\n\r\n\t\tlet maxtop = 0;\r\n\t\tlet maxleft = 0;\r\n\t\tlet minleft = 0;\r\n\t\tlet mintop = 0;\r\n\r\n\t\tmapdata.IMAGE.dimensions.width = mapdata.IMAGE.dimensions.width * this.adapter.config.map_scale;\r\n\t\tmapdata.IMAGE.dimensions.height = mapdata.IMAGE.dimensions.height * this.adapter.config.map_scale;\r\n\r\n\t\tif (mapdata.IMAGE.dimensions.height > 0 && mapdata.IMAGE.dimensions.width > 0) {\r\n\t\t\tconst canvas = createCanvas(mapdata.IMAGE.dimensions.width, mapdata.IMAGE.dimensions.height);\r\n\t\t\tconst ctx = canvas.getContext(\"2d\");\r\n\r\n\t\t\tif (mapdata.IMAGE.pixels.floor && mapdata.IMAGE.pixels.floor.length !== 0) {\r\n\t\t\t\tif (typeof mapdata.IMAGE.pixels.floor[0] === \"number\") {\r\n\t\t\t\t\t// init min\r\n\t\t\t\t\tminleft = mapdata.IMAGE.pixels.floor[0] % mapdata.IMAGE.dimensions.width;\r\n\t\t\t\t\tmintop = mapdata.IMAGE.dimensions.height - 1 - Math.floor(mapdata.IMAGE.pixels.floor[0] / mapdata.IMAGE.dimensions.width);\r\n\r\n\t\t\t\t\t[\"floor\", \"obstacle\"].forEach((key) => {\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tmapdata.IMAGE.pixels[key].forEach((px) => {\r\n\t\t\t\t\t\t\tif (key === \"obstacle\") {\r\n\t\t\t\t\t\t\t\tctx.fillStyle = colors.newmap ? orgcolors[4] : colors.obstacle;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tctx.fillStyle = colors.newmap ? orgcolors[5] : colors.floor;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//ctx.fillStyle = colors[key];\r\n\t\t\t\t\t\t\tctx.rect(this.getX(mapdata.IMAGE.dimensions, px), this.getY(mapdata.IMAGE.dimensions, px), this.adapter.config.map_scale, this.adapter.config.map_scale);\r\n\r\n\t\t\t\t\t\t\tmaxtop = Math.max(maxtop, this.getY(mapdata.IMAGE.dimensions, px));\r\n\t\t\t\t\t\t\tmaxleft = Math.max(maxleft, this.getX(mapdata.IMAGE.dimensions, px));\r\n\t\t\t\t\t\t\tminleft = Math.min(minleft, this.getX(mapdata.IMAGE.dimensions, px));\r\n\t\t\t\t\t\t\tmintop = Math.min(mintop, this.getY(mapdata.IMAGE.dimensions, px));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.fill();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst segmentsData = {};\r\n\t\t\tconst assignedColors: string[] = [];\r\n\t\t\tif (mapdata.IMAGE.pixels.segments && !mapdata.CURRENTLY_CLEANED_BLOCKS && colors.newmap) {\r\n\t\t\t\tconst availableColors = [...orgcolors.slice(0, 4)]; // Exclude reserved colors\r\n\r\n\t\t\t\t// --- Collect segment data ---\r\n\t\t\t\tmapdata.IMAGE.pixels.segments.forEach((px) => {\r\n\t\t\t\t\tconst segnum = px >> 21;\r\n\t\t\t\t\tconst x = this.getX(mapdata.IMAGE.dimensions, px & 0xfffff);\r\n\t\t\t\t\tconst y = this.getY(mapdata.IMAGE.dimensions, px & 0xfffff);\r\n\r\n\t\t\t\t\tif (!segmentsData[segnum]) {\r\n\t\t\t\t\t\tsegmentsData[segnum] = { points: [], minX: x, maxX: x, minY: y, maxY: y };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst segment = segmentsData[segnum];\r\n\t\t\t\t\tsegment.points.push({ x, y });\r\n\t\t\t\t\tsegment.minX = Math.min(segment.minX, x);\r\n\t\t\t\t\tsegment.maxX = Math.max(segment.maxX, x);\r\n\t\t\t\t\tsegment.minY = Math.min(segment.minY, y);\r\n\t\t\t\t\tsegment.maxY = Math.max(segment.maxY, y);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst segmentNums = Object.keys(segmentsData)\r\n\t\t\t\t\t.map(Number)\r\n\t\t\t\t\t.filter((n) => !isNaN(n));\r\n\r\n\t\t\t\t// Build adjacency matrix for the segments based on pixel data\r\n\t\t\t\tconst adjacencyMatrix = this.buildAdjacencyMatrix(mapdata.IMAGE.pixels.segments, mapdata.IMAGE.dimensions.width, mapdata.IMAGE.dimensions.height);\r\n\r\n\t\t\t\t// Count the number of neighbors for each segment\r\n\t\t\t\tconst neighborCounts = segmentNums.map((segnum) => {\r\n\t\t\t\t\tconst neighbors = segmentNums.filter((otherSegnum) => segnum !== otherSegnum && adjacencyMatrix[segnum][otherSegnum]);\r\n\t\t\t\t\treturn { segnum, count: neighbors.length };\r\n\t\t\t\t});\r\n\t\t\t\tneighborCounts.sort((a, b) => b.count - a.count);\r\n\r\n\t\t\t\t// --- Dynamically reserve special colors ---\r\n\t\t\t\tconst maxAdjacentRoom = neighborCounts[0].segnum;\r\n\t\t\t\tconst largestSegment = mapdata.IMAGE.segments.largestSegment;\r\n\r\n\t\t\t\t// Determine reserved colors:\r\n\t\t\t\tlet reservedColors: string[] = [];\r\n\t\t\t\tif (maxAdjacentRoom === largestSegment) {\r\n\t\t\t\t\t// Reserve only one color, rest available for normal rooms\r\n\t\t\t\t\tassignedColors[maxAdjacentRoom] = orgcolors[1];\r\n\t\t\t\t\treservedColors = [orgcolors[1]];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Reserve two colors\r\n\t\t\t\t\tassignedColors[maxAdjacentRoom] = orgcolors[0];\r\n\t\t\t\t\tassignedColors[largestSegment] = orgcolors[1];\r\n\t\t\t\t\treservedColors = [orgcolors[0], orgcolors[1]];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// List of available colors for other rooms:\r\n\t\t\t\tconst restColors = availableColors.filter((c) => !reservedColors.includes(c));\r\n\r\n\t\t\t\t// --- Assign colors to all remaining segments alternately ---\r\n\t\t\t\tlet colorIdx = 0;\r\n\t\t\t\tfor (const { segnum } of neighborCounts) {\r\n\t\t\t\t\tif (assignedColors[segnum]) continue;\r\n\t\t\t\t\tassignedColors[segnum] = restColors[colorIdx % restColors.length];\r\n\t\t\t\t\tcolorIdx++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// --- Drawing as usual ---\r\n\t\t\t\tObject.keys(segmentsData).forEach((segnum) => {\r\n\t\t\t\t\tconst segment = segmentsData[segnum];\r\n\t\t\t\t\tctx.fillStyle = assignedColors[segnum] || \"#CCCCCC\";\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tsegment.points.forEach((point) => {\r\n\t\t\t\t\t\tctx.rect(point.x, point.y, this.adapter.config.map_scale, this.adapter.config.map_scale);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t});\r\n\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\tfor (const { segnum } of neighborCounts) {\r\n\t\t\t\t\tif (assignedColors[segnum]) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst assignedColor = restColors[colorIdx % restColors.length];\r\n\t\t\t\t\tassignedColors[segnum] = assignedColor;\r\n\t\t\t\t\tcolorIdx++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (mapdata.CURRENTLY_CLEANED_BLOCKS && colors.newmap) {\r\n\t\t\t\tlet segnum, lastcolor;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tmapdata.IMAGE.pixels.segments.forEach((px) => {\r\n\t\t\t\t\tsegnum = px >> 21;\r\n\t\t\t\t\tif (mapdata.CURRENTLY_CLEANED_BLOCKS.includes(segnum)) {\r\n\t\t\t\t\t\tif (segnum !== lastcolor) {\r\n\t\t\t\t\t\t\tctx.fill();\r\n\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\tctx.fillStyle = orgcolors[segnum];\r\n\t\t\t\t\t\t\tlastcolor = segnum;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpx = px & 0xfffff;\r\n\t\t\t\t\t\tctx.rect(this.getX(mapdata.IMAGE.dimensions, px), this.getY(mapdata.IMAGE.dimensions, px), this.adapter.config.map_scale, this.adapter.config.map_scale);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\r\n\t\t\t// Zeichne Zonen active Zonen\r\n\t\t\tif (mapdata.CURRENTLY_CLEANED_ZONES) {\r\n\t\t\t\tif (mapdata.CURRENTLY_CLEANED_ZONES[0]) {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tmapdata.CURRENTLY_CLEANED_ZONES.forEach((coord) => {\r\n\t\t\t\t\t\tctx.fillStyle = \"rgba(46,139,87,0.1)\";\r\n\t\t\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50),\r\n\t\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50),\r\n\t\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, coord[2] / 50) - this.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50),\r\n\t\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, coord[3] / 50) - this.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.strokeStyle = \"#2e8b57\";\r\n\t\t\t\t\t\tctx.lineWidth = 4;\r\n\t\t\t\t\t\tctx.strokeRect(\r\n\t\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50),\r\n\t\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50),\r\n\t\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, coord[2] / 50) - this.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50),\r\n\t\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, coord[3] / 50) - this.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Zeichne Teppich\r\n\t\t\tif (mapdata.CARPET_MAP) {\r\n\t\t\t\tconst offset = 8 * this.adapter.config.map_scale;\r\n\t\t\t\tctx.fillStyle = \"rgba(0,0,0,0.5)\";\r\n\r\n\t\t\t\tconst imageData = ctx.getImageData(0, 0, mapdata.IMAGE.dimensions.width, mapdata.IMAGE.dimensions.height);\r\n\t\t\t\tmapdata.CARPET_MAP.forEach((px) => {\r\n\t\t\t\t\tconst x2 = this.getX(mapdata.IMAGE.dimensions, px) - offset;\r\n\t\t\t\t\tconst y1 = this.getY(mapdata.IMAGE.dimensions, px);\r\n\t\t\t\t\tconst x1 = x2 + this.adapter.config.map_scale - 1;\r\n\t\t\t\t\tconst y2 = y1 + this.adapter.config.map_scale - 1;\r\n\r\n\t\t\t\t\tthis.drawLineBresenham(imageData, x1, y1, x2, y2);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Zeichne das ganze ImageData auf einmal\r\n\t\t\t\tctx.putImageData(imageData, 0, 0);\r\n\t\t\t}\r\n\r\n\t\t\t// Male den Wischpfad\r\n\t\t\tif (mapdata.PATH && mapdata.MOP_PATH) {\r\n\t\t\t\tconst mopOffset = -12;\r\n\t\t\t\tconst points = mapdata.PATH.points;\r\n\t\t\t\tconst mops = mapdata.MOP_PATH;\r\n\t\t\t\tconst scale = this.adapter.config.map_scale;\r\n\t\t\t\tctx.lineWidth = 7 * scale;\r\n\t\t\t\tctx.lineCap = \"round\";\r\n\t\t\t\tctx.lineJoin = \"round\";\r\n\t\t\t\tctx.strokeStyle = \"rgba(255,255,255,0.18)\"; // transparent, Roborock-like\r\n\r\n\t\t\t\tlet lastIdx = -1;\r\n\t\t\t\tlet segmentStarted = false;\r\n\r\n\t\t\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\t\t\tconst mopIdx = i + mopOffset;\r\n\t\t\t\t\tif (mops?.[mopIdx] & 1) {\r\n\t\t\t\t\t\tconst x = this.robotXtoPixelX(mapdata.IMAGE, points[i][0] / 50);\r\n\t\t\t\t\t\tconst y = this.robotYtoPixelY(mapdata.IMAGE, points[i][1] / 50);\r\n\r\n\t\t\t\t\t\tif (!segmentStarted) {\r\n\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\tctx.moveTo(x, y);\r\n\t\t\t\t\t\t\tsegmentStarted = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst last = points[lastIdx];\r\n\t\t\t\t\t\t\tconst lx = this.robotXtoPixelX(mapdata.IMAGE, last[0] / 50);\r\n\t\t\t\t\t\t\tconst ly = this.robotYtoPixelY(mapdata.IMAGE, last[1] / 50);\r\n\t\t\t\t\t\t\tconst dx = x - lx;\r\n\t\t\t\t\t\t\tconst dy = y - ly;\r\n\t\t\t\t\t\t\tconst dist2 = dx * dx + dy * dy;\r\n\t\t\t\t\t\t\tconst threshold = 10 * scale;\r\n\t\t\t\t\t\t\tif (dist2 > threshold * threshold || i !== lastIdx + 1) {\r\n\t\t\t\t\t\t\t\t// Start new segment\r\n\t\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\t\tctx.moveTo(x, y);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastIdx = i;\r\n\t\t\t\t\t} else if (segmentStarted) {\r\n\t\t\t\t\t\t// End of current segment: only stroke here!\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\tsegmentStarted = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Stroke in case the last segment runs until the end\r\n\t\t\t\tif (segmentStarted) ctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t\t// Male den Pfad\r\n\t\t\tif (mapdata.PATH?.points?.length) {\r\n\t\t\t\tctx.fillStyle = colors.path;\r\n\t\t\t\tctx.lineWidth = this.adapter.config.map_scale / 2;\r\n\t\t\t\tctx.strokeStyle = colors.path;\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet [cold1, cold2] = [this.robotXtoPixelX(mapdata.IMAGE, mapdata.PATH.points[0][0] / 50), this.robotYtoPixelY(mapdata.IMAGE, mapdata.PATH.points[0][1] / 50)];\r\n\t\t\t\tctx.fillRect(cold1, cold2, (1 * this.adapter.config.map_scale) / 2, (1 * this.adapter.config.map_scale) / 2);\r\n\r\n\t\t\t\tmapdata.PATH.points.slice(1).forEach((coord) => {\r\n\t\t\t\t\tctx.moveTo(cold1, cold2);\r\n\t\t\t\t\tcold1 = this.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50);\r\n\t\t\t\t\tcold2 = this.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50);\r\n\t\t\t\t\tctx.lineTo(cold1, cold2);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.closePath();\r\n\t\t\t}\r\n\r\n\t\t\t// Male geplanten Pfad\r\n\t\t\tif (mapdata.GOTO_PREDICTED_PATH) {\r\n\t\t\t\tif (mapdata.GOTO_PREDICTED_PATH.points && mapdata.GOTO_PREDICTED_PATH.points.length !== 0) {\r\n\t\t\t\t\tlet cold1, cold2;\r\n\t\t\t\t\tctx.lineWidth = (3 * this.adapter.config.map_scale) / 2;\r\n\t\t\t\t\tctx.strokeStyle = \"rgba(255, 255, 255, 1)\";\r\n\t\t\t\t\tctx.setLineDash([3 * this.adapter.config.map_scale, 3 * this.adapter.config.map_scale]);\r\n\t\t\t\t\tctx.lineCap = \"round\";\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tmapdata.GOTO_PREDICTED_PATH.points.forEach((coord, index) => {\r\n\t\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\t\tcold1 = this.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50);\r\n\t\t\t\t\t\t\tcold2 = this.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50);\r\n\t\t\t\t\t\t\tctx.fillStyle = \"rgba(255, 255, 255, 1)\";\r\n\t\t\t\t\t\t\tctx.fillRect(cold1, cold2, (1 * this.adapter.config.map_scale) / 2, (1 * this.adapter.config.map_scale) / 2);\r\n\t\t\t\t\t\t\tctx.moveTo(cold1, cold2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst newCold1 = this.robotXtoPixelX(mapdata.IMAGE, coord[0] / 50);\r\n\t\t\t\t\t\t\tconst newCold2 = this.robotYtoPixelY(mapdata.IMAGE, coord[1] / 50);\r\n\t\t\t\t\t\t\tif (cold1 !== newCold1 || cold2 !== newCold2) {\r\n\t\t\t\t\t\t\t\tctx.lineTo(newCold1, newCold2);\r\n\t\t\t\t\t\t\t\tcold1 = newCold1;\r\n\t\t\t\t\t\t\t\tcold2 = newCold2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.setLineDash([]);\r\n\t\t\t\t\tctx.lineCap = \"butt\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (mapdata.FORBIDDEN_ZONES) {\r\n\t\t\t\tmapdata.FORBIDDEN_ZONES.forEach((zone) => {\r\n\t\t\t\t\tconst forbiddenMinX = Math.min(zone[0], zone[2], zone[4], zone[6]);\r\n\t\t\t\t\tconst forbiddenMinY = Math.min(zone[1], zone[3], zone[5], zone[7]);\r\n\t\t\t\t\tconst forbiddenMaxX = Math.max(zone[0], zone[2], zone[4], zone[6]);\r\n\t\t\t\t\tconst forbiddenMaxY = Math.max(zone[1], zone[3], zone[5], zone[7]);\r\n\r\n\t\t\t\t\tconst forbiddenSizeX = forbiddenMaxX - forbiddenMinX;\r\n\t\t\t\t\tconst forbiddenSizeY = forbiddenMaxY - forbiddenMinY;\r\n\r\n\t\t\t\t\tctx.fillStyle = \"rgba(255, 0, 0, 0.5)\";\r\n\t\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, forbiddenMinX / 50),\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, forbiddenMaxY / 50),\r\n\t\t\t\t\t\t(forbiddenSizeX / 50) * this.adapter.config.map_scale,\r\n\t\t\t\t\t\t(forbiddenSizeY / 50) * this.adapter.config.map_scale\r\n\t\t\t\t\t);\r\n\t\t\t\t\tctx.lineWidth = (1 * this.adapter.config.map_scale) / 2;\r\n\t\t\t\t\tctx.strokeStyle = \"rgba(255, 0, 0, 1)\";\r\n\t\t\t\t\tctx.strokeRect(\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, forbiddenMinX / 50),\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, forbiddenMaxY / 50),\r\n\t\t\t\t\t\t(forbiddenSizeX / 50) * this.adapter.config.map_scale,\r\n\t\t\t\t\t\t(forbiddenSizeY / 50) * this.adapter.config.map_scale\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (mapdata.VIRTUAL_WALLS) {\r\n\t\t\t\tmapdata.VIRTUAL_WALLS.forEach((wall) => {\r\n\t\t\t\t\tconst startX = this.robotXtoPixelX(mapdata.IMAGE, wall[0] / 50) + this.adapter.config.map_scale;\r\n\t\t\t\t\tconst startY = this.robotYtoPixelY(mapdata.IMAGE, wall[1] / 50) + this.adapter.config.map_scale;\r\n\t\t\t\t\tconst endX = this.robotXtoPixelX(mapdata.IMAGE, wall[2] / 50) + this.adapter.config.map_scale;\r\n\t\t\t\t\tconst endY = this.robotYtoPixelY(mapdata.IMAGE, wall[3] / 50) + this.adapter.config.map_scale;\r\n\r\n\t\t\t\t\t// Calculate start end end of vector\r\n\t\t\t\t\tlet vecX = endX - startX;\r\n\t\t\t\t\tlet vecY = endY - startY;\r\n\r\n\t\t\t\t\t// Normalize vector\r\n\t\t\t\t\tconst len = Math.sqrt(vecX * vecX + vecY * vecY);\r\n\t\t\t\t\tvecX /= len;\r\n\t\t\t\t\tvecY /= len;\r\n\r\n\t\t\t\t\t// Line width\r\n\t\t\t\t\tconst lineWidth = 1 * this.adapter.config.map_scale;\r\n\r\n\t\t\t\t\t// Adjust start and end of the line\r\n\t\t\t\t\tconst adjustedStartX = startX + vecX * (lineWidth / 2);\r\n\t\t\t\t\tconst adjustedStartY = startY + vecY * (lineWidth / 2);\r\n\t\t\t\t\tconst adjustedEndX = endX - vecX * (lineWidth / 2);\r\n\t\t\t\t\tconst adjustedEndY = endY - vecY * (lineWidth / 2);\r\n\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tctx.strokeStyle = \"rgba(255, 0, 0, 1)\";\r\n\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(adjustedStartX, adjustedStartY);\r\n\t\t\t\t\tctx.lineTo(adjustedEndX, adjustedEndY);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (mapdata.NO_MOP_ZONE) {\r\n\t\t\t\tmapdata.NO_MOP_ZONE.forEach((zone) => {\r\n\t\t\t\t\tconst noMopMinX = Math.min(zone[0], zone[2], zone[4], zone[6]);\r\n\t\t\t\t\tconst noMopMinY = Math.min(zone[1], zone[3], zone[5], zone[7]);\r\n\t\t\t\t\tconst noMopMaxX = Math.max(zone[0], zone[2], zone[4], zone[6]);\r\n\t\t\t\t\tconst noMopMaxY = Math.max(zone[1], zone[3], zone[5], zone[7]);\r\n\r\n\t\t\t\t\tconst noMopSizeX = noMopMaxX - noMopMinX;\r\n\t\t\t\t\tconst noMopSizeY = noMopMaxY - noMopMinY;\r\n\r\n\t\t\t\t\tctx.fillStyle = \"rgba(0, 0, 255, 0.5)\";\r\n\t\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, noMopMinX / 50),\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, noMopMaxY / 50),\r\n\t\t\t\t\t\t(noMopSizeX / 50) * this.adapter.config.map_scale,\r\n\t\t\t\t\t\t(noMopSizeY / 50) * this.adapter.config.map_scale\r\n\t\t\t\t\t);\r\n\t\t\t\t\tctx.lineWidth = (1 * this.adapter.config.map_scale) / 2;\r\n\t\t\t\t\tctx.strokeStyle = \"rgba(0, 0, 255, 1)\";\r\n\t\t\t\t\tctx.strokeRect(\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, noMopMinX / 50),\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, noMopMaxY / 50),\r\n\t\t\t\t\t\t(noMopSizeX / 50) * this.adapter.config.map_scale,\r\n\t\t\t\t\t\t(noMopSizeY / 50) * this.adapter.config.map_scale\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (mapdata.OBSTACLES2) {\r\n\t\t\t\tmapdata.OBSTACLES2.forEach((obstacle) => {\r\n\t\t\t\t\tconst obstacleType = obstacle[2];\r\n\t\t\t\t\tconst obstacleTitle = obstacleTitles[obstacleType] || \"Unknown\";\r\n\t\t\t\t\tconst obstacleConfidence = Math.round(obstacle[3] / 100);\r\n\t\t\t\t\tconst obstacleText = obstacleTitle[obstacleType] ? obstacleTitle + \"(\" + obstacleConfidence + \"%)\" : obstacleTitle;\r\n\r\n\t\t\t\t\tconst x = this.robotXtoPixelX(mapdata.IMAGE, obstacle[0] / 50);\r\n\t\t\t\t\tconst y = this.robotYtoPixelY(mapdata.IMAGE, obstacle[1] / 50);\r\n\r\n\t\t\t\t\tctx.fillStyle = \"red\";\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, 5, 0, 2 * Math.PI);\r\n\t\t\t\t\tctx.fill();\r\n\r\n\t\t\t\t\t// Set the text properties\r\n\t\t\t\t\tctx.font = \"14px sans-serif\";\r\n\t\t\t\t\tctx.fillStyle = \"white\";\r\n\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\t\tctx.textAlign = \"center\";\r\n\r\n\t\t\t\t\t// Calculate the text width and height\r\n\t\t\t\t\tconst textWidth = ctx.measureText(obstacleText).width;\r\n\t\t\t\t\tconst textHeight = parseInt(ctx.font, 10);\r\n\r\n\t\t\t\t\t// Calculate the position and dimensions of the background rectangle\r\n\t\t\t\t\tconst padding = 5;\r\n\t\t\t\t\tconst borderRadius = 5;\r\n\t\t\t\t\tconst rectX = x - textWidth / 2 - padding;\r\n\t\t\t\t\tconst rectY = y + 5 + padding / 2;\r\n\t\t\t\t\tconst rectWidth = textWidth + 2 * padding;\r\n\t\t\t\t\tconst rectHeight = textHeight + padding;\r\n\r\n\t\t\t\t\t// Draw the background rectangle with rounded corners\r\n\t\t\t\t\tctx.fillStyle = \"red\";\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(rectX + borderRadius, rectY);\r\n\t\t\t\t\tctx.lineTo(rectX + rectWidth - borderRadius, rectY);\r\n\t\t\t\t\tctx.quadraticCurveTo(rectX + rectWidth, rectY, rectX + rectWidth, rectY + borderRadius);\r\n\t\t\t\t\tctx.lineTo(rectX + rectWidth, rectY + rectHeight - borderRadius);\r\n\t\t\t\t\tctx.quadraticCurveTo(rectX + rectWidth, rectY + rectHeight, rectX + rectWidth - borderRadius, rectY + rectHeight);\r\n\t\t\t\t\tctx.lineTo(rectX + borderRadius, rectY + rectHeight);\r\n\t\t\t\t\tctx.quadraticCurveTo(rectX, rectY + rectHeight, rectX, rectY + rectHeight - borderRadius);\r\n\t\t\t\t\tctx.lineTo(rectX, rectY + borderRadius);\r\n\t\t\t\t\tctx.quadraticCurveTo(rectX, rectY, rectX + borderRadius, rectY);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\r\n\t\t\t\t\t// Draw the white text centered within the background rectangle\r\n\t\t\t\t\tctx.fillStyle = \"white\";\r\n\t\t\t\t\tctx.fillText(obstacleText, x, y + 5 + padding + textHeight / 2);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Zeichne Ladestation wenn vorhanden\r\n\t\t\t// if (mapdata.CHARGER_LOCATION) {\r\n\t\t\t// \tif (mapdata.CHARGER_LOCATION.position[0] && mapdata.CHARGER_LOCATION.position[1]) {\r\n\t\t\t// \t\tctx.beginPath();\r\n\t\t\t// \t\tconst img_charger_rotated = this.rotateCanvas(img_charger, mapdata.CHARGER_LOCATION.angle);\r\n\t\t\t// \t\tctx.drawImage(\r\n\t\t\t// \t\t\timg_charger_rotated,\r\n\t\t\t// \t\t\tthis.robotXtoPixelX(mapdata.IMAGE, mapdata.CHARGER_LOCATION.position[0] / 50) - img_charger_rotated.width / 2,\r\n\t\t\t// \t\t\tthis.robotYtoPixelY(mapdata.IMAGE, mapdata.CHARGER_LOCATION.position[1] / 50) - img_charger_rotated.height / 2,\r\n\t\t\t// \t\t\timg_charger_rotated.width * 100,\r\n\t\t\t// \t\t\timg_charger_rotated.height * 100\r\n\t\t\t// \t\t);\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\r\n\t\t\t// Zeichne Roboter\r\n\t\t\tif (mapdata.ROBOT_POSITION) {\r\n\t\t\t\tif (mapdata.PATH.current_angle && mapdata.ROBOT_POSITION[0] && mapdata.ROBOT_POSITION[1]) {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tconst canvasImg = this.rotateCanvas(img, mapdata.PATH.current_angle);\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\tcanvasImg,\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, mapdata.ROBOT_POSITION.position[0] / 50) - img.width / 4,\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, mapdata.ROBOT_POSITION.position[1] / 50) - img.height / 4,\r\n\t\t\t\t\t\tcanvasImg.width / 2,\r\n\t\t\t\t\t\tcanvasImg.height / 2\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst img_robot_rotated = this.rotateCanvas(img, mapdata.ROBOT_POSITION.angle);\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\timg_robot_rotated,\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, mapdata.ROBOT_POSITION.position[0] / 50) - img_robot_rotated.width / 4,\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, mapdata.ROBOT_POSITION.position[1] / 50) - img_robot_rotated.height / 4,\r\n\t\t\t\t\t\timg_robot_rotated.width / 2,\r\n\t\t\t\t\t\timg_robot_rotated.height / 2\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Zeichne Zielposition wenn vorhanden\r\n\t\t\tif (mapdata.GOTO_TARGET) {\r\n\t\t\t\tconst go_to_pin_img = await loadImage(go_to_pin);\r\n\r\n\t\t\t\tif (mapdata.GOTO_TARGET[0] && mapdata.GOTO_TARGET[1]) {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\tgo_to_pin_img,\r\n\t\t\t\t\t\tthis.robotXtoPixelX(mapdata.IMAGE, mapdata.GOTO_TARGET[0] / 50) - go_to_pin_img.width / 2,\r\n\t\t\t\t\t\tthis.robotYtoPixelY(mapdata.IMAGE, mapdata.GOTO_TARGET[1] / 50) - (go_to_pin_img.height + 6),\r\n\t\t\t\t\t\tgo_to_pin_img.width,\r\n\t\t\t\t\t\tgo_to_pin_img.height\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Draw room names with background\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\t// Get only rooms with valid names\r\n\t\t\tconst roomIDsAll = this.adapter.http_api.getMatchedRoomIDs(false);\r\n\r\n\t\t\tObject.keys(segmentsData).forEach((segnum) => {\r\n\t\t\t\tif (parseInt(segnum) === 0) return; // Skip non-room area\r\n\r\n\t\t\t\tconst segment = segmentsData[segnum];\r\n\t\t\t\tlet roomName = \"\";\r\n\r\n\t\t\t\tif (typeof selectedMap !== \"undefined\" && mappedRooms) {\r\n\t\t\t\t\tconst mapping = mappedRooms.find(([segmentID]) => parseInt(segmentID) === parseInt(segnum));\r\n\r\n\t\t\t\t\tif (mapping) {\r\n\t\t\t\t\t\tconst roomID = mapping[1];\r\n\t\t\t\t\t\tconst roomObj = roomIDsAll.find((r) => String(r.id) === String(roomID));\r\n\t\t\t\t\t\troomName = roomObj?.name || \"\";\r\n\r\n\t\t\t\t\t\tif (!roomName) {\r\n\t\t\t\t\t\t\tthis.adapter.log.debug(`Segment ${segnum} mapped to roomID ${roomID}, but no name found`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (roomName) {\r\n\t\t\t\t\t\tconst centerX = segment.minX + (segment.maxX - segment.minX) / 2;\r\n\t\t\t\t\t\tconst centerY = segment.minY + (segment.maxY - segment.minY) / 2;\r\n\r\n\t\t\t\t\t\tctx.font = `bold ${this.adapter.config.map_scale * 6}px Arial`;\r\n\t\t\t\t\t\tctx.textAlign = \"center\";\r\n\t\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\r\n\t\t\t\t\t\t// Draw white outline (thin stroke)\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = \"white\";\r\n\t\t\t\t\t\tctx.strokeText(roomName, centerX, centerY);\r\n\r\n\t\t\t\t\t\t// Draw black text\r\n\t\t\t\t\t\tctx.fillStyle = \"black\";\r\n\t\t\t\t\t\tctx.fillText(roomName, centerX, centerY);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tctx.closePath();\r\n\r\n\t\t\t// crop image\r\n\t\t\tconst canvas_trimmed = createCanvas(maxleft - minleft + 2 * offset, maxtop - mintop + 2 * offset);\r\n\t\t\tconst ctx_trimmed = canvas_trimmed.getContext(\"2d\");\r\n\t\t\tconst trimmed = ctx.getImageData(minleft - offset, mintop - offset, maxleft - minleft + 2 * offset, maxtop - mintop + offset);\r\n\r\n\t\t\tctx_trimmed.putImageData(trimmed, 0, 0);\r\n\r\n\t\t\treturn [canvas.toDataURL(), canvas_trimmed.toDataURL()];\r\n\t\t} else {\r\n\t\t\treturn [createCanvas(1, 1).toDataURL(), createCanvas(1, 1).toDataURL()]; // return empty canvas\r\n\t\t}\r\n\t}\r\n}"]}