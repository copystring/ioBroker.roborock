{"version":3,"file":"roomColoring.test.js","sourceRoot":"","sources":["../../src/lib/roomColoring.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect } from \"chai\";\nimport { assignRoborockRoomColorsToHex, ROBOROCK_PALETTE } from \"./roomColoring\";\n\ndescribe(\"roomColoring\", () => {\n\tconst options = {\n\t\toneBased: true, // Roborock usually starts IDs at 1\n\t};\n\n\tit(\"should assign different colors to neighbors\", () => {\n\t\t// Scenario: [1] -- [2] -- [3]\n\t\tconst maxBlockNum = 32;\n\t\tconst neighborInfo = new Array(maxBlockNum * maxBlockNum).fill(0);\n\t\tconst pointsCount = new Array(maxBlockNum).fill(0);\n\n\t\t// Setup Neighbors\n\t\tconst setNeighbor = (a: number, b: number) => {\n\t\t\tneighborInfo[a * maxBlockNum + b] = 1;\n\t\t\tneighborInfo[b * maxBlockNum + a] = 1;\n\t\t};\n\t\tsetNeighbor(1, 2);\n\t\tsetNeighbor(2, 3);\n\n\t\t// Setup Existence & Size\n\t\tneighborInfo[1 * maxBlockNum + 1] = 1;\n\t\tneighborInfo[2 * maxBlockNum + 2] = 1;\n\t\tneighborInfo[3 * maxBlockNum + 3] = 1;\n\n\t\tpointsCount[1] = 100;\n\t\tpointsCount[2] = 100;\n\t\tpointsCount[3] = 100;\n\n\t\tconst data = { maxBlockNum, neighborInfo, pointsCount };\n\t\tconst result = assignRoborockRoomColorsToHex(data, options);\n\n\t\tconst c1 = result.colorBucket[1];\n\t\tconst c2 = result.colorBucket[2];\n\t\tconst c3 = result.colorBucket[3];\n\n\t\texpect(c1).to.not.equal(0);\n\t\texpect(c2).to.not.equal(0);\n\t\texpect(c3).to.not.equal(0);\n\n\t\texpect(c1).to.not.equal(c2, \"Neighbors 1 and 2 must differ\");\n\t\texpect(c2).to.not.equal(c3, \"Neighbors 2 and 3 must differ\");\n\t});\n\n\tit(\"should use the default background color for unused rooms\", () => {\n\t\tconst maxBlockNum = 32;\n\t\tconst neighborInfo = new Array(maxBlockNum * maxBlockNum).fill(0);\n\t\tconst pointsCount = new Array(maxBlockNum).fill(0);\n\n\t\tconst data = { maxBlockNum, neighborInfo, pointsCount };\n\t\tconst result = assignRoborockRoomColorsToHex(data, options);\n\n\t\t// Unused room 5 should be the background color (Index 0)\n\t\texpect(result.colorHex[5]).to.equal(ROBOROCK_PALETTE[0]);\n\t});\n});\n"]}