{"version":3,"file":"GridBeautifier.js","sourceRoot":"","sources":["../../../../src/lib/map/b01/GridBeautifier.ts"],"names":[],"mappings":"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","sourcesContent":["import { Point as IPoint } from \"../MapHelper\";\r\n\r\nexport const CONSTANTS = {\r\n\tBLACK: -128,\r\n\tWHITE: 127,\r\n\tBOUNDARY: -2,\r\n};\r\n\r\nexport interface Rect {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nexport interface ChainPoint {\r\n    chain_point: Point;\r\n}\r\n\r\nexport interface DoorInfo {\r\n    door_point: Point[];\r\n    area_id: number[];\r\n}\r\n\r\nexport interface RoomInfo {\r\n    tid: number;\r\n    center_pose: Point;\r\n    chain_infor: ChainPoint[];\r\n    door_info: DoorInfo[];\r\n}\r\n\r\nexport interface TMapStruct {\r\n    map: Int8Array | Uint8Array;\r\n    x_min: number;\r\n    x_max: number;\r\n    y_min: number;\r\n    y_max: number;\r\n    resolution: number;\r\n    info: RoomInfo[] | null;\r\n}\r\n\r\nexport class Point implements IPoint {\r\n\tx: number;\r\n\ty: number;\r\n\tconstructor(x: number, y: number) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}\r\n\r\nexport function beautify(tMapStruct: TMapStruct): { result: Int8Array | Uint8Array } {\r\n\tlet map = tMapStruct.map;\r\n\tlet tRect: Rect = { x: 0, y: 0, width: 0, height: 0 };\r\n\tconst x_min = tMapStruct.resolution * Math.round(tMapStruct.x_min / tMapStruct.resolution);\r\n\tconst y_min = tMapStruct.resolution * Math.round(tMapStruct.y_min / tMapStruct.resolution);\r\n\tconst resolution = tMapStruct.resolution;\r\n\tconst size_x = parseInt(Math.round((tMapStruct.x_max - tMapStruct.x_min) / tMapStruct.resolution).toString());\r\n\tconst size_y = parseInt(Math.round((tMapStruct.y_max - tMapStruct.y_min) / tMapStruct.resolution).toString());\r\n\r\n\tlet black_boundary: any[] = [];\r\n\tlet non_boundary_noise: any[] = [];\r\n\tlet all_region: any[] = [];\r\n\r\n\tconst m_four_Dir = [[0, -1], [-1, 0], [1, 0], [0, 1]];\r\n\tconst m_eight_Dir = [[1, 0], [-1, 0], [0, 1], [0, -1], [-1, -1], [1, -1], [-1, 1], [1, 1]];\r\n\r\n\tconst findRoiMap_result = findRoiMap(tRect, map, size_x, size_y);\r\n\ttRect = findRoiMap_result.result;\r\n\r\n\tconst expandBlackRect_result = expandBlackRect(4, 4, map[0], tRect, map, size_x, size_y);\r\n\tmap = expandBlackRect_result.result;\r\n\tconst expandWhiteRect_result = expandWhiteRect(4, 4, map[0], tRect, map, size_x, size_y);\r\n\tmap = expandWhiteRect_result.result;\r\n\r\n\tconst refineBoundary_reult1 = refineBoundary(0, 10, tRect, map, size_x);\r\n\tmap = refineBoundary_reult1.result;\r\n\r\n\tconst result = eliminateNonBoundaryNoise(non_boundary_noise, tRect, CONSTANTS.WHITE, CONSTANTS.BLACK, 0, map, size_x);\r\n\tnon_boundary_noise = result.tempnonBoundaryNoise;\r\n\tmap = result.map;\r\n\r\n\tconst expandSingleConvexBoundary_result = expandSingleConvexBoundary(50, CONSTANTS.BLACK, 4, 4, tRect, map, size_x);\r\n\tmap = expandSingleConvexBoundary_result.result;\r\n\tif(typeof global !== \"undefined\") (global as any).mapSnapshotOrig = new Int8Array(map);\r\n\r\n\tconst all_region_result = findWhiteConnectComponent(all_region, 150, tRect, size_x, map);\r\n\tall_region = all_region_result.result;\r\n\r\n\tconst result1 = removeIndependentRegion(all_region, black_boundary, 2, tRect, map, size_x);\r\n\tblack_boundary = result1.temp_black_boundary;\r\n\tmap = result1.map;\r\n\r\n\tconst result2 = fillNonBoundaryNoise2(non_boundary_noise, tRect, map, size_x);\r\n\tnon_boundary_noise = result2.nonBoundaryNoise;\r\n\tmap = result2.map;\r\n\r\n\tconst refineBoundary_result2 = refineBoundary(0, 10, tRect, map, size_x);\r\n\tmap = refineBoundary_result2.result;\r\n\r\n\tconst fillBlackComponent_result = fillBlackComponent(map, black_boundary, CONSTANTS.BLACK, size_x);\r\n\tmap = fillBlackComponent_result.result;\r\n\r\n\tconst filterSmallAreas_result = filterSmallAreas(map, tRect, size_x, size_y, m_four_Dir, m_eight_Dir);\r\n\tmap = filterSmallAreas_result.result;\r\n\r\n\tconst fillInternalObstacles_result = fillInternalObstacles(map, tRect, size_x);\r\n\tmap = fillInternalObstacles_result.result;\r\n\r\n\tif (tMapStruct.info) {\r\n\t\tconst roomColorByChainAndDoor_result = roomColorByChainAndDoor(tMapStruct.info, map, size_x, size_y, x_min, y_min, resolution);\r\n\t\tmap = roomColorByChainAndDoor_result.map;\r\n\t}\r\n\r\n\treturn {result: map};\r\n}\r\n\r\nfunction findRoiMap(rect: Rect, map: Int8Array | Uint8Array, size_x: number, size_y: number): { result: Rect } {\r\n\tlet top_bound = size_x;\r\n\tlet bottom_bound = 0;\r\n\tlet left_bound = size_y;\r\n\tlet right_bound = 0;\r\n\r\n\tfor (let idx = 0; idx < size_x; idx++) {\r\n\t\tfor (let idy = 0; idy < size_y; idy++) {\r\n\t\t\tif (map[idy * size_x + idx] != 0) {\r\n\t\t\t\tif (left_bound > idy - 10) {\r\n\t\t\t\t\tif (idx - 10 >= 0) {\r\n\t\t\t\t\t\tleft_bound = idy - 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tleft_bound = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let idx = 0; idx < size_x; idx++) {\r\n\t\tfor (let idy = size_y - 1; idy > 0; idy--) {\r\n\t\t\tif (map[idy * size_x + idx] != 0) {\r\n\t\t\t\tif (right_bound < idy + 10) {\r\n\t\t\t\t\tif (idy + 10 < size_y) {\r\n\t\t\t\t\t\tright_bound = idy + 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tright_bound = size_y - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let idy = 0; idy < size_y; idy++) {\r\n\t\tfor (let idx = 0; idx < size_x; idx++) {\r\n\t\t\tif (map[idy * size_x + idx] != 0) {\r\n\t\t\t\tif (top_bound > idx - 10) {\r\n\t\t\t\t\tif (idx - 10 >= 0) {\r\n\t\t\t\t\t\ttop_bound = idx - 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttop_bound = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let idy = 0; idy < size_y; idy++) {\r\n\t\tfor (let idx = size_x - 1; idx > 0; idx--) {\r\n\t\t\tif (map[idy * size_x + idx] != 0) {\r\n\t\t\t\tif (bottom_bound < idx + 10) {\r\n\t\t\t\t\tif (idx + 10 < size_x) {\r\n\t\t\t\t\t\tbottom_bound = idx + 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbottom_bound = size_x - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst width = right_bound - left_bound + 1;\r\n\tconst height = bottom_bound - top_bound + 1;\r\n\r\n\tif (width > 0 && height > 0 && width < size_y && height < size_x) {\r\n\t\trect.x = top_bound;\r\n\t\trect.y = left_bound;\r\n\t\trect.width = width;\r\n\t\trect.height = height;\r\n\t\treturn {result: rect};\r\n\t} else {\r\n\t\trect.x = 0;\r\n\t\trect.y = 0;\r\n\t\trect.width = size_y;\r\n\t\trect.height = size_x;\r\n\t}\r\n\treturn {result: rect};\r\n}\r\n\r\nfunction expandBlackRect(kernel_size_x: number, kernel_size_y: number, threshold: number, rect: Rect, map: any, size_x: number, size_y: number): { result: any } {\r\n\tlet il, ir, jl, jr;\r\n\tif (kernel_size_x % 2 == 1) {\r\n\t\tir = (kernel_size_x - 1) >> 1;\r\n\t\til = -ir;\r\n\t} else {\r\n\t\tir = kernel_size_x >> 1;\r\n\t\til = 1 - ir;\r\n\t}\r\n\tif (kernel_size_y % 2 == 1) {\r\n\t\tjr = (kernel_size_y - 1) >> 1;\r\n\t\tjl = -jr;\r\n\t} else {\r\n\t\tjr = kernel_size_y >> 1;\r\n\t\tjl = 1 - jr;\r\n\t}\r\n\r\n\tconst dst = new Array(size_x * size_y).fill(CONSTANTS.WHITE);\r\n\r\n\tfor (let i = rect.y; i < rect.y + rect.width; i++) {\r\n\t\tfor (let j = rect.x; j < rect.x + rect.height; j++) {\r\n\t\t\tif (map[i * size_x + j] < threshold) {\r\n\t\t\t\tfor (let di = il; di <= ir; di++) {\r\n\t\t\t\t\tfor (let dj = jl; dj <= jr; dj++) {\r\n\t\t\t\t\t\tif (i + di < 0 || i + di >= rect.y + rect.width || j + dj < 0 || j + dj >= rect.x + rect.height) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (dst[(i + di) * size_x + j + dj] > map[i * size_x + j]) {\r\n\t\t\t\t\t\t\tdst[(i + di) * size_x + j + dj] = map[i * size_x + j];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let i = 0; i < size_y; i++) {\r\n\t\tfor (let j = 0; j < size_x; j++) {\r\n\t\t\tconst index = i * size_x + j;\r\n\t\t\tif (dst[index] == CONSTANTS.WHITE) {\r\n\t\t\t\tdst[index] = map[index];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmap = dst;\r\n\treturn {result: map};\r\n}\r\n\r\nfunction expandWhiteRect(kernel_size_x: number, kernel_size_y: number, threshold: number, rect: Rect, map: any, size_x: number, size_y: number): { result: any } {\r\n\tlet il, ir, jl, jr;\r\n\tif (kernel_size_x % 2 == 1) {\r\n\t\tir = (kernel_size_x - 1) >> 1;\r\n\t\til = -ir;\r\n\t} else {\r\n\t\tir = kernel_size_x >> 1;\r\n\t\til = 1 - ir;\r\n\t}\r\n\tif (kernel_size_y % 2 == 1) {\r\n\t\tjr = (kernel_size_y - 1) >> 1;\r\n\t\tjl = -jr;\r\n\t} else {\r\n\t\tjr = kernel_size_y >> 1;\r\n\t\tjl = 1 - jr;\r\n\t}\r\n\r\n\tconst dst = new Array(size_x * size_y).fill(CONSTANTS.BLACK);\r\n\r\n\tfor (let i = rect.y; i < rect.y + rect.width; i++) {\r\n\t\tfor (let j = rect.x; j < rect.x + rect.height; j++) {\r\n\t\t\tif (map[i * size_x + j] > threshold) {\r\n\t\t\t\tfor (let di = il; di <= ir; di++) {\r\n\t\t\t\t\tfor (let dj = jl; dj <= jr; dj++) {\r\n\t\t\t\t\t\tif (i + di < 0 || i + di >= rect.y + rect.width || j + dj < 0 || j + dj >= rect.x + rect.height) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (dst[(i + di) * size_x + j + dj] < map[i * size_x + j] && map[(i + di) * size_x + j + dj] < threshold) {\r\n\t\t\t\t\t\t\tdst[(i + di) * size_x + j + dj] = map[i * size_x + j];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let i = 0; i < size_y; i++) {\r\n\t\tfor (let j = 0; j < size_x; j++) {\r\n\t\t\tconst index = i * size_x + j;\r\n\t\t\tif (dst[index] == CONSTANTS.BLACK) {\r\n\t\t\t\tdst[index] = map[index];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmap = dst;\r\n\treturn {result: map};\r\n}\r\n\r\nfunction refineBoundary(threshold_black: number, threshold_white: number, rect: Rect, map: any, size_x: number): { result: any } {\r\n\tconst Qx = [];\r\n\tconst Qy = [];\r\n\tlet hasWhiteNeighbor;\r\n\tfor (let i = rect.y; i < rect.y + rect.width; i++) {\r\n\t\tfor (let j = rect.x; j < rect.x + rect.height; j++) {\r\n\t\t\tif (map[i * size_x + j] < threshold_black) {\r\n\t\t\t\thasWhiteNeighbor = false;\r\n\t\t\t\tfor (let di = -1; di <= 1; di++) {\r\n\t\t\t\t\tfor (let dj = -1; dj <= 1; dj++) {\r\n\t\t\t\t\t\tif (i + di < 0 || i + di >= rect.y + rect.width || j + dj < 0 || j + dj >= rect.x + rect.height) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (map[(i + di) * size_x + j + dj] > threshold_white) {\r\n\t\t\t\t\t\t\thasWhiteNeighbor = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!hasWhiteNeighbor) {\r\n\t\t\t\t\tQx.push(i);\r\n\t\t\t\t\tQy.push(j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor (let i = 0; i < Qx.length; i++) {\r\n\t\tmap[Qx[i] * size_x + Qy[i]] = 0;\r\n\t}\r\n\treturn {result: map};\r\n}\r\n\r\nfunction eliminateNonBoundaryNoise(nonBoundaryNoise: Point[], rect: Rect, noise_color: number, border_color: number, outer_border_color: number, map: any, size_x: number): { map: any, tempnonBoundaryNoise: Point[] } {\r\n\tconst tempnonBoundaryNoise = nonBoundaryNoise;\r\n\tfor (let i = rect.y; i < rect.y + rect.width; i++) {\r\n\t\tfor (let j = rect.x; j < rect.x + rect.height; j++) {\r\n\t\t\tif (map[i * size_x + j] == border_color) {\r\n\t\t\t\tif (i - 1 < 0 || i + 1 >= rect.y + rect.width || j - 1 < 0 || j + 1 >= rect.x + rect.height) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (map[(i - 1) * size_x + j] != outer_border_color &&\r\n            map[(i + 1) * size_x + j] != outer_border_color &&\r\n            map[i * size_x + j - 1] != outer_border_color &&\r\n            map[i * size_x + j + 1] != outer_border_color &&\r\n            map[(i - 1) * size_x + j - 1] != outer_border_color &&\r\n            map[(i - 1) * size_x + j + 1] != outer_border_color &&\r\n            map[(i + 1) * size_x + j - 1] != outer_border_color &&\r\n            map[(i + 1) * size_x + j + 1] != outer_border_color) {\r\n\t\t\t\t\tmap[i * size_x + j] = noise_color;\r\n\t\t\t\t\ttempnonBoundaryNoise.push(new Point(i, j));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tmap: map,\r\n\t\ttempnonBoundaryNoise: tempnonBoundaryNoise\r\n\t};\r\n}\r\n\r\nfunction expandSingleConvexBoundary(external_corner_value: number, fill_value: number, valid_length: number, times: number, rect: Rect, map: any, size_x: number): { result: any } {\r\n\ttry {\r\n\t\tlet contour: Point[] = [];\r\n\r\n\r\n\t\tlet contour_map = [...map];\r\n\r\n\t\tconst result = extractExternalContoursNewStrategy(contour_map, contour, rect, size_x);\r\n\r\n\t\tconst isInBounds = (x: number, y: number) => (\r\n\t\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t\t);\r\n\r\n\t\tfor (let i = 0; i < times; i++) {\r\n\t\t\tlet extract_corners: Point[] = [];\r\n\t\t\t// let contour = [];\r\n\t\t\tlet fill_edges: Point[][] = [];\r\n\t\t\tconst inner_corner_value = external_corner_value + 5;\r\n\t\t\tconst four_neighbourhood = [[-1, 0], [1, 0], [0, -1], [0, 1]];\r\n\r\n\t\t\tlet delete_point: Point[] = [];\r\n\r\n\t\t\tcontour_map = result.temp_map;\r\n\t\t\tcontour = result.contour;\r\n\r\n\r\n\t\t\tconst corner_map = [...map];\r\n\r\n\t\t\tconst result1 = extractCorners(corner_map, extract_corners, contour, external_corner_value, inner_corner_value, rect, map, size_x);\r\n\r\n\r\n\t\t\tlet result2_delete_point: Point[] = [];\r\n\t\t\tresult1.extract_corners.forEach((it: Point) => {\r\n\t\t\t\tlet is_valid_length = false;\r\n\t\t\t\tconst p_oint = it;\r\n\r\n\t\t\t\tfor (let k = 0; k < 4; k++) {\r\n\t\t\t\t\tconst temp_idy = p_oint.x + four_neighbourhood[k][0];\r\n\t\t\t\t\tconst temp_idx = p_oint.y + four_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tif (!isInBounds(temp_idx, temp_idy)) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (result1.corner_map[temp_idy * size_x + temp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tconst near_inner_p_oint = new Point(temp_idy, temp_idx);\r\n\t\t\t\t\t\tconst resultInner = statisticalLineLength(result1.corner_map, near_inner_p_oint, external_corner_value, inner_corner_value, valid_length, rect, size_x);\r\n\t\t\t\t\t\tis_valid_length = resultInner.result;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (k == 3) {\r\n\t\t\t\t\t\tis_valid_length = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst fourNeighbourhoodSearchForExtractCorners_result = fourNeighbourhoodSearchForExtractCorners(result1.corner_map, p_oint, fill_edges, delete_point, external_corner_value, inner_corner_value, valid_length, is_valid_length, rect, map, size_x);\r\n\t\t\t\tconst result2Internal = fourNeighbourhoodSearchForExtractCorners_result.result;\r\n\t\t\t\tfill_edges = result2Internal.fill_edges;\r\n\t\t\t\tresult2_delete_point = result2Internal.delete_point;\r\n\t\t\t\tmap = result2Internal.map;\r\n\t\t\t});\r\n\r\n\t\t\tconst arrResult = updateContour(contour, result2_delete_point);\r\n\t\t\tconst array = arrResult.result;\r\n\t\t\tconst result3 =  fillEdges(map, array, fill_edges, fill_value, size_x);\r\n\t\t\tmap = result3.map;\r\n\r\n\t\t\tcontour = result3.contour;\r\n\t\t\tdelete_point = [];\r\n\t\t\textract_corners = [];\r\n\t\t\tfill_edges = [];\r\n\t\t}\r\n\t\tcontour = [];\r\n\t\treturn {result: map};\r\n\t} catch (e: any) {\r\n\t\tconsole.error(\"expandSingle CRASH:\", e);\r\n\t\tthrow e;\r\n\t}\r\n}\r\n\r\nfunction extractExternalContoursNewStrategy(temp_map: any, contour: Point[], rect: Rect, size_x: number): { temp_map: any, contour: Point[] } {\r\n\tlet gray_region: Point[] = [];\r\n\tconst result = findGrayConnectComponent(temp_map, gray_region, rect, size_x);\r\n\tgray_region = result.gray_region;\r\n\ttemp_map = result.temp_map;\r\n\tconst result1 = findExternalContoursNewStrategy(temp_map, gray_region, contour, rect, size_x);\r\n\treturn {\r\n\t\ttemp_map: result1.temp_map,\r\n\t\tcontour: result1.contour\r\n\t};\r\n}\r\n\r\nfunction findGrayConnectComponent(temp_map: any, gray_region: Point[], rect: Rect, size_x: number): { gray_region: Point[], temp_map: any } {\r\n\tconst four_neighbourhood = [[-1, 0], [0, 1], [1, 0], [0, -1]];\r\n\tlet findOnePoint = false;\r\n\tconst isInBounds = (x: number, y: number) => (\r\n\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t);\r\n\tfor (let idy = rect.y; idy < rect.y + rect.width; idy++) {\r\n\t\tfor (let idx = rect.x; idx < rect.x + rect.height; idx++) {\r\n\t\t\tif (temp_map[idy * size_x + idx] == 0) {\r\n\t\t\t\tfindOnePoint = true;\r\n\t\t\t\tconst p_oint_for_search: Point[] = [];\r\n\r\n\t\t\t\tgray_region.push(new Point(idy, idx));\r\n\t\t\t\tp_oint_for_search.push(new Point(idy, idx));\r\n\t\t\t\ttemp_map[idy * size_x + idx] = 30;\r\n\r\n\t\t\t\tlet index = 0;\r\n\t\t\t\twhile (index < p_oint_for_search.length) {\r\n\t\t\t\t\tconst seed = p_oint_for_search[index];\r\n\t\t\t\t\tindex++;\r\n\r\n\t\t\t\t\tfor (let k = 0; k < 4; k++) {\r\n\t\t\t\t\t\tconst temp_idy = seed.x + four_neighbourhood[k][0];\r\n\t\t\t\t\t\tconst temp_idx = seed.y + four_neighbourhood[k][1];\r\n\r\n\t\t\t\t\t\tif (!isInBounds(temp_idx, temp_idy)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (temp_map[temp_idy * size_x + temp_idx] == 0) {\r\n\t\t\t\t\t\t\ttemp_map[temp_idy * size_x + temp_idx] = 30;\r\n\r\n\t\t\t\t\t\t\tp_oint_for_search.push(new Point(temp_idy, temp_idx));\r\n\t\t\t\t\t\t\tgray_region.push(new Point(temp_idy, temp_idx));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (findOnePoint) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (findOnePoint) {\r\n\t\t\tfindOnePoint = false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgray_region: gray_region,\r\n\t\ttemp_map: temp_map\r\n\t};\r\n}\r\n\r\nfunction findExternalContoursNewStrategy(temp_map: any, gray_region: Point[], contour: Point[], rect: Rect, size_x: number): { temp_map: any, contour: Point[] } {\r\n\tconst eight_neighbourhood = [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, 1], [1, 1], [1, -1], [-1, -1]];\r\n\tconst isInBounds = (x: number, y: number) => (\r\n\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t);\r\n\r\n\tfor (let i = 0; i < gray_region.length; i++) {\r\n\t\tfor (let k = 0; k < 8; k++) {\r\n\t\t\tconst temp_idy = gray_region[i].x + eight_neighbourhood[k][0];\r\n\t\t\tconst temp_idx = gray_region[i].y + eight_neighbourhood[k][1];\r\n\r\n\t\t\tif (!isInBounds(temp_idx, temp_idy)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (temp_map[temp_idy * size_x + temp_idx] == CONSTANTS.BLACK) {\r\n\t\t\t\ttemp_map[temp_idy * size_x + temp_idx] = 40;\r\n\t\t\t\tcontour.push(new Point(temp_idy, temp_idx));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\ttemp_map: temp_map,\r\n\t\tcontour: contour\r\n\t};\r\n}\r\n\r\nfunction extractCorners(corner_map: any, extract_corner: Point[], contour: Point[], external_corner_value: number, inner_corner_value: number, rect: Rect, map: any, size_x: number): { corner_map: any, extract_corners: Point[] } {\r\n\tconst four_neighbourhood = [[-1, 0], [0, 1], [1, 0], [0, -1]];\r\n\r\n\tconst temp_map = [...map];\r\n\r\n\tconst isInBounds = (x: number, y: number) => (\r\n\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t);\r\n\r\n\tfor (let i = 0; i < contour.length; i++) {\r\n\t\tlet black_count = 0;\r\n\t\tlet white_count = 0;\r\n\t\tlet gray_count = 0;\r\n\r\n\t\tfor (let k = 0; k < 4; k++) {\r\n\t\t\tconst temp_idy = contour[i].x + four_neighbourhood[k][0];\r\n\t\t\tconst temp_idx = contour[i].y + four_neighbourhood[k][1];\r\n\r\n\t\t\tif (!isInBounds(temp_idx, temp_idy)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (temp_map[temp_idy * size_x + temp_idx] === CONSTANTS.BLACK) {\r\n\t\t\t\tblack_count++;\r\n\t\t\t} else if (temp_map[temp_idy * size_x + temp_idx] == 0) {\r\n\t\t\t\tgray_count++;\r\n\t\t\t} else if(temp_map[temp_idy * size_x + temp_idx] == CONSTANTS.WHITE) {\r\n\t\t\t\twhite_count++;\r\n\t\t\t}\r\n\r\n\t\t\tif (gray_count == 2 && black_count == 2) {\r\n\t\t\t\textract_corner.push(new Point(contour[i].x, contour[i].y));\r\n\t\t\t\tcorner_map[contour[i].x * size_x + contour[i].y] = external_corner_value;\r\n\t\t\t} else if((white_count == 2) && (black_count == 2))\r\n\t\t\t{\r\n\t\t\t\tcorner_map[contour[i].x * size_x + contour[i].y] = inner_corner_value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tcorner_map: corner_map,\r\n\t\textract_corners: extract_corner\r\n\t};\r\n}\r\n\r\n\r\nfunction statisticalLineLength(temp_map: any, p_oint: Point, external_corner_value: number, inner_corner_value: number, valid_length: number, rect: Rect, size_x: number): { result: boolean } {\r\n\tconst result1 = upSearchStatisticalLineLength(temp_map, p_oint, external_corner_value, inner_corner_value, valid_length, rect, size_x);\r\n\tif (result1.result) {\r\n\t\treturn {result: true};\r\n\t}\r\n\tconst result2 = downSearchStatisticalLineLength(temp_map, p_oint, external_corner_value, inner_corner_value, valid_length, rect, size_x);\r\n\tif (result2.result) {\r\n\t\treturn {result: true};\r\n\t}\r\n\tconst result3 = leftSearchStatisticalLineLength(temp_map, p_oint, external_corner_value, inner_corner_value, valid_length, rect, size_x);\r\n\tif (result3.result) {\r\n\t\treturn {result: true};\r\n\t}\r\n\tconst result4 = rightSearchStatisticalLineLength(temp_map, p_oint, external_corner_value, inner_corner_value, valid_length, rect, size_x);\r\n\tif (result4.result) {\r\n\t\treturn {result: true};\r\n\t}\r\n\treturn {result: false};\r\n}\r\n\r\nfunction upSearchStatisticalLineLength(temp_map: any, p_oint: Point, external_corner_value: number, inner_corner_value: number, valid_length: number, rect: Rect, size_x: number): { result: boolean } {\r\n\tif ((p_oint.x + 1 < rect.y + rect.width) && (temp_map[(p_oint.x + 1) * size_x + p_oint.y]) == CONSTANTS.WHITE) {\r\n\t\tconst idy = p_oint.x + 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tconst line = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idy; j < rect.y + rect.width; j++) {\r\n\t\t\tif (temp_map[j * size_x + idx] == CONSTANTS.WHITE) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = j + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = idx + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < rect.y || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (line.length > valid_length) {\r\n\t\t\treturn {result: true};\r\n\t\t} else {\r\n\t\t\treturn {result: false};\r\n\t\t}\r\n\t}\r\n\treturn {result: false};\r\n}\r\n\r\nfunction downSearchStatisticalLineLength(temp_map: any, p_oint: Point, external_corner_value: number, inner_corner_value: number, valid_length: number, rect: Rect, size_x: number): { result: boolean } {\r\n\tif ((p_oint.x - 1 > rect.y) && (temp_map[(p_oint.x - 1) * size_x + p_oint.y] == CONSTANTS.WHITE)) {\r\n\t\tconst idy = p_oint.x - 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tconst line = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idy; j > rect.y; j--) {\r\n\t\t\tif (temp_map[j * size_x + idx] == CONSTANTS.WHITE) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = j + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = idx + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < rect.y || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {result: line.length > valid_length};\r\n\t}\r\n\treturn {result: false};\r\n}\r\n\r\nfunction leftSearchStatisticalLineLength(temp_map: any, p_oint: Point, external_corner_value: number, inner_corner_value: number, valid_length: number, rect: Rect, size_x: number): { result: boolean } {\r\n\tif ((p_oint.y + 1 < rect.x + rect.height) && (temp_map[p_oint.x * size_x + p_oint.y + 1] == CONSTANTS.WHITE)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y + 1;\r\n\r\n\t\tconst line = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idx; j < rect.x + rect.height; j++) {\r\n\t\t\tif (temp_map[idy * size_x + j] == CONSTANTS.WHITE) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = idy + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = j + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < rect.y || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {result: line.length > valid_length};\r\n\t}\r\n\treturn {result: false};\r\n}\r\n\r\nfunction rightSearchStatisticalLineLength(temp_map: any, p_oint: Point, external_corner_value: number, inner_corner_value: number, valid_length: number, rect: Rect, size_x: number): { result: boolean } {\r\n\tif ((p_oint.y - 1 > rect.x) && (temp_map[p_oint.x * size_x + p_oint.y - 1] == CONSTANTS.WHITE)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y - 1;\r\n\r\n\t\tconst line = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idx; j > rect.x; j--) {\r\n\t\t\tif (temp_map[idy * size_x + j] == CONSTANTS.WHITE) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = idy + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = j + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < rect.y || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {result: line.length > valid_length};\r\n\t}\r\n\treturn {result: false};\r\n}\r\n\r\nfunction fourNeighbourhoodSearchForExtractCorners(temp_map: any, p_oint: Point, fill_edges: Point[][], delete_point: Point[], external_corner_value: number, inner_corner_value: number, valid_length: number, is_valid_length: boolean, rect: Rect, map: any, size_x: number): { result: any } {\r\n\tconst result1 = upSearchForExtractCorners(temp_map, p_oint, fill_edges, delete_point, external_corner_value, inner_corner_value, valid_length, is_valid_length, rect, map, size_x);\r\n\tconst result2 = downSearchForExtractCorners(temp_map, p_oint, result1.fill_edges, result1.delete_point, external_corner_value, inner_corner_value, valid_length, is_valid_length, rect, result1.map, size_x);\r\n\tconst result3 = leftSearchForExtractCorners(temp_map, p_oint, result2.fill_edges, result2.delete_point, external_corner_value, inner_corner_value, valid_length, is_valid_length, rect, result2.map, size_x);\r\n\tconst result4 = rightSearchForExtractCorners(temp_map, p_oint, result3.fill_edges, result3.delete_point, external_corner_value, inner_corner_value, valid_length, is_valid_length, rect, result3.map, size_x);\r\n\treturn {result: result4};\r\n}\r\n\r\nfunction upSearchForExtractCorners(temp_map: any, p_oint: Point, fill_edges: Point[][], delete_point: Point[], external_corner_value: number, inner_corner_value: number, valid_length: number, is_valid_length: boolean, rect: Rect, map: any, size_x: number): { delete_point: Point[], fill_edges: Point[][], map: any } {\r\n\tif ((p_oint.x + 1 < rect.y + rect.width) && map[(p_oint.x + 1) * size_x + p_oint.y] == 0) {\r\n\t\tconst idy = p_oint.x + 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idy; j < rect.y + rect.width; j++) {\r\n\t\t\tif (temp_map[j * size_x + idx] == 0) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = j + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = idx + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < minY || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (is_valid_length && line.length > 1) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < minY || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (line.length > valid_length) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < minY || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tdelete_point: delete_point,\r\n\t\tfill_edges: fill_edges,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction downSearchForExtractCorners(temp_map: any, p_oint: Point, fill_edges: Point[][], delete_point: Point[], external_corner_value: number, inner_corner_value: number, valid_length: number, is_valid_length: boolean, rect: Rect, map: any, size_x: number): { delete_point: Point[], fill_edges: Point[][], map: any } {\r\n\tif ((p_oint.x - 1 > rect.y) && (map[(p_oint.x - 1) * size_x + p_oint.y] == 0)) {\r\n\t\tconst idy = p_oint.x - 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idy; j > rect.y; j--) {\r\n\t\t\tif (temp_map[j * size_x + idx] == 0) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = j + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = idx + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < minY || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (is_valid_length && line.length > 1) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < minY || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (line.length > valid_length) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst left_and_right_neighbourhood = [[0, -1], [0, 1]];\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + left_and_right_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + left_and_right_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < minY || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tdelete_point: delete_point,\r\n\t\tfill_edges: fill_edges,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction leftSearchForExtractCorners(temp_map: any, p_oint: Point, fill_edges: Point[][], delete_point: Point[], external_corner_value: number, inner_corner_value: number, valid_length: number, is_valid_length: boolean, rect: Rect, map: any, size_x: number): { delete_point: Point[], fill_edges: Point[][], map: any } {\r\n\tif ((p_oint.y + 1 < rect.x + rect.height) && (map[p_oint.x * size_x + p_oint.y + 1] == 0)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y + 1;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idx; j < rect.x + rect.height; j++) {\r\n\t\t\tif (temp_map[idy * size_x + j] == 0) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = idy + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = j + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < minY || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (is_valid_length && line.length > 1) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < rect.y || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (line.length > valid_length) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idy < minY || tmp_idy >= maxY || tmp_idx < minX || tmp_idx >= maxX) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tdelete_point: delete_point,\r\n\t\tfill_edges: fill_edges,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction rightSearchForExtractCorners(temp_map: any, p_oint: Point, fill_edges: Point[][], delete_point: Point[], external_corner_value: number, inner_corner_value: number, valid_length: number, is_valid_length: boolean, rect: Rect, map: any, size_x: number): { delete_point: Point[], fill_edges: Point[][], map: any } {\r\n\tif ((p_oint.y - 1 > rect.x) && (map[p_oint.x * size_x + p_oint.y - 1] == 0)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y - 1;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\r\n\t\tfor (let j = idx; j > rect.x; j--) {\r\n\t\t\tif (temp_map[idy * size_x + j] == 0) {\r\n\t\t\t\tlet black_count = 0;\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = idy + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = j + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < minY || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == external_corner_value ||\r\n              temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tblack_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (black_count == 1) {\r\n\t\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (is_valid_length && line.length > 1) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tconst minY = rect.y, maxY = rect.y + rect.width;\r\n\t\t\t\t\tconst minX = rect.x, maxX = rect.x + rect.height;\r\n\t\t\t\t\tif (tmp_idx < minX || tmp_idx >= maxX || tmp_idy < minY || tmp_idy >= maxY) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (line.length > valid_length) {\r\n\t\t\tline.push(p_oint);\r\n\t\t\tfill_edges.push(line);\r\n\r\n\t\t\tfor (let i = 0; i < line.length; i++) {\r\n\t\t\t\tconst up_and_down_neighbourhood = [[-1, 0], [1, 0]];\r\n\r\n\t\t\t\tfor (let k = 0; k < 2; k++) {\r\n\t\t\t\t\tconst tmp_idy = line[i].x + up_and_down_neighbourhood[k][0];\r\n\t\t\t\t\tconst tmp_idx = line[i].y + up_and_down_neighbourhood[k][1];\r\n\r\n\t\t\t\t\tif (tmp_idx < rect.x || tmp_idx >= rect.x + rect.height || tmp_idy < rect.y || tmp_idy >= rect.y + rect.width) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (temp_map[tmp_idy * size_x + tmp_idx] == CONSTANTS.BLACK || temp_map[tmp_idy * size_x + tmp_idx] == inner_corner_value) {\r\n\t\t\t\t\t\tmap[tmp_idy * size_x + tmp_idx] = CONSTANTS.WHITE;\r\n\t\t\t\t\t\tdelete_point.push(new Point(tmp_idy, tmp_idx));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tdelete_point: delete_point,\r\n\t\tfill_edges: fill_edges,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction updateContour(contour: Point[], delete_points: Point[]): { result: Point[] } {\r\n\tconst delete_point_size = delete_points.length;\r\n\r\n\r\n\tfor (let i = 0; i < delete_point_size; i++) {\r\n\t\tconst delete_point = delete_points[i];\r\n\r\n\t\tcontour = contour.filter((it: Point) => !(it.x === delete_point.x && it.y === delete_point.y));\r\n\t}\r\n\r\n\treturn {result: contour};\r\n}\r\n\r\nfunction fillEdges(map: any, contour: Point[], fill_edges: Point[][], value: number, size_x: number): { contour: Point[], map: any } {\r\n\tfor (let i = 0; i < fill_edges.length; i++) {\r\n\t\tconst edge = fill_edges[i];\r\n\r\n\t\tfor (let j = 0; j < edge.length; j++) {\r\n\t\t\tmap[edge[j].x * size_x + edge[j].y] = value;\r\n\t\t\tcontour.push(edge[j]);\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tcontour: contour,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction findWhiteConnectComponent(all_region: { first: Point[], second: Point[] }[], valid_area: number, rect: Rect, size_x: number, map: any): { result: { first: Point[], second: Point[] }[] } {\r\n\r\n\tlet temp_map = [...map];\r\n\r\n\tconst four_neighbourhood = [[-1, 0], [0, 1], [1, 0], [0, -1]];\r\n\r\n\tconst isInBounds = (x: number, y: number) => (\r\n\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t);\r\n\r\n\tfor (let idy = rect.y + 1; idy < rect.y + rect.width - 1; idy++) {\r\n\t\tfor (let idx = rect.x + 1; idx < rect.x + rect.height - 1; idx++) {\r\n\t\t\tif (temp_map[idy * size_x + idx] == CONSTANTS.WHITE) {\r\n\t\t\t\tconst tmp_white_region: Point[] = [];\r\n\t\t\t\tlet tmp_black_region: Point[] = [];\r\n\t\t\t\tconst p_oint_for_search: Point[] = [];\r\n\r\n\t\t\t\ttmp_white_region.push(new Point(idy, idx));\r\n\t\t\t\tp_oint_for_search.push(new Point(idy, idx));\r\n\t\t\t\ttemp_map[idy * size_x + idx] = 30;\r\n\r\n\t\t\t\tlet pointIndex = 0;\r\n\t\t\t\twhile (pointIndex < p_oint_for_search.length) {\r\n\t\t\t\t\t// \r\n\t\t\t\t\tconst seed = p_oint_for_search[pointIndex];\r\n\t\t\t\t\tpointIndex++;\r\n\r\n\t\t\t\t\tconst result = findBlackTPoint(temp_map, seed, tmp_black_region, size_x, rect);\r\n\t\t\t\t\ttemp_map = result.temp_map;\r\n\t\t\t\t\ttmp_black_region = result.tmp_black_region;\r\n\r\n\t\t\t\t\tfor (let k = 0; k < 4; k++) {\r\n\t\t\t\t\t\tconst temp_idy = seed.x + four_neighbourhood[k][0];\r\n\t\t\t\t\t\tconst temp_idx = seed.y + four_neighbourhood[k][1];\r\n\r\n\t\t\t\t\t\tif (!isInBounds(temp_idx, temp_idy)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (temp_map[temp_idy * size_x + temp_idx] == CONSTANTS.WHITE) {\r\n\t\t\t\t\t\t\ttemp_map[temp_idy * size_x + temp_idx] = 30;\r\n\r\n\t\t\t\t\t\t\tp_oint_for_search.push(new Point(temp_idy, temp_idx));\r\n\t\t\t\t\t\t\ttmp_white_region.push(new Point(temp_idy, temp_idx));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tall_region.push({\r\n\t\t\t\t\tfirst: tmp_black_region,\r\n\t\t\t\t\tsecond: tmp_white_region\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst tempAll_region: { first: Point[], second: Point[] }[] = [];\r\n\tfor (let i = 0; i < all_region.length; i++) {\r\n\t\tconst temp = all_region[i];\r\n\t\tif (temp.second.length < valid_area || temp.first.length == 0 || temp.second.length == 0) {\r\n\r\n\t\t} else {\r\n\t\t\ttempAll_region.push(temp);\r\n\t\t}\r\n\t}\r\n\tall_region = tempAll_region;\r\n\r\n\tif (all_region.length > 0) {\r\n\t\tall_region.sort((a, b) => b.first.length - a.first.length);\r\n\t}\r\n\r\n\treturn {result: all_region};\r\n}\r\n\r\nfunction findBlackTPoint(temp_map: any, seed: Point, black_region: Point[], size_x: number, tRect: Rect): { temp_map: any, tmp_black_region: Point[] } {\r\n\tconst eight_neighbourhood = [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, 1], [1, 1], [1, -1], [-1, -1]];\r\n\tfor (let k = 0; k < 8; k++) {\r\n\t\tconst temp_idy = seed.x + eight_neighbourhood[k][0];\r\n\t\tconst temp_idx = seed.y + eight_neighbourhood[k][1];\r\n\r\n\t\tif (temp_idy < tRect.y || temp_idy >= tRect.y + tRect.width || temp_idx < tRect.x || temp_idx >= tRect.x + tRect.height) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (temp_map[temp_idy * size_x + temp_idx] == CONSTANTS.BLACK) {\r\n\t\t\ttemp_map[temp_idy * size_x + temp_idx] = 10;\r\n\t\t\tblack_region.push(new Point(temp_idy, temp_idx));\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\ttemp_map: temp_map,\r\n\t\ttmp_black_region: black_region,\r\n\t};\r\n}\r\n\r\nfunction removeIndependentRegion(all_region: { first: Point[], second: Point[] }[], black_boundary: Point[], valid_length: number, rect: Rect, map: any, size_x: number): { temp_black_boundary: Point[], map: any } {\r\n\tlet temp_black_boundary = black_boundary;\r\n\tif (all_region.length > 0) {\r\n\r\n\t\tlet temp_map = [...map];\r\n\r\n\t\tconst tmp_all_region: { first: Point[], second: Point[] }[] = [];\r\n\t\tconst temp_map_result = fillBlackComponent(temp_map, all_region[0].first, 30, size_x);\r\n\t\ttemp_map = temp_map_result.result;\r\n\r\n\t\ttmp_all_region.push(all_region[0]);\r\n\r\n\t\tconst result = {\r\n\t\t\ttemp_map: temp_map,\r\n\t\t\tblack_boundary: black_boundary,\r\n\t\t};\r\n\t\tfor (let i = 1; i < all_region.length; i++) {\r\n\t\t\tlet is_home = false;\r\n\t\t\tconst black_boundary_size = all_region[i].first.length;\r\n\t\t\tfor (let j = 0; j < black_boundary_size; j++) {\r\n\t\t\t\tlet search_success = false;\r\n\t\t\t\tconst seed = all_region[i].first[j];\r\n\r\n\t\t\t\tconst tempResult = fourNeighbourhoodSearchArea(result.temp_map, seed, result.black_boundary, 30, valid_length, rect, size_x);\r\n\t\t\t\tsearch_success = tempResult.boolStatus;\r\n\t\t\t\ttemp_black_boundary = tempResult.black_boundary;\r\n\t\t\t\tresult.temp_map = tempResult.temp_map;\r\n\t\t\t\tresult.black_boundary = tempResult.black_boundary;\r\n\t\t\t\tif (search_success) {\r\n\t\t\t\t\tis_home = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (is_home) {\r\n\t\t\t\ttmp_all_region.push(all_region[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst fillConnectComponent_result = fillConnectComponent(result.temp_map, tmp_all_region, 30, size_x);\r\n\t\tresult.temp_map = fillConnectComponent_result.result;\r\n\t\tfor (let idy = rect.y + 1; idy < rect.y + rect.width - 1; idy++) {\r\n\t\t\tfor (let idx = rect.x + 1; idx < rect.x + rect.height - 1; idx++) {\r\n\t\t\t\tif (result.temp_map[idy * size_x + idx] != 0 && result.temp_map[idy * size_x + idx] != 30) {\r\n\t\t\t\t\tmap[idy * size_x + idx] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\ttemp_black_boundary: temp_black_boundary,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction fillConnectComponent(temp_map: any, all_region: { first: Point[], second: Point[] }[], value: number, size_x: number): { result: any } {\r\n\tfor (let i = 0; i < all_region.length; i++) {\r\n\t\tfor (let j = 0; j < all_region[i].first.length; j++) {\r\n\t\t\ttemp_map[all_region[i].first[j].x * size_x + all_region[i].first[j].y] = value;\r\n\t\t}\r\n\t\tfor (let j2 = 0; j2 < all_region[i].second.length; j2++) {\r\n\t\t\ttemp_map[all_region[i].second[j2].x * size_x + all_region[i].second[j2].y] = value;\r\n\t\t}\r\n\t}\r\n\treturn {result: temp_map};\r\n}\r\n\r\ninterface SearchAreaResult {\r\n\tboolStatus: boolean;\r\n\tline: Point[];\r\n}\r\n\r\nfunction fourNeighbourhoodSearchArea(temp_map: any, p_oint: Point, black_boundary: Point[], boundary_value: number, valid_length: number, rect: Rect, size_x: number): { temp_map: any, black_boundary: Point[], boolStatus: boolean } {\r\n\tlet up_result: SearchAreaResult = { boolStatus: false, line: [] };\r\n\tlet down_result: SearchAreaResult = { boolStatus: false, line: [] };\r\n\tlet left_result: SearchAreaResult = { boolStatus: false, line: [] };\r\n\tlet right_result: SearchAreaResult = { boolStatus: false, line: [] };\r\n\r\n\tup_result = upSearchArea(temp_map, p_oint, boundary_value, valid_length, rect, size_x);\r\n\tdown_result = downSearchArea(temp_map, p_oint, boundary_value, valid_length, rect, size_x);\r\n\tleft_result = leftSearchArea(temp_map, p_oint, boundary_value, valid_length, rect, size_x);\r\n\tright_result = rightSearchArea(temp_map, p_oint, boundary_value, valid_length, rect, size_x);\r\n\r\n\tif (up_result.boolStatus || down_result.boolStatus || left_result.boolStatus || right_result.boolStatus) {\r\n\t\tif (up_result.line.length > 0) {\r\n\t\t\tfor (let i = 0; i < up_result.line.length; i++) {\r\n\t\t\t\tblack_boundary.push(up_result.line[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (down_result.line.length > 0) {\r\n\t\t\tfor (let i = 0; i < down_result.line.length; i++) {\r\n\t\t\t\tblack_boundary.push(down_result.line[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (left_result.line.length > 0) {\r\n\t\t\tfor (let i = 0; i < left_result.line.length; i++) {\r\n\t\t\t\tblack_boundary.push(left_result.line[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (right_result.line.length > 0) {\r\n\t\t\tfor (let i = 0; i < right_result.line.length; i++) {\r\n\t\t\t\tblack_boundary.push(right_result.line[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttemp_map: temp_map,\r\n\t\t\tblack_boundary: black_boundary,\r\n\t\t\tboolStatus: true\r\n\t\t};\r\n\t} else {\r\n\t\treturn {\r\n\t\t\ttemp_map: temp_map,\r\n\t\t\tblack_boundary: black_boundary,\r\n\t\t\tboolStatus: false\r\n\t\t};\r\n\t}\r\n}\r\n\r\nfunction upSearchArea(temp_map: any, p_oint: Point, boundary_value: number, valid_length: number, rect: Rect, size_x: number): SearchAreaResult {\r\n\tif ((p_oint.y + 1 < rect.x + rect.height) && (temp_map[p_oint.x * size_x + p_oint.y + 1] == 0)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y + 1;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\t\tlet has_black_boundary = false;\r\n\r\n\t\tfor (let j = idx; j < idx + valid_length; j++) {\r\n\t\t\tif (j >= rect.x + rect.height) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (temp_map[idy * size_x + j] == boundary_value) {\r\n\t\t\t\thas_black_boundary = true;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[idy * size_x + j] == CONSTANTS.WHITE || temp_map[idy * size_x + j] == CONSTANTS.BLACK) {\r\n\t\t\t\tline = [];\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[idy * size_x + j] == 0) {\r\n\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (has_black_boundary) {\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: true,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: false,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tboolStatus: false,\r\n\t\tline: []\r\n\t};\r\n}\r\n\r\nfunction downSearchArea(temp_map: any, p_oint: Point, boundary_value: number, valid_length: number, rect: Rect, size_x: number): SearchAreaResult {\r\n\tif ((p_oint.y - 1 > rect.x) && (temp_map[p_oint.x * size_x + p_oint.y - 1] == 0)) {\r\n\t\tconst idy = p_oint.x;\r\n\t\tconst idx = p_oint.y - 1;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\t\tlet has_black_boundary = false;\r\n\r\n\t\tfor (let j = idx; j > idx - valid_length; j--) {\r\n\t\t\tif (j < rect.x) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (temp_map[idy * size_x + j] == boundary_value) {\r\n\t\t\t\thas_black_boundary = true;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[idy * size_x + j] == CONSTANTS.WHITE || temp_map[idy * size_x + j] == CONSTANTS.BLACK) {\r\n\t\t\t\tline = [];\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[idy * size_x + j] == 0) {\r\n\t\t\t\tline.push(new Point(idy, j));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (has_black_boundary) {\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: true,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: false,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tboolStatus: false,\r\n\t\tline: []\r\n\t};\r\n}\r\n\r\nfunction leftSearchArea(temp_map: any, p_oint: Point, boundary_value: number, valid_length: number, rect: Rect, size_x: number) {\r\n\tif ((p_oint.x + 1 < rect.y + rect.width) && (temp_map[(p_oint.x + 1) * size_x + p_oint.y] == 0)) {\r\n\t\tconst idy = p_oint.x + 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\t\tlet has_black_boundary = false;\r\n\r\n\t\tfor (let j = idy; j < idy + valid_length; j++) {\r\n\t\t\tif (j >= rect.y + rect.width) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (temp_map[j * size_x + idx] == boundary_value) {\r\n\t\t\t\thas_black_boundary = true;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[j * size_x + idx] == CONSTANTS.WHITE || temp_map[j * size_x + idx] == CONSTANTS.BLACK) {\r\n\t\t\t\tline = [];\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[j * size_x + idx] == 0) {\r\n\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (has_black_boundary) {\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: true,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: false,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tboolStatus: false,\r\n\t\tline: []\r\n\t};\r\n}\r\n\r\nfunction rightSearchArea(temp_map: any, p_oint: Point, boundary_value: number, valid_length: number, rect: Rect, size_x: number) {\r\n\tif ((p_oint.x - 1 > rect.y) && (temp_map[(p_oint.x - 1) * size_x + p_oint.y] == 0)) {\r\n\t\tconst idy = p_oint.x - 1;\r\n\t\tconst idx = p_oint.y;\r\n\r\n\t\tlet line: Point[] = [];\r\n\t\tline.push(new Point(idy, idx));\r\n\t\tlet has_black_boundary = false;\r\n\r\n\t\tfor (let j = idy; j > idy - valid_length; j--) {\r\n\t\t\tif (j <= rect.y) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (temp_map[j * size_x + idx] == boundary_value) {\r\n\t\t\t\thas_black_boundary = true;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[j * size_x + idx] == CONSTANTS.WHITE || temp_map[j * size_x + idx] == CONSTANTS.BLACK) {\r\n\t\t\t\tline = [];\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[j * size_x + idx] == 0) {\r\n\t\t\t\tline.push(new Point(j, idx));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (has_black_boundary) {\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: true,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tline = [];\r\n\t\t\treturn {\r\n\t\t\t\tboolStatus: false,\r\n\t\t\t\tline: line\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tboolStatus: false,\r\n\t\tline: []\r\n\t};\r\n}\r\n\r\nfunction fillBlackComponent(temp_map: any, black_region: Point[], value: number, size_x: number): { result: any } {\r\n\tfor (let i = 0; i < black_region.length; i++) {\r\n\t\ttemp_map[black_region[i].x * size_x + black_region[i].y] = value;\r\n\t}\r\n\treturn {result: temp_map};\r\n}\r\n\r\nfunction filterSmallAreas(map: any, rect: Rect, size_x: number, size_y: number, m_four_Dir: any, m_eight_Dir: any): { result: any } {\r\n\tlet show_map = [...map];\r\n\tlet areas: { first: number, second: Point[] } = {\r\n\t\tfirst: 0,\r\n\t\tsecond: []\r\n\t};\r\n\tconst areas_vec: { first: number, second: Point[] }[] = [];\r\n\r\n\tfor (let i = rect.x; i < rect.x + rect.height; i++) {\r\n\t\tfor (let j = rect.y; j < rect.y + rect.width; j++) {\r\n\t\t\tif (show_map[j * size_x + i] == CONSTANTS.WHITE) {\r\n\t\t\t\tconst findAllFillRegional_result = findAllFillRegional(show_map, new Point(i , j), size_x, size_y, m_four_Dir);\r\n\t\t\t\tareas = findAllFillRegional_result.areas;\r\n\t\t\t\tshow_map = findAllFillRegional_result.tmp_map;\r\n\t\t\t\tareas_vec.push(areas);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tshow_map = [];\r\n\r\n\tlet test_map = [...map];\r\n\tconst filter_pt_vec: Point[] = [];\r\n\tfor (let i = 0; i < areas_vec.length; i++) {\r\n\t\tlet tmp_pt = new Point(-1 , -1);\r\n\t\tfor (let j = 0; j < areas_vec[i].second.length; j++) {\r\n\t\t\ttmp_pt = areas_vec[i].second[j];\r\n\t\t\ttest_map[tmp_pt.y * size_x + tmp_pt.x] = 80;\r\n\t\t}\r\n\t\tfilter_pt_vec.push(tmp_pt);\r\n\t}\r\n\r\n\tlet tmp_map = [...test_map];\r\n\tfor (let i = 0; i < filter_pt_vec.length; i++) {\r\n\t\tif (filter_pt_vec[i].x < 0 || filter_pt_vec[i].y < 0 || filter_pt_vec[i].x >= size_x || filter_pt_vec[i].y >= size_y) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tconst isFillAreas_result = isFillAreas(tmp_map, filter_pt_vec[i], size_x, size_y, m_eight_Dir);\r\n\t\ttmp_map = isFillAreas_result.tmp_map;\r\n\t\tif (isFillAreas_result.result) {\r\n\t\t\tconst filterAreas_result = filterAreas(test_map, filter_pt_vec[i], size_x, size_y, m_eight_Dir);\r\n\t\t\ttest_map = filterAreas_result.test_map;\r\n\t\t}\r\n\t}\r\n\ttmp_map = [];\r\n\r\n\tconst black_pt_vec = [];\r\n\tfor (let i = rect.x; i < rect.x + rect.height; i++) {\r\n\t\tfor (let j = rect.y; j < rect.y + rect.width; j++) {\r\n\t\t\tif (test_map[j * size_x + i] == 80) {\r\n\t\t\t\ttest_map[j * size_x + i] = CONSTANTS.WHITE;\r\n\t\t\t} else if(test_map[j * size_x + i] == CONSTANTS.BLACK) {\r\n\t\t\t\tblack_pt_vec.push(new Point(i, j));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst filterIslandPt_result = filterIslandPt(test_map, black_pt_vec, size_x, size_y, m_four_Dir);\r\n\ttest_map = filterIslandPt_result.test_map;\r\n\r\n\tfor (let idx = rect.x; idx < rect.x + rect.height; idx++) {\r\n\t\tfor (let idy = rect.y; idy < rect.y + rect.width; idy++) {\r\n\t\t\tmap[idy * size_x + idx] = test_map[idy * size_x + idx];\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tresult: map\r\n\t};\r\n}\r\n\r\nfunction findAllFillRegional(tmp_map: any, pt: Point, size_x: number, size_y: number, m_four_Dir: number[][]): { areas: { first: number, second: Point[] }, tmp_map: any } {\r\n\tconst areas: { first: number, second: Point[] } = {\r\n\t\tfirst: 0,\r\n\t\tsecond: []\r\n\t};\r\n\tlet ptGrowing = new Point(-1, -1);\r\n\tlet area_num = 0;\r\n\r\n\tlet growPtVec: Point[] = [];\r\n\tlet changePoints: Point[] = [];\r\n\tgrowPtVec = [];\r\n\tchangePoints = [];\r\n\r\n\ttmp_map[pt.y * size_x + pt.x] = 80;\r\n\tchangePoints.push(pt);\r\n\tgrowPtVec.push(pt);\r\n\r\n\twhile (growPtVec.length > 0) {\r\n\t\tconst currPt = growPtVec.pop()!;\r\n\t\tfor (let j = 0; j < 4; j++) {\r\n\t\t\tptGrowing = new Point(currPt.x + m_four_Dir[j][0], currPt.y + m_four_Dir[j][1]);\r\n\r\n\t\t\tif (ptGrowing.x < 0 || ptGrowing.y < 0 || ptGrowing.x >= size_x || ptGrowing.y >= size_y) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (tmp_map[ptGrowing.y * size_x + ptGrowing.x] == CONSTANTS.WHITE) {\r\n\t\t\t\tchangePoints.push(ptGrowing);\r\n\t\t\t\tgrowPtVec.push(ptGrowing);\r\n\t\t\t\ttmp_map[ptGrowing.y * size_x + ptGrowing.x] = 80;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tarea_num = changePoints.length;\r\n\tfor (let i = 0; i < changePoints.length; i++) {\r\n\t\tif (area_num <= 150) {\r\n\t\t\tareas.first = area_num;\r\n\t\t\tareas.second.push(new Point(changePoints[i].x, changePoints[i].y));\r\n\t\t}\r\n\t}\r\n\r\n\tchangePoints = [];\r\n\tgrowPtVec = [];\r\n\r\n\treturn {\r\n\t\tareas: areas,\r\n\t\ttmp_map: tmp_map\r\n\t};\r\n}\r\n\r\nfunction isFillAreas(image: any, pt: Point, size_x: number, size_y: number, m_eight_Dir: number[][]): { tmp_map: any, result: boolean } {\r\n\tlet ptGrowing = new Point(-1, -1);\r\n\r\n\tlet growPtVec: Point[] = [];\r\n\tgrowPtVec = [];\r\n\tgrowPtVec.push(pt);\r\n\r\n\tif (pt.x < 0 || pt.x >= size_x || pt.y < 0 || pt.y >= size_y) {\r\n\t\treturn {\r\n\t\t\ttmp_map: image,\r\n\t\t\tresult: false\r\n\t\t};\r\n\t}\r\n\r\n\tlet fill_area_size = 0;\r\n\timage[pt.y * size_x + pt.x] = CONSTANTS.BLACK;\r\n\twhile (growPtVec.length > 0) {\r\n\t\tconst currPt = growPtVec.pop()!;\r\n\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tptGrowing = new Point(currPt.x + m_eight_Dir[i][0], currPt.y + m_eight_Dir[i][1]);\r\n\r\n\t\t\tif (ptGrowing.x < 0 || ptGrowing.y < 0 || ptGrowing.x >= size_x || ptGrowing.y >= size_y) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (image[ptGrowing.y * size_x + ptGrowing.x] == 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttmp_map: image,\r\n\t\t\t\t\tresult: true\r\n\t\t\t\t};\r\n\t\t\t} else if (image[ptGrowing.y * size_x + ptGrowing.x] == 80) {\r\n\t\t\t\tgrowPtVec.push(ptGrowing);\r\n\t\t\t\timage[ptGrowing.y * size_x + ptGrowing.x] = CONSTANTS.BLACK;\r\n\t\t\t\tfill_area_size++;\r\n\t\t\t} else {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (fill_area_size <= 150) {\r\n\t\treturn {\r\n\t\t\ttmp_map: image,\r\n\t\t\tresult: true\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\ttmp_map: image,\r\n\t\tresult: false\r\n\t};\r\n}\r\n\r\nfunction filterAreas(image: any, pt: Point, size_x: number, size_y: number, m_eight_Dir: number[][]): { test_map: any } {\r\n\tlet ptGrowing = new Point(-1, -1);\r\n\tlet growPtVec: Point[] = [];\r\n\tgrowPtVec = [];\r\n\tgrowPtVec.push(pt);\r\n\r\n\tif (pt.x < 0 || pt.x >= size_x || pt.y < 0 || pt.y >= size_y) {\r\n\t\treturn {\r\n\t\t\ttest_map: image\r\n\t\t};\r\n\t}\r\n\r\n\timage[pt.y * size_x + pt.x] = 0;\r\n\twhile (growPtVec.length > 0) {\r\n\t\tconst currPt = growPtVec.pop()!;\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tptGrowing = new Point(currPt.x + m_eight_Dir[i][0], currPt.y + m_eight_Dir[i][1]);\r\n\r\n\t\t\tif (ptGrowing.x < 0 || ptGrowing.y < 0 || ptGrowing.x >= size_x || ptGrowing.y >= size_y) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (image[ptGrowing.y * size_x + ptGrowing.x] == 80) {\r\n\t\t\t\tgrowPtVec.push(ptGrowing);\r\n\t\t\t\timage[ptGrowing.y * size_x + ptGrowing.x] = 0;\r\n\t\t\t} else if (image[ptGrowing.y * size_x + ptGrowing.x] == CONSTANTS.BLACK) {\r\n\t\t\t\tlet neighbor_pt = new Point(-1, -1);\r\n\t\t\t\tlet white_flag = false;\r\n\r\n\t\t\t\tfor (let j = 0; j < 8; j++) {\r\n\t\t\t\t\tneighbor_pt = new Point(ptGrowing.x + m_eight_Dir[j][0], ptGrowing.y + m_eight_Dir[j][1]);\r\n\t\t\t\t\tif (image[neighbor_pt.y * size_x + neighbor_pt.x] == CONSTANTS.WHITE) {\r\n\t\t\t\t\t\twhite_flag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (white_flag) {\r\n\t\t\t\t\t\timage[ptGrowing.y * size_x + ptGrowing.x] = CONSTANTS.BLACK;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timage[ptGrowing.y * size_x + ptGrowing.x] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgrowPtVec = [];\r\n\r\n\treturn {\r\n\t\ttest_map: image\r\n\t};\r\n}\r\n\r\nfunction filterIslandPt(dst_img: any, pt_vec: Point[], size_x: number, size_y: number, m_four_Dir: number[][]): { test_map: any } {\r\n\tfor (let i = 0; i < pt_vec.length; i++) {\r\n\t\tif (pt_vec[i].y < 0 || pt_vec[i].y >= size_y || pt_vec[i].x < 0 || pt_vec[i].x >= size_x || dst_img[pt_vec[i].y * size_x + pt_vec[i].x] == 80) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tlet growPtVec: Point[] = [];\r\n\t\tlet changePoints: Point[] = [];\r\n\r\n\t\tgrowPtVec = [];\r\n\t\tchangePoints = [];\r\n\r\n\t\tgrowPtVec.push(pt_vec[i]);\r\n\t\tdst_img[pt_vec[i].y * size_x + pt_vec[i].x] = 80;\r\n\t\tchangePoints.push(pt_vec[i]);\r\n\r\n\t\tlet hasWhiteNeighbor = false;\r\n\t\twhile (growPtVec.length > 0) {\r\n\t\t\tconst currPt = growPtVec.pop()!;\r\n\t\t\tfor (let j = 0; j < 4; j++) {\r\n\t\t\t\tconst tmp_pt = new Point(currPt.x + m_four_Dir[j][0], currPt.y + m_four_Dir[j][1]);\r\n\r\n\t\t\t\tif (tmp_pt.x < 0 || tmp_pt.y < 0 || tmp_pt.x >= size_x || tmp_pt.y >= size_y) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (dst_img[tmp_pt.y * size_x + tmp_pt.x] == CONSTANTS.BLACK) {\r\n\t\t\t\t\tdst_img[tmp_pt.y * size_x + tmp_pt.x] = 80;\r\n\t\t\t\t\tchangePoints.push(tmp_pt);\r\n\t\t\t\t\tgrowPtVec.push(tmp_pt);\r\n\t\t\t\t} else if (dst_img[tmp_pt.y * size_x + tmp_pt.x] == CONSTANTS.WHITE) {\r\n\t\t\t\t\thasWhiteNeighbor = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!hasWhiteNeighbor) {\r\n\t\t\tif (changePoints.length > 1) {\r\n\t\t\t\tfor (let j = 0; j < changePoints.length; j++) {\r\n\t\t\t\t\tdst_img[changePoints[j].y * size_x + changePoints[j].x] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let x = 0; x < size_x; x++) {\r\n\t\tfor (let y = 0; y < size_y; y++) {\r\n\t\t\tif(dst_img[y * size_x + x] == 80) {\r\n\t\t\t\tdst_img[y * size_x + x] = CONSTANTS.BLACK;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\ttest_map: dst_img\r\n\t};\r\n}\r\n\r\nfunction fillNonBoundaryNoise2(nonBoundaryNoise: Point[], rect: Rect, map: any, size_x: number): { nonBoundaryNoise: Point[], map: any } {\r\n\tconst temp_map = [...map];\r\n\r\n\tfor (let i = 0; i < nonBoundaryNoise.length; i++) {\r\n\t\ttemp_map[nonBoundaryNoise[i].x * size_x + nonBoundaryNoise[i].y] = 28;\r\n\t}\r\n\r\n\tconst four_neighbourhood = [[5, 0, 4, 0, 3, 0, 2, 0, 1, 0], [0, 5, 0, 4, 0, 3, 0, 2, 0, 1], [-5, 0, -4, 0, -3, 0, -2, 0, -1, 0], [0, -5, 0, -4, 0, -3, 0, -2, 0, -1]];\r\n\tconst noise_size = nonBoundaryNoise.length;\r\n\tfor (let i = 0; i < noise_size; i++) {\r\n\t\tfor (let k = 0; k < 4; k++) {\r\n\t\t\tconst tmp_idx5 = nonBoundaryNoise[i].y + four_neighbourhood[k][0];\r\n\t\t\tconst tmp_idy5 = nonBoundaryNoise[i].x + four_neighbourhood[k][1];\r\n\r\n\t\t\tconst tmp_idx4 = nonBoundaryNoise[i].y + four_neighbourhood[k][2];\r\n\t\t\tconst tmp_idy4 = nonBoundaryNoise[i].x + four_neighbourhood[k][3];\r\n\r\n\t\t\tconst tmp_idx3 = nonBoundaryNoise[i].y + four_neighbourhood[k][4];\r\n\t\t\tconst tmp_idy3 = nonBoundaryNoise[i].x + four_neighbourhood[k][5];\r\n\r\n\t\t\tconst tmp_idx2 = nonBoundaryNoise[i].y + four_neighbourhood[k][6];\r\n\t\t\tconst tmp_idy2 = nonBoundaryNoise[i].x + four_neighbourhood[k][7];\r\n\r\n\t\t\tconst tmp_idx1 = nonBoundaryNoise[i].y + four_neighbourhood[k][8];\r\n\t\t\tconst tmp_idy1 = nonBoundaryNoise[i].x + four_neighbourhood[k][9];\r\n\r\n\t\t\tif (tmp_idy5 < rect.y || tmp_idy5 >= rect.y + rect.width || tmp_idx5 < rect.x || tmp_idx5 >= rect.x + rect.height ||\r\n            tmp_idy4 < rect.y || tmp_idy4 >= rect.y + rect.width || tmp_idx4 < rect.x || tmp_idx4 >= rect.x + rect.height ||\r\n            tmp_idy3 < rect.y || tmp_idy3 >= rect.y + rect.width || tmp_idx3 < rect.x || tmp_idx3 >= rect.x + rect.height ||\r\n            tmp_idy2 < rect.y || tmp_idy2 >= rect.y + rect.width || tmp_idx2 < rect.x || tmp_idx2 >= rect.x + rect.height ||\r\n            tmp_idy1 < rect.y || tmp_idy1 >= rect.y + rect.width || tmp_idx1 < rect.x || tmp_idx1 >= rect.x + rect.height) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (temp_map[tmp_idy5 * size_x + tmp_idx5] == CONSTANTS.BLACK &&\r\n            temp_map[tmp_idy4 * size_x + tmp_idx4] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy3 * size_x + tmp_idx3] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy2 * size_x + tmp_idx2] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy1 * size_x + tmp_idx1] == CONSTANTS.WHITE) {\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy4, tmp_idx4));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy3, tmp_idx3));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy2, tmp_idx2));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy1, tmp_idx1));\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[tmp_idy4 * size_x + tmp_idx4] == CONSTANTS.BLACK &&\r\n            temp_map[tmp_idy3 * size_x + tmp_idx3] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy2 * size_x + tmp_idx2] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy1 * size_x + tmp_idx1] == CONSTANTS.WHITE) {\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy3, tmp_idx3));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy2, tmp_idx2));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy1, tmp_idx1));\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[tmp_idy3 * size_x + tmp_idx3] == CONSTANTS.BLACK &&\r\n            temp_map[tmp_idy2 * size_x + tmp_idx2] == CONSTANTS.WHITE &&\r\n            temp_map[tmp_idy1 * size_x + tmp_idx1] == CONSTANTS.WHITE) {\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy2, tmp_idx2));\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy1, tmp_idx1));\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (temp_map[tmp_idy2 * size_x + tmp_idx2] == CONSTANTS.BLACK && temp_map[tmp_idy1 * size_x + tmp_idx1] == CONSTANTS.WHITE) {\r\n\t\t\t\tnonBoundaryNoise.push(new Point(tmp_idy1, tmp_idx1));\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let i = 0; i < nonBoundaryNoise.length; i++) {\r\n\t\tmap[nonBoundaryNoise[i].x * size_x + nonBoundaryNoise[i].y] = CONSTANTS.BLACK;\r\n\t}\r\n\r\n\treturn {\r\n\t\tnonBoundaryNoise: nonBoundaryNoise,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction roomColorByChainAndDoor(area_info: RoomInfo[], map: any, size_x: number, size_y: number, x_min: number, y_min: number, resolution: number): { map: any } {\r\n\tconst length = size_x * size_y;\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tif (map[i] === CONSTANTS.BLACK) map[i] = -1;\r\n\t\telse if (map[i] === CONSTANTS.WHITE) map[i] = 1;\r\n\t}\r\n\r\n\t// 1.\r\n\tlet fill_array: Point[] = [];\r\n\tlet extend_door_point: Point[] = [];\r\n\tconst fillInsidColorAndGetBound_result = fillInsidColorAndGetBound(area_info, fill_array, extend_door_point, map, size_x, size_y, x_min, y_min, resolution);\r\n\tarea_info = fillInsidColorAndGetBound_result.area_info;\r\n\tfill_array = fillInsidColorAndGetBound_result.fill_array;\r\n\textend_door_point = fillInsidColorAndGetBound_result.extend_door_point;\r\n\tmap = fillInsidColorAndGetBound_result.map;\r\n\r\n\t// 2.\r\n\tlet close_array: Point[] = [];\r\n\tconst floodfillDoorAndChainPoint_result = floodfillDoorAndChainPoint(fill_array, close_array, extend_door_point, map, size_x, size_y);\r\n\tfill_array = floodfillDoorAndChainPoint_result.fill_array;\r\n\tclose_array = floodfillDoorAndChainPoint_result.close_array;\r\n\textend_door_point = floodfillDoorAndChainPoint_result.extend_door_point;\r\n\tmap = floodfillDoorAndChainPoint_result.map;\r\n\r\n\t// 3.\r\n\tlet fill_door_point: Point[] = [];\r\n\tlet color_id_list: number[] = [];\r\n\tarea_info.map(area => {\r\n\t\tcolor_id_list.push(area.tid);\r\n\t});\r\n\tconst getEachDoorPointColor_result = getEachDoorPointColor(extend_door_point, fill_door_point, color_id_list, map, size_x, size_y);\r\n\textend_door_point = getEachDoorPointColor_result.extend_door_point;\r\n\tfill_door_point = getEachDoorPointColor_result.fill_door_point;\r\n\tcolor_id_list = getEachDoorPointColor_result.color_id_list;\r\n\tmap = getEachDoorPointColor_result.map;\r\n\r\n\t// 4.\r\n\tconst floodfillEachPoint_result = floodfillEachPoint(fill_door_point, close_array, map, size_x, size_y);\r\n\tfill_door_point = floodfillEachPoint_result.fill_array;\r\n\tclose_array = floodfillEachPoint_result.close_array;\r\n\tmap = floodfillEachPoint_result.map;\r\n\r\n\t// 5.\r\n\tconst floodFillEdgeArray_result = floodFillEdgeArray(close_array, map, size_x, size_y);\r\n\tmap = floodFillEdgeArray_result.map;\r\n\r\n\treturn {\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction floodFillEdgeArray(edge_array: Point[], map: any, size_x: number, size_y: number): { map: any } {\r\n\tlet index = 0;\r\n\twhile (index < edge_array.length) {\r\n\t\tconst item = edge_array[index];\r\n\t\tconst root_col = item.x;\r\n\t\tconst root_row = item.y;\r\n\t\tindex++;\r\n\r\n\t\tif (map[root_row * size_x + root_col] > 1) {\r\n\t\t\tfor (let di = 1; di <= 4; di++) {\r\n\t\t\t\tif (root_row + di < 0 || root_row + di >= size_y || root_col < 0 || root_col >= size_x) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (map[(root_row + di) * size_x + root_col] == 1) {\r\n\t\t\t\t\t\tconst result1 = fillMapByOffsetPoint(root_row, root_col, di, 0, map, size_x, size_y);\r\n\t\t\t\t\t\tmap = result1.map;\r\n\t\t\t\t\t} else if (map[(root_row + di) * size_x + root_col] == 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let di = -1; di >= -4; di--) {\r\n\t\t\t\tif (root_row + di < 0 || root_row + di >= size_y || root_col < 0 || root_col >= size_x) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (map[(root_row + di) * size_x + root_col] == 1) {\r\n\t\t\t\t\t\tconst result2 = fillMapByOffsetPoint(root_row, root_col, di, 0, map, size_x, size_y);\r\n\t\t\t\t\t\tmap = result2.map;\r\n\t\t\t\t\t} else if (map[(root_row + di) * size_x + root_col] == 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let dj = 1; dj <= 4; dj++) {\r\n\t\t\t\tif (root_row < 0 || root_row >= size_y || root_col + dj < 0 || root_col + dj >= size_x) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (map[root_row * size_x + (root_col + dj)] == 1) {\r\n\t\t\t\t\t\tconst result3 = fillMapByOffsetPoint(root_row, root_col, 0, dj, map, size_x, size_y);\r\n\t\t\t\t\t\tmap = result3.map;\r\n\t\t\t\t\t} else if (map[root_row * size_x + (root_col + dj)] == 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let dj = -1; dj >= -4; dj--) {\r\n\t\t\t\tif (root_row < 0 || root_row >= size_y || root_col + dj < 0 || root_col + dj >= size_x) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (map[root_row * size_x + (root_col + dj)] == 1) {\r\n\t\t\t\t\t\tconst result4 = fillMapByOffsetPoint(root_row, root_col, 0, dj, map, size_x, size_y);\r\n\t\t\t\t\t\tmap = result4.map;\r\n\t\t\t\t\t} else if (map[root_row * size_x + (root_col + dj)] == 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tmap: map,\r\n\t};\r\n}\r\n\r\nfunction fillMapByOffsetPoint(root_row: number, root_col: number, off_y: number, off_x: number, map: any, size_x: number, size_y: number) {\r\n\tconst value = map[root_row * size_x + root_col];\r\n\tconst temp_point = new Point(root_col + off_x, root_row + off_y);\r\n\tconst scanLineFloodFill_result = scanLineFloodFill(map, temp_point, 1, value, size_x, size_y);\r\n\treturn {\r\n\t\tmap: scanLineFloodFill_result.result\r\n\t};\r\n}\r\n\r\nfunction fillInsidColorAndGetBound(area_info: RoomInfo[], fill_array: Point[], extend_door_point: Point[], map: any, size_x: number, size_y: number, x_min: number, y_min: number, resolution: number): { area_info: RoomInfo[], fill_array: Point[], extend_door_point: Point[], map: any } {\r\n\tlet dst = new Array(size_y * size_x).fill(1);\r\n\r\n\t// 0.\r\n\tconst chain_infor_list = [];\r\n\tconst color_id_list = [];\r\n\tconst center_pose_list = [];\r\n\tconst door_lines = [];\r\n\tconst door_area_ids = [];\r\n\tfor (const area of area_info) {\r\n\t\tchain_infor_list.push(area.chain_infor);\r\n\t\tcolor_id_list.push(area.tid);\r\n\t\tcenter_pose_list.push(area.center_pose);\r\n\t\tfor (let i = 0; i < area.door_info.length; i++) {\r\n\t\t\tdoor_lines.push(area.door_info[i].door_point);\r\n\t\t\tdoor_area_ids.push(area.door_info[i].area_id);\r\n\t\t}\r\n\t}\r\n\r\n\t// 1.\r\n\tlet inside_color_map = [...dst];\r\n\tconst getInsideColorMap_result = getInsideColorMap(inside_color_map, chain_infor_list, color_id_list, center_pose_list, size_x, size_y, x_min, y_min, resolution);\r\n\tinside_color_map = getInsideColorMap_result.inside_color_map;\r\n\r\n\t// 2.  -value\r\n\tfor (let i = 0; i < chain_infor_list.length; ++i) {\r\n\t\tfor (const point of chain_infor_list[i]) {\r\n\t\t\tif (point.chain_point.y < 0 || point.chain_point.x < 0 || point.chain_point.y >= size_y || point.chain_point.x >= size_x) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tarea_info: area_info,\r\n\t\t\t\t\tfill_array: fill_array,\r\n\t\t\t\t\textend_door_point: extend_door_point,\r\n\t\t\t\t\tmap: map\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst row = point.chain_point.y;\r\n\t\t\tconst col = point.chain_point.x;\r\n\t\t\tdst[row * size_x + col] = -1 * color_id_list[i]; // \r\n\t\t}\r\n\t}\r\n\r\n\t// 2.0\r\n\tconst init_seed = { x: 1, y: 1 };\r\n\tconst scanLineFloodFill_result = scanLineFloodFill(dst, init_seed, 1, 0, size_x, size_y);\r\n\tdst = scanLineFloodFill_result.result;\r\n\r\n\t// 3.\r\n\tconst fillExtendDoorLineInMap_result = fillExtendDoorLineInMap(dst, inside_color_map, door_lines, door_area_ids, extend_door_point, size_x, size_y);\r\n\tdst = fillExtendDoorLineInMap_result.fill_map;\r\n\tinside_color_map = fillExtendDoorLineInMap_result.color_map;\r\n\textend_door_point = fillExtendDoorLineInMap_result.extend_door_point;\r\n\r\n\tconst four_neigh = [[-1, 0], [1, 0], [0, -1], [0, 1]];\r\n\r\n\t// 4.\r\n\tfor (let i = 0; i < color_id_list.length; ++i) {\r\n\t\tif (init_seed.y >= 0 && init_seed.y < size_y && init_seed.x >= 0 && init_seed.x < size_x && dst[init_seed.y * size_x + init_seed.x] !== 1) { // \r\n\t\t\tdst[init_seed.y * size_x + init_seed.x] = 1;\r\n\t\t}\r\n\t\tinit_seed.x = x2idx(center_pose_list[i].x, x_min, resolution);\r\n\t\tinit_seed.y = y2idx(center_pose_list[i].y, y_min, resolution);\r\n\t\tconst scanLineFloodFill_result2 = scanLineFloodFill(dst, init_seed, 1, color_id_list[i], size_x, size_y);\r\n\t\tdst = scanLineFloodFill_result2.result;\r\n\t}\r\n\r\n\t// 5.\r\n\tfor (let i = 0; i < chain_infor_list.length; ++i) {\r\n\t\tconst single_array = [];\r\n\t\tfor (const point of chain_infor_list[i]) {\r\n\t\t\tif (dst[point.chain_point.y * size_x + point.chain_point.x] !== CONSTANTS.BOUNDARY) {\r\n\t\t\t\tfor (let k = 0; k < 4; ++k) {\r\n\t\t\t\t\tconst tmp_row = point.chain_point.y + four_neigh[k][0];\r\n\t\t\t\t\tconst tmp_col = point.chain_point.x + four_neigh[k][1];\r\n\t\t\t\t\tif (dst[tmp_row * size_x + tmp_col] === color_id_list[i]) {\r\n\t\t\t\t\t\tconst new_p = new Point(point.chain_point.x, point.chain_point.y);\r\n\t\t\t\t\t\tsingle_array.push(new_p);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (const point of single_array) { // color_id\r\n\t\t\tdst[point.y * size_x + point.x] = color_id_list[i];\r\n\t\t}\r\n\t\tfill_array.push(...single_array);\r\n\t}\r\n\r\n\tfor (let i = 0; i < size_y; i++) {\r\n\t\tfor (let j = 0; j < size_x; j++) {\r\n\t\t\tconst index = i * size_x + j;\r\n\t\t\tif (map[index] === 1 && (dst[index] > 1 || dst[index] === CONSTANTS.BOUNDARY)) {\r\n\t\t\t\tmap[index] = dst[index];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tarea_info: area_info,\r\n\t\tfill_array: fill_array,\r\n\t\textend_door_point: extend_door_point,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction getInsideColorMap(inside_color_map: any, chain_infor_list: ChainPoint[][], color_id_list: number[], center_pose_list: Point[], size_x: number, size_y: number, x_min: number, y_min: number, resolution: number): { inside_color_map: any } {\r\n\tfor (let i = 0; i < chain_infor_list.length; ++i) {\r\n\t\tfor (const point of chain_infor_list[i]) {\r\n\t\t\tif (point.chain_point.y < 0 || point.chain_point.x < 0 || point.chain_point.y >= size_y || point.chain_point.x >= size_x) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinside_color_map: inside_color_map\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst row = point.chain_point.y;\r\n\t\t\tconst col = point.chain_point.x;\r\n\t\t\tconst rowOffset = row * size_x;\r\n\t\t\tinside_color_map[rowOffset + col] = color_id_list[i]; // \r\n\t\t}\r\n\t}\r\n\r\n\tconst init_seed = { x: 1, y: 1 };\r\n\tconst scanLineFloodFill_result = scanLineFloodFill(inside_color_map, init_seed, 1, 0, size_x, size_y);\r\n\tinside_color_map = scanLineFloodFill_result.result;\r\n\r\n\tfor (let i = 0; i < color_id_list.length; ++i) {\r\n\t\tif (init_seed.y >= 0 && init_seed.y < size_y && init_seed.x >= 0 && init_seed.x < size_x &&\r\n        inside_color_map[init_seed.y * size_x + init_seed.x] !== 1) { // \r\n\t\t\tinside_color_map[init_seed.y * size_x + init_seed.x] = 1;\r\n\t\t}\r\n\t\tinit_seed.x = x2idx(center_pose_list[i].x, x_min, resolution);\r\n\t\tinit_seed.y = y2idx(center_pose_list[i].y, y_min, resolution);\r\n\t\tconst scanLineFloodFill_result2 = scanLineFloodFill(inside_color_map, init_seed, 1, color_id_list[i], size_x, size_y);\r\n\t\tinside_color_map = scanLineFloodFill_result2.result;\r\n\t}\r\n\r\n\treturn {\r\n\t\tinside_color_map: inside_color_map\r\n\t};\r\n}\r\n\r\nfunction x2idx(x: number, x_min: number, resolution: number) {\r\n\treturn Math.floor((x - x_min) / resolution);\r\n}\r\n\r\nfunction y2idx(y: number, y_min: number, resolution: number) {\r\n\treturn Math.floor((y - y_min) / resolution);\r\n}\r\n\r\nfunction fillExtendDoorLineInMap(fill_map: any, color_map: any, door_lines: Point[][], door_area_ids: number[][], extend_door_point: Point[], size_x: number, size_y: number): { fill_map: any, color_map: any, extend_door_point: Point[] } {\r\n\tfor (let i = 0; i < door_lines.length; ++i) {\r\n\t\tconst door_point = door_lines[i];\r\n\t\tconst door_id = door_area_ids[i];\r\n\t\tconst mid = Math.floor(door_point.length / 2);\r\n\t\tfor (let j = mid; j >= 0; --j) {\r\n\t\t\tconst point = door_point[j];\r\n\t\t\tlet color_val = color_map[point.y * size_x + point.x]; // break\r\n\t\t\tif (color_val < -9) {\r\n\t\t\t\tcolor_val = -1 * color_val;\r\n\t\t\t}\r\n\t\t\tif (point.x < 0 || point.x >= size_x || point.y < 0 || point.y >= size_y) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tconst notIndeque_result = notIndeque(door_id, color_val);\r\n\t\t\tif (color_val > 1 && notIndeque_result.result) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tfill_map[point.y * size_x + point.x] = CONSTANTS.BOUNDARY;\r\n\t\t\textend_door_point.push(point);\r\n\t\t}\r\n\r\n\t\tfor (let j = mid + 1; j < door_point.length; ++j) {\r\n\t\t\tconst point = door_point[j];\r\n\t\t\tlet color_val = color_map[point.y * size_x + point.x]; // break\r\n\t\t\tif (color_val < -9) {\r\n\t\t\t\tcolor_val = -1 * color_val;\r\n\t\t\t}\r\n\t\t\tif (point.x < 0 || point.x >= size_x || point.y < 0 || point.y >= size_y) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tconst notIndeque_result = notIndeque(door_id, color_val);\r\n\t\t\tif (color_val > 1 && notIndeque_result.result) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tfill_map[point.y * size_x + point.x] = CONSTANTS.BOUNDARY;\r\n\t\t\textend_door_point.push(point);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tfill_map: fill_map,\r\n\t\tcolor_map: color_map,\r\n\t\textend_door_point: extend_door_point\r\n\t};\r\n}\r\n\r\nfunction notIndeque(find_list: any, search_num: any) {\r\n\tfor (const num of find_list) {\r\n\t\tif (num === search_num) {\r\n\t\t\treturn {\r\n\t\t\t\tresult: false\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tresult: true\r\n\t};\r\n}\r\n\r\nfunction floodfillDoorAndChainPoint(fill_array: Point[], close_array: Point[], extend_door_point: Point[], map: any, size_x: number, size_y: number): { fill_array: Point[], close_array: Point[], extend_door_point: Point[], map: any } {\r\n\tconst eight_neighbourhood = [[0, -1], [0, 1], [-1, 0], [1, 0]]; // \r\n\r\n\twhile (fill_array.length > 0) {\r\n\t\tlet find_flag = false;\r\n\t\tlet fill_count = 0;\r\n\t\tconst root_col = fill_array[0].x;\r\n\t\tconst root_row = fill_array[0].y;\r\n\t\tfill_array.shift();\r\n\r\n\t\tfor (let i = 0; i < 4; ++i) {\r\n\t\t\tconst tmp_x = root_col + eight_neighbourhood[i][0];\r\n\t\t\tconst tmp_y = root_row + eight_neighbourhood[i][1];\r\n\t\t\tif (tmp_y < 0 || tmp_y >= size_y || tmp_x < 0 || tmp_x >= size_x) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (map[tmp_y * size_x + tmp_x] === 1) {\r\n\t\t\t\tif (map[root_row * size_x + root_col] > 1) {\r\n\t\t\t\t\tfind_flag = true;\r\n\t\t\t\t\tmap[tmp_y * size_x + tmp_x] = map[root_row * size_x + root_col];\r\n\t\t\t\t\tconst temp_point = new Point(tmp_x, tmp_y);\r\n\t\t\t\t\tfill_array.push(temp_point);\r\n\t\t\t\t} else if (map[root_row * size_x + root_col] === CONSTANTS.BOUNDARY) {\r\n\t\t\t\t\tlet opp_x = -1, opp_y = -1;\r\n\t\t\t\t\tif (i === 0) {\r\n\t\t\t\t\t\topp_x = root_col + eight_neighbourhood[1][0];\r\n\t\t\t\t\t\topp_y = root_row + eight_neighbourhood[1][1];\r\n\t\t\t\t\t} else if (i === 1) {\r\n\t\t\t\t\t\topp_x = root_col + eight_neighbourhood[0][0];\r\n\t\t\t\t\t\topp_y = root_row + eight_neighbourhood[0][1];\r\n\t\t\t\t\t} else if (i === 2) {\r\n\t\t\t\t\t\topp_x = root_col + eight_neighbourhood[3][0];\r\n\t\t\t\t\t\topp_y = root_row + eight_neighbourhood[3][1];\r\n\t\t\t\t\t} else if (i === 3) {\r\n\t\t\t\t\t\topp_x = root_col + eight_neighbourhood[2][0];\r\n\t\t\t\t\t\topp_y = root_row + eight_neighbourhood[2][1];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (opp_x >= 0 && opp_x < size_x && opp_y >= 0 && opp_y < size_y) {\r\n\t\t\t\t\t\tif (map[opp_y * size_x + opp_x] === CONSTANTS.BOUNDARY) {\r\n\t\t\t\t\t\t\tmap[tmp_y * size_x + tmp_x] = map[root_row * size_x + root_col];\r\n\t\t\t\t\t\t\tconst temp_point = new Point(tmp_x, tmp_y);\r\n\t\t\t\t\t\t\tfill_array.push(temp_point);\r\n\t\t\t\t\t\t\textend_door_point.push(temp_point);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (map[tmp_y * size_x + tmp_x] > 1) {\r\n\t\t\t\tfill_count++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!find_flag && fill_count < 4) {\r\n\t\t\t// \r\n\t\t\tconst temp_point = new Point(root_col, root_row);\r\n\t\t\tclose_array.push(temp_point); // \r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tfill_array: fill_array,\r\n\t\tclose_array: close_array,\r\n\t\textend_door_point: extend_door_point,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction getEachDoorPointColor(extend_door_point: any, fill_door_point: any, color_id_list: any, map: any, size_x: number, size_y: number) {\r\n\t// \r\n\t// 0. colorIdindex\r\n\tconst color_id_map = new Map();\r\n\tfor (let i = 0; i < color_id_list.length; ++i) {\r\n\t\tconst color = color_id_list[i];\r\n\t\tcolor_id_map.set(color, i + 1);\r\n\t}\r\n\tconst fill_point_color = [];\r\n\tconst supple_fill_point = []; //\r\n\r\n\t// 1.colorID\r\n\tconst four_neighbour_direct = [[0, -1], [0, 1], [-1, 0], [1, 0]]; // \r\n\tfor (let i = 0; i < extend_door_point.length; ++i) {\r\n\t\tconst point = extend_door_point[i];\r\n\t\tconst row = point.y;\r\n\t\tconst col = point.x;\r\n\t\tconst rowOffset = row * size_x;\r\n\t\tif (map[rowOffset + col] === CONSTANTS.BOUNDARY) {\r\n\t\t\tconst direct_color: number[] = [];\r\n\t\t\tconst color_map = new Map<number, number>();\r\n\t\t\tfor (let j = 0; j < 4; ++j) {\r\n\t\t\t\tconst x = point.x + four_neighbour_direct[j][0];\r\n\t\t\t\tconst y = point.y + four_neighbour_direct[j][1];\r\n\t\t\t\tlet cell_value = 0;\r\n\t\t\t\tif (!(x < 0 || y < 0 || x >= size_x || y >= size_y)) {\r\n\t\t\t\t\tcell_value = map[y * size_x + x];\r\n\t\t\t\t\tif (cell_value >= 10) {\r\n\t\t\t\t\t\tcolor_map.set(cell_value, (color_map.get(cell_value) || 0) + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdirect_color.push(cell_value);\r\n\t\t\t}\r\n\t\t\tif (direct_color.length !== 4) {\r\n\t\t\t\t// \r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif ((direct_color[0] === CONSTANTS.BOUNDARY || direct_color[1] === CONSTANTS.BOUNDARY) && (direct_color[2] === CONSTANTS.BOUNDARY || direct_color[3] === CONSTANTS.BOUNDARY)) {\r\n\t\t\t\tsupple_fill_point.push(point);\r\n\t\t\t} else if ((direct_color[0] === CONSTANTS.BOUNDARY || direct_color[1] === CONSTANTS.BOUNDARY) && (direct_color[0] === -1 || direct_color[1] === -1) || (direct_color[2] === CONSTANTS.BOUNDARY || direct_color[3] === CONSTANTS.BOUNDARY) && (direct_color[2] === -1 || direct_color[3] === -1)) {\r\n\t\t\t\tsupple_fill_point.push(point);\r\n\t\t\t} else {\r\n\t\t\t\tlet max_color = -1;\r\n\t\t\t\tlet max_index = -1;\r\n\t\t\t\tlet max_num = 0;\r\n\r\n\t\t\t\tcolor_map.forEach((count, color_id) => {\r\n\t\t\t\t\tif (count >= max_num) {\r\n\t\t\t\t\t\tif (!color_id_map.has(color_id)) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (count > max_num || (color_id_map.get(color_id) > max_index)) {\r\n\t\t\t\t\t\t\tmax_num = count;\r\n\t\t\t\t\t\t\tmax_index = color_id_map.get(color_id);\r\n\t\t\t\t\t\t\tmax_color = color_id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (max_color !== -1) {\r\n\t\t\t\t\tfill_door_point.push(point);\r\n\t\t\t\t\tfill_point_color.push(max_color);\r\n\t\t\t\t\tif (fill_door_point.length !== fill_point_color.length) { //\r\n\t\t\t\t\t\tmap[rowOffset + col] = max_color;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (fill_door_point.length === fill_point_color.length) {\r\n\t\tfor (let i = 0; i < fill_door_point.length; ++i) {\r\n\t\t\tconst p_t = fill_door_point[i];\r\n\t\t\tmap[p_t.y * size_x + p_t.x] = fill_point_color[i];\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\tfor (let i = 0; i < supple_fill_point.length; ++i) {\r\n\t\tconst point = supple_fill_point[i];\r\n\t\tconst row = point.y;\r\n\t\tconst col = point.x;\r\n\r\n\t\tconst rowOffset = row * size_x;\r\n\t\tif (map[rowOffset + col] === CONSTANTS.BOUNDARY || map[rowOffset + col] === 1) {\r\n\t\t\t//\r\n\t\t\tmap[rowOffset + col] = 1;\r\n\t\t\tconst color_map = new Map<number, number>();\r\n\t\t\tfor (let j = 0; j < 4; ++j) {\r\n\t\t\t\t// 4\r\n\t\t\t\tconst x = point.x + four_neighbour_direct[j][0];\r\n\t\t\t\tconst y = point.y + four_neighbour_direct[j][1];\r\n\t\t\t\tif (!(x < 0 || y < 0 || x >= size_x || y >= size_y)) {\r\n\t\t\t\t\tconst cell_value = map[y * size_x + x];\r\n\t\t\t\t\tif (cell_value >= 10) {\r\n\t\t\t\t\t\tcolor_map.set(cell_value, (color_map.get(cell_value) || 0) + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet max_color = -1;\r\n\t\t\tlet max_index = -1;\r\n\t\t\tlet max_num = 0;\r\n\r\n\t\t\tcolor_map.forEach((count, color_id) => {\r\n\t\t\t\tif (count >= max_num) {\r\n\t\t\t\t\tif (!color_id_map.has(color_id)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (count > max_num || (color_id_map.get(color_id) > max_index)) {\r\n\t\t\t\t\t\tmax_num = count;\r\n\t\t\t\t\t\tmax_index = color_id_map.get(color_id);\r\n\t\t\t\t\t\tmax_color = color_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (max_color !== -1) {\r\n\t\t\t\tmap[rowOffset + col] = max_color;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlet index = 0;\r\n\twhile (index < extend_door_point.length) { // -21\r\n\t\tconst point = extend_door_point[index];\r\n\t\tindex++;\r\n\t\tif (map[point.y * size_x + point.x] === CONSTANTS.BOUNDARY) {\r\n\t\t\tmap[point.y * size_x + point.x] = 1;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\textend_door_point: extend_door_point,\r\n\t\tfill_door_point: fill_door_point,\r\n\t\tcolor_id_list: color_id_list,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\nfunction floodfillEachPoint(fill_array: Point[], close_array: Point[], map: any, size_x: number, size_y: number): { fill_array: Point[], close_array: Point[], map: any } {\r\n\twhile (fill_array.length > 0) {\r\n\t\tlet find_flag = false;\r\n\t\tlet fill_count = 0;\r\n\t\tconst root_col = fill_array[0].x;\r\n\t\tconst root_row = fill_array[0].y;\r\n\t\tfill_array.shift();\r\n\r\n\t\tfor (let di = -1; di <= 1; di++) {\r\n\t\t\tfor (let dj = -1; dj <= 1; dj++) {\r\n\t\t\t\tif (di !== 0 && dj !== 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (root_row + di < 0 || root_row + di >= size_y || root_col + dj < 0 || root_col + dj >= size_x) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (map[(root_row + di) * size_x + root_col + dj] === 1) {\r\n\t\t\t\t\t\tif (map[root_row * size_x + root_col] > 1) {\r\n\t\t\t\t\t\t\tfind_flag = true;\r\n\t\t\t\t\t\t\tmap[(root_row + di) * size_x + root_col + dj] = map[root_row * size_x + root_col];\r\n\t\t\t\t\t\t\tconst temp_point = new Point(root_col + dj, root_row + di);\r\n\t\t\t\t\t\t\tfill_array.push(temp_point);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (map[(root_row + di) * size_x + root_col + dj] > 1) {\r\n\t\t\t\t\t\tfill_count++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!find_flag && fill_count < 4) {\r\n\t\t\tconst temp_point = new Point(root_col, root_row);\r\n\t\t\tclose_array.push(temp_point);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tfill_array: fill_array,\r\n\t\tclose_array: close_array,\r\n\t\tmap: map\r\n\t};\r\n}\r\n\r\n\r\nfunction scanLineFloodFill(dst: any, initial_seed: Point, raw_value: number, new_value: number, size_x: number, size_y: number): { result: any } {\r\n\tlet scan_line_seed: Point[] = [];\r\n\tscan_line_seed.push(initial_seed);\r\n\r\n\tlet tempDst: any;\r\n\tlet index = 0;\r\n\twhile (index < scan_line_seed.length) {\r\n\t\tconst seed = scan_line_seed[index];\r\n\t\tindex++;\r\n\t\tconst result1 = floodFillLine(dst, seed, -1, raw_value, new_value, size_x);\r\n\t\tconst x_left = result1.boundary;\r\n\t\tconst result2 = floodFillLine(result1.dst, seed, 1, raw_value, new_value, size_x);\r\n\t\tconst x_right = result2.boundary;\r\n\t\ttempDst = result2.dst;\r\n\r\n\t\tconst searchLineForNewSeed_result1 = searchLineForNewSeed(result2.dst, x_left, x_right, seed.y - 1, raw_value, scan_line_seed, size_x, size_y);\r\n\t\tscan_line_seed = searchLineForNewSeed_result1.result;\r\n\t\tconst searchLineForNewSeed_result2 = searchLineForNewSeed(result2.dst, x_left, x_right, seed.y + 1, raw_value, scan_line_seed, size_x, size_y);\r\n\t\tscan_line_seed = searchLineForNewSeed_result2.result;\r\n\t}\r\n\r\n\treturn {result: tempDst};\r\n}\r\n\r\nfunction floodFillLine(dst: any, initial_seed: any, direction: number, raw_value: number, new_value: number, size_x: number) {\r\n\tconst row = initial_seed.y;\r\n\tlet col = initial_seed.x;\r\n\tlet boundary = col;\r\n\r\n\tif (direction > 0) {\r\n\t\tcol += direction;\r\n\t}\r\n\r\n\twhile (col >= 0 && col < size_x) {\r\n\t\tif (dst[row * size_x + col] == raw_value) {\r\n\t\t\tboundary = col;\r\n\t\t\tdst[row * size_x + col] = new_value;\r\n\t\t\tcol += direction;\r\n\t\t} else {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tdst: dst,\r\n\t\tboundary: boundary\r\n\t};\r\n}\r\n\r\nfunction searchLineForNewSeed(dst: any, x_left: number, x_right: number, line_row: number, raw_value: number, scan_line_seed: any, size_x: number, size_y: number) {\r\n\tif (line_row < 0 || line_row > size_y - 1) {\r\n\t\treturn {result: scan_line_seed};\r\n\t}\r\n\r\n\tlet x_right_copy = x_right;\r\n\r\n\tlet is_find_seed = false;\r\n\twhile (x_right_copy >= x_left) {\r\n\t\tif (dst[line_row * size_x + x_right_copy] == raw_value) {\r\n\t\t\tif (!is_find_seed) {\r\n\t\t\t\tconst seed = new Point(x_right_copy, line_row);\r\n\t\t\t\tscan_line_seed.push(seed);\r\n\t\t\t\tis_find_seed = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tis_find_seed = false;\r\n\t\t}\r\n\r\n\t\tx_right_copy--;\r\n\t}\r\n\treturn {result: scan_line_seed};\r\n}\r\n\r\nfunction fillInternalObstacles(map: any, tRect: Rect, size_x: number): { result: any } {\r\n\tlet contour: Point[] = [];\r\n\tlet internal_obstacles: Point[] = [];\r\n\tlet contour_map = [...map];\r\n\tconst result1 = extractExternalContoursNewStrategy(contour_map, contour, tRect, size_x);\r\n\tcontour_map = result1.temp_map;\r\n\tcontour = result1.contour;\r\n\r\n\tconst result2 = findContourConnectComponent(contour_map, contour, tRect, size_x);\r\n\tcontour_map = result2.temp_map;\r\n\tcontour = result2.contour;\r\n\r\n\tconst contour_map_result = fillBlackComponent(contour_map, contour, 30, size_x);\r\n\tcontour_map = contour_map_result.result;\r\n\r\n\tconst findInternalObstacles_result = findInternalObstacles(contour_map, internal_obstacles, tRect, size_x);\r\n\tinternal_obstacles = findInternalObstacles_result.result;\r\n\r\n\tconst map_result = fillBlackComponent(map, internal_obstacles, -9, size_x);\r\n\tmap = map_result.result;\r\n\r\n\treturn {result: map};\r\n}\r\n\r\nfunction findContourConnectComponent(temp_map: any, contour: Point[], rect: Rect, size_x: number): { temp_map: any, contour: Point[] } {\r\n\tconst eight_neighbourhood = [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, 1], [1, 1], [1, -1], [-1, -1]];\r\n\tconst temp_contour = [...contour];\r\n\r\n\tconst isInBounds = (x: number, y: number): boolean => (\r\n\t\tx >= rect.x &&\r\n      x < rect.x + rect.height &&\r\n      y >= rect.y &&\r\n      y < rect.y + rect.width\r\n\t);\r\n\r\n\twhile(temp_contour.length != 0)\r\n\t{\r\n\t\tconst seed = temp_contour.shift()!;\r\n\t\tfor(let k = 0; k < 8; k++)\r\n\t\t{\r\n\t\t\tconst temp_idy = seed.x + eight_neighbourhood[k][0];\r\n\t\t\tconst temp_idx = seed.y + eight_neighbourhood[k][1];\r\n\r\n\t\t\tif(!isInBounds(temp_idx, temp_idy))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(temp_map[temp_idy * size_x + temp_idx] == CONSTANTS.BLACK)\r\n\t\t\t{\r\n\t\t\t\ttemp_map[temp_idy * size_x + temp_idx] = 30;\r\n\r\n\t\t\t\ttemp_contour.push(new Point(temp_idy, temp_idx));\r\n\t\t\t\tcontour.push(new Point(temp_idy, temp_idx));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\ttemp_map: temp_map,\r\n\t\tcontour: contour\r\n\t};\r\n}\r\n\r\nfunction findInternalObstacles(temp_map: any, point_deque: Point[], rect: Rect, size_x: number): { result: Point[] } {\r\n\tfor(let idy = rect.y; idy < rect.y + rect.width; idy++)\r\n\t{\r\n\t\tfor(let idx = rect.x; idx < rect.x + rect.height; idx++)\r\n\t\t{\r\n\t\t\tif(temp_map[idy * size_x + idx] == CONSTANTS.BLACK)\r\n\t\t\t\tpoint_deque.push(new Point(idy, idx));\r\n\t\t}\r\n\t}\r\n\treturn {result: point_deque};\r\n}\r\n\r\n\r\n\r\n\r\n"]}