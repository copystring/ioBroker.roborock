{"version":3,"file":"MapBuilder.test.js","sourceRoot":"","sources":["../../../../src/lib/map/b01/MapBuilder.test.ts"],"names":[],"mappings":";;AAAA,+BAA8B;AAC9B,iCAAqC;AAErC,qEAAqE;AACrE,2EAA2E;AAC3E,MAAM,UAAU,GAAG,EAAE,CAAC,CAAC,WAAW;AAElC,SAAS,OAAO,CAAC,EAAU,EAAE,EAAU,EAAE,IAAY,EAAE,IAAY,EAAE,KAAa;IACjF,MAAM,EAAE,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,UAAU,GAAG,GAAG,CAAC;IAC1C,MAAM,EAAE,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC;IAClD,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;AACzB,CAAC;AAED,IAAA,gBAAQ,EAAC,4BAA4B,EAAE,GAAG,EAAE;IAC3C,MAAM,IAAI,GAAG,CAAC,CAAC;IACf,MAAM,IAAI,GAAG,CAAC,CAAC;IACf,MAAM,KAAK,GAAG,GAAG,CAAC;IAElB,IAAA,UAAE,EAAC,2CAA2C,EAAE,GAAG,EAAE;QACpD,gCAAgC;QAChC,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAC3C,IAAA,aAAM,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;IAEH,IAAA,UAAE,EAAC,kCAAkC,EAAE,GAAG,EAAE;QAC3C,gBAAgB;QAChB,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAC5C,IAAA,aAAM,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;IAEH,IAAA,UAAE,EAAC,8CAA8C,EAAE,GAAG,EAAE;QACvD,gDAAgD;QAChD,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAC3C,IAAA,aAAM,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC;IAEH,IAAA,UAAE,EAAC,2BAA2B,EAAE,GAAG,EAAE;QACpC,+BAA+B;QAC/B,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACjD,IAAA,aAAM,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import { expect } from \"chai\";\r\nimport { describe, it } from \"mocha\";\r\n\r\n// Replicating the MapBuilder \"toPixel\" logic for regression testing.\r\n// Logic confirms alignment: X centered (+0.5), Y flipped and shifted (-1).\r\nconst RESOLUTION = 50; // mm/pixel\r\n\r\nfunction toPixel(wx: number, wy: number, minX: number, minY: number, sizeY: number) {\r\n\tconst px = (wx - minX) / RESOLUTION + 0.5;\r\n\tconst py = sizeY - 1 - ((wy - minY) / RESOLUTION);\r\n\treturn { x: px, y: py };\r\n}\r\n\r\ndescribe(\"MapBuilder B01 Coordinates\", () => {\r\n\tconst minX = 0;\r\n\tconst minY = 0;\r\n\tconst sizeY = 100;\r\n\r\n\tit(\"should center X on the pixel (+0.5 shift)\", () => {\r\n\t\t// Robot at \"0\" world coordinate\r\n\t\tconst p = toPixel(0, 0, minX, minY, sizeY);\r\n\t\texpect(p.x).to.equal(0.5);\r\n\t});\r\n\r\n\tit(\"should handle X values correctly\", () => {\r\n\t\t// Robot at 50mm\r\n\t\tconst p = toPixel(50, 0, minX, minY, sizeY);\r\n\t\texpect(p.x).to.equal(1.5);\r\n\t});\r\n\r\n\tit(\"should flip and shift Y correctly (-1 shift)\", () => {\r\n\t\t// Robot at \"0\" world coordinate (Bottom of map)\r\n\t\tconst p = toPixel(0, 0, minX, minY, sizeY);\r\n\t\texpect(p.y).to.equal(99);\r\n\t});\r\n\r\n\tit(\"should handle Y max value\", () => {\r\n\t\t// Robot at top of map (4950mm)\r\n\t\tconst p = toPixel(4950, 4950, minX, minY, sizeY);\r\n\t\texpect(p.y).to.equal(0);\r\n\t});\r\n});\r\n"]}