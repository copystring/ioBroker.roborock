{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/lib/map/b01/utils.ts"],"names":[],"mappings":";AACA;;GAEG;;AAKH,kCAqBC;AAMD,8BASC;AAvCD;;GAEG;AACH,SAAgB,WAAW,CAAC,MAAmD;IAC9E,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;QAAE,OAAO,MAAM,CAAC;IAChD,MAAM,KAAK,GAAgD,EAAE,CAAC;IAC9D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACxC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACrB,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC3B,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACzB,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC1B,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC1B,MAAM,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC5B,MAAM,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAE5B,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBAClD,IAAI,EAAE,KAAK,EAAE;oBAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACnC,IAAI,EAAE,KAAK,EAAE;oBAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7C,KAAK,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC/C,CAAC;QACF,CAAC;IACF,CAAC;IACD,OAAO,KAAK,CAAC;AACd,CAAC;AAED;;;GAGG;AACH,SAAgB,SAAS,CAAC,GAAW;IACpC,IAAI,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QAC7C,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;QAC9C,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IAC/C,CAAC;IACD,OAAO,GAAG,CAAC;AACZ,CAAC","sourcesContent":["\r\n/**\r\n * Utility functions for B01 map processing.\r\n */\r\n\r\n/**\r\n * Interpolates points in a chain to create a dense line of pixels.\r\n */\r\nexport function interpolate(points: { chain_point: { x: number, y: number } }[]): { chain_point: { x: number, y: number } }[] {\r\n\tif (!points || points.length < 2) return points;\r\n\tconst dense: { chain_point: { x: number, y: number } }[] = [];\r\n\tfor (let i = 0; i < points.length; i++) {\r\n\t\tconst p1 = points[i];\r\n\t\tdense.push(p1);\r\n\t\tif (i < points.length - 1) {\r\n\t\t\tconst p2 = points[i + 1];\r\n\t\t\tlet cx = p1.chain_point.x;\r\n\t\t\tlet cy = p1.chain_point.y;\r\n\t\t\tconst tx = p2.chain_point.x;\r\n\t\t\tconst ty = p2.chain_point.y;\r\n\r\n\t\t\twhile (Math.abs(cx - tx) + Math.abs(cy - ty) > 1) {\r\n\t\t\t\tif (cx !== tx) cx += (tx > cx ? 1 : -1);\r\n\t\t\t\telse if (cy !== ty) cy += (ty > cy ? 1 : -1);\r\n\t\t\t\tdense.push({ chain_point: { x: cx, y: cy } });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn dense;\r\n}\r\n\r\n/**\r\n * Converts a hex color string to an RGBA string.\r\n * Supports 9-character hex strings (RRGGBBAA).\r\n */\r\nexport function hexToRgba(hex: string): string {\r\n\tif (hex.startsWith(\"#\") && hex.length === 9) {\r\n\t\tconst r = parseInt(hex.slice(1, 3), 16);\r\n\t\tconst g = parseInt(hex.slice(3, 5), 16);\r\n\t\tconst b = parseInt(hex.slice(5, 7), 16);\r\n\t\tconst a = parseInt(hex.slice(7, 9), 16) / 255;\r\n\t\treturn `rgba(${r},${g},${b},${a.toFixed(2)})`;\r\n\t}\r\n\treturn hex;\r\n}\r\n"]}