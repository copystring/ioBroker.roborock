{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/lib/map/b01/utils.ts"],"names":[],"mappings":";AACA;;GAEG;;AAKH,kCAqBC;AAMD,8BASC;AAvCD;;GAEG;AACH,SAAgB,WAAW,CAAC,MAAmD;IAC9E,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC;QAAE,OAAO,MAAM,CAAC;IAChD,MAAM,KAAK,GAAgD,EAAE,CAAC;IAC9D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACxC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACrB,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACf,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC3B,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACzB,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC1B,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC1B,MAAM,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAC5B,MAAM,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;YAE5B,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBAClD,IAAI,EAAE,KAAK,EAAE;oBAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACnC,IAAI,EAAE,KAAK,EAAE;oBAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7C,KAAK,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC/C,CAAC;QACF,CAAC;IACF,CAAC;IACD,OAAO,KAAK,CAAC;AACd,CAAC;AAED;;;GAGG;AACH,SAAgB,SAAS,CAAC,GAAW;IACpC,IAAI,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QAC7C,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC;QAC9C,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IAC/C,CAAC;IACD,OAAO,GAAG,CAAC;AACZ,CAAC","sourcesContent":["\n/**\n * Utility functions for B01 map processing.\n */\n\n/**\n * Interpolates points in a chain to create a dense line of pixels.\n */\nexport function interpolate(points: { chain_point: { x: number, y: number } }[]): { chain_point: { x: number, y: number } }[] {\n\tif (!points || points.length < 2) return points;\n\tconst dense: { chain_point: { x: number, y: number } }[] = [];\n\tfor (let i = 0; i < points.length; i++) {\n\t\tconst p1 = points[i];\n\t\tdense.push(p1);\n\t\tif (i < points.length - 1) {\n\t\t\tconst p2 = points[i + 1];\n\t\t\tlet cx = p1.chain_point.x;\n\t\t\tlet cy = p1.chain_point.y;\n\t\t\tconst tx = p2.chain_point.x;\n\t\t\tconst ty = p2.chain_point.y;\n\n\t\t\twhile (Math.abs(cx - tx) + Math.abs(cy - ty) > 1) {\n\t\t\t\tif (cx !== tx) cx += (tx > cx ? 1 : -1);\n\t\t\t\telse if (cy !== ty) cy += (ty > cy ? 1 : -1);\n\t\t\t\tdense.push({ chain_point: { x: cx, y: cy } });\n\t\t\t}\n\t\t}\n\t}\n\treturn dense;\n}\n\n/**\n * Converts a hex color string to an RGBA string.\n * Supports 9-character hex strings (RRGGBBAA).\n */\nexport function hexToRgba(hex: string): string {\n\tif (hex.startsWith(\"#\") && hex.length === 9) {\n\t\tconst r = parseInt(hex.slice(1, 3), 16);\n\t\tconst g = parseInt(hex.slice(3, 5), 16);\n\t\tconst b = parseInt(hex.slice(5, 7), 16);\n\t\tconst a = parseInt(hex.slice(7, 9), 16) / 255;\n\t\treturn `rgba(${r},${g},${b},${a.toFixed(2)})`;\n\t}\n\treturn hex;\n}\n"]}