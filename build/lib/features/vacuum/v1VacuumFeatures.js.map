{"version":3,"file":"v1VacuumFeatures.js","sourceRoot":"","sources":["../../../../src/lib/features/vacuum/v1VacuumFeatures.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6BAAwB;AACxB,qDAAkD;AAClD,uDAAoD;AACpD,wEAA0D;AAC1D,8DAAgH;AAChH,oDAA2C;AAC3C,uDAAqD;AAErD,2BAA2B;AACd,QAAA,QAAQ,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,UAAU,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;AACvE,QAAA,UAAU,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,CAAC;AAC1E,QAAA,QAAQ,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;AAoB1D,QAAA,eAAe,GAAkB;IAC7C,QAAQ,EAAE;QACT,SAAS,EAAE,gBAAQ;QACnB,cAAc,EAAE,kBAAU;QAC1B,QAAQ,EAAE,gBAAQ;KAClB;IACD,QAAQ,EAAE;QACT,eAAe,EAAE,GAAG;KACpB;CACD,CAAC;AAEF,uCAAuC;AAC1B,QAAA,kBAAkB,GAAG,OAAC;KACjC,MAAM,CAAC;IACP,KAAK,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IAClC,SAAS,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACtC,cAAc,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IAC3C,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACrC,SAAS,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACtC,UAAU,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACvC,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE;IACpD,UAAU,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACvC,UAAU,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACvC,GAAG,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,8BAA8B;IAChE,UAAU,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;IACvC,mDAAmD;IACnD,WAAW,EAAE,OAAC;SACZ,MAAM,EAAE;SACR,QAAQ,EAAE;SACV,MAAM,CACN,CAAC,GAAG,EAAE,EAAE;QACP,IAAI,GAAG,KAAK,SAAS;YAAE,OAAO,IAAI,CAAC;QACnC,IAAI,CAAC;YACJ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChB,OAAO,IAAI,CAAC;QACb,CAAC;QAAC,MAAM,CAAC;YACR,OAAO,KAAK,CAAC;QACd,CAAC;IACF,CAAC,EACD,EAAE,OAAO,EAAE,sDAAsD,EAAE,CACnE;IACF,iBAAiB,EAAE,OAAC;SAClB,MAAM,EAAE;SACR,QAAQ,EAAE;SACV,MAAM,CACN,CAAC,GAAG,EAAE,EAAE;QACP,IAAI,GAAG,KAAK,SAAS;YAAE,OAAO,IAAI,CAAC;QACnC,IAAI,CAAC;YACJ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChB,OAAO,IAAI,CAAC;QACb,CAAC;QAAC,MAAM,CAAC;YACR,OAAO,KAAK,CAAC;QACd,CAAC;IACF,CAAC,EACD,EAAE,OAAO,EAAE,4DAA4D,EAAE,CACzE;IACF,qBAAqB,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,0CAA0C;IAC9F,6CAA6C;CAC7C,CAAC;KACD,WAAW,EAAE,CAAC,CAAC,yCAAyC;AAE1D,MAAsB,gBAAiB,SAAQ,uCAAkB;IACtD,OAAO,CAAgB;IAEjC,oCAAoC;IAC1B,MAAM,CAAU,SAAS,GAAG,kCAAgB,CAAC;IAC7C,WAAW,GAAiB,IAAI,CAAC;IACjC,UAAU,CAAc;IAGlC,YACC,YAAiC,EACjC,IAAY,EACZ,UAAkB,EAClB,MAAyB,EACzB,UAAyB,uBAAe;QAExC,6DAA6D;QAC7D,MAAM,eAAe,GAAG;YACvB,uBAAO,CAAC,WAAW;YACnB,uBAAO,CAAC,YAAY;YACpB,uBAAO,CAAC,MAAM;YACd,uBAAO,CAAC,YAAY;YACpB,uBAAO,CAAC,QAAQ;YAChB,uBAAO,CAAC,WAAW;YACnB,uBAAO,CAAC,WAAW;SACnB,CAAC;QACF,MAAM,YAAY,GAAG;YACpB,GAAG,MAAM;YACT,cAAc,EAAE,CAAC,GAAG,eAAe,EAAE,GAAG,MAAM,CAAC,cAAc,CAAC;SAC9D,CAAC;QAEF,KAAK,CAAC,YAAY,EAAE,IAAI,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvB,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,yCAAyC;QACzC,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,GAAG,gBAAgB,CAAC,SAAS,CAAC,SAAS,CAAC;QAChG,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,UAAU,CAAC,MAAM,GAAG,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC;QAClG,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC;QAE7F,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAElC,8BAA8B;QAC9B,IAAI,CAAC,MAAM,CAAC,cAAc,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;IACvE,CAAC;IAES,sBAAsB;QAC/B,IAAI,CAAC;YACJ,6CAA6C;YAC7C,kGAAkG;YAClG,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC;YAE3H,yCAAyC;YACzC,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;gBAClC,MAAM,YAAY,GAA2B,EAAE,CAAC;gBAEhD,KAAK,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC;oBAClE,MAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;oBAC7B,MAAM,KAAK,GAAG,IAAW,CAAC;oBAE1B,qFAAqF;oBACrF,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;oBAC3B,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;wBACrC,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxC,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;oBAC1B,CAAC;oBACD,IAAI,CAAC,KAAK;wBAAE,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;oBAEhC,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE,CAAC;wBAC1B,YAAY,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;oBAClC,CAAC;yBAAM,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC;wBAC3B,YAAY,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC;oBACrC,CAAC;gBACF,CAAC;gBAED,uCAAuC;gBACvC,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBAC1C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,GAAG;wBAClC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU;wBACnC,GAAG,YAAY;qBACf,CAAC;gBACH,CAAC;YACF,CAAC;QACF,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,uCAAuC,CAAC,EAAE,CAAC,CAAC;QACzE,CAAC;IACF,CAAC;IAGe,KAAK,CAAC,qBAAqB;QAC1C,MAAM,KAAK,CAAC,qBAAqB,EAAE,CAAC;QAEpC,kFAAkF;QAClF,uCAAuC;QACvC,IAAI,CAAC,QAAQ,GAAG;YACf,GAAG,IAAI,CAAC,QAAQ;YAChB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;SACtE,CAAC;IACH,CAAC;IAEe,KAAK,CAAC,oBAAoB;QACzC,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1B,MAAM,OAAO,CAAC,GAAG,CAAC;YACjB,IAAI,CAAC,sBAAsB,EAAE;YAC7B,IAAI,CAAC,mBAAmB,EAAE;YAC1B,IAAI,CAAC,iBAAiB,EAAE;YACxB,IAAI,CAAC,iBAAiB,EAAE;YACxB,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,iBAAiB,EAAE;SACxB,CAAC,CAAC;QAEH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvD,iCAAiC;QACjC,MAAM,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAEtC,0BAA0B;QAC1B,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAE/B,cAAc;QACd,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;IACxB,CAAC;IAES,KAAK,CAAC,wBAAwB;QACvC,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9F,IAAI,CAAC,MAAM,EAAE,YAAY;YAAE,OAAO;QAClC,MAAM,MAAM,GAAG,MAAM,CAAC,YAAsC,CAAC;QAE7D,MAAM,aAAa,GAA2B;YAC7C,KAAK,EAAE,iBAAiB;YACxB,KAAK,EAAE,iBAAiB;YACxB,KAAK,EAAE,aAAa;SACpB,CAAC;QAEF,KAAK,MAAM,CAAC,SAAS,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;YACzD,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,KAAK,EAAE,CAAC;gBACvE,MAAM,GAAG,GAAG,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnD,MAAM,UAAU,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC;gBAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC;gBAEpD,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,UAAU,EAAE,EAAE,MAAM,IAAI,EAAE,CAAC,CAAC;gBACpG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,UAAU,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACpH,CAAC;QACF,CAAC;IACF,CAAC;IAES,0BAA0B;QACnC,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,IAAI;YACrD,uDAAuD,EAAE,QAAQ;YACjE,uDAAuD,EAAE,KAAK;YAC9D,uDAAuD,EAAE,WAAW;SACpE,CAAC;QAEF,IAAI,CAAC,UAAU,CAAC,sBAAsB,EAAE;YACvC,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,oBAAoB,CAAC,GAAG;YACrE,MAAM,EAAE,OAAO;SACf,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,IAAI,uBAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC;IAGS,kBAAkB;QAC3B,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAW,CAAC;QACpC,IAAI,CAAC;YACJ,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/D,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrE,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;gBAC9B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,iDAAiD,CAAC,CAAC;gBACpF,OAAO,QAAQ,CAAC;YACjB,CAAC;YAED,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;YACxD,MAAM,gBAAgB,GAAG,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtF,qCAAqC;YACrC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,4BAA4B,CAAC,CAAC;YACtF,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,QAAQ,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,gCAAgC,CAAC,CAAC;YACtF,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,iBAAiB,CAAC,CAAC;YAC5E,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,MAAM,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,sBAAsB,CAAC,CAAC;YAC1E,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,uBAAuB,CAAC,CAAC;YACtE,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,EAAE,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,uBAAuB,CAAC,CAAC;YACvE,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,iBAAiB,CAAC,CAAC;YAClE,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,KAAK,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,sBAAsB,CAAC,CAAC;YACzE,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,yBAAyB,CAAC,CAAC;YAChF,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,0BAA0B,CAAC,CAAC;YAClF,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,yBAAyB,CAAC,CAAC;YAChF,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,iCAAiC,CAAC,CAAC;YACzF,IAAI,CAAC,CAAC,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,6BAA6B,CAAC,CAAC;YACrF,IAAI,CAAC,CAAC,CAAC,gBAAgB,GAAG,GAAG,CAAC;gBAAE,QAAQ,CAAC,GAAG,CAAC,uBAAO,CAAC,6BAA6B,CAAC,CAAC;YAEpF,0BAA0B;YAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnE,IAAI,QAAQ,EAAE,CAAC;gBACd,KAAK,MAAM,EAAE,IAAI,QAAQ,EAAE,CAAC;oBAC3B,MAAM,WAAW,GAAG,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAA8D,CAAC,CAAC;oBAChI,IAAI,WAAW,EAAE,CAAC;wBACjB,MAAM,WAAW,GAAG,uBAAO,CAAC,WAAmC,CAAC,CAAC;wBAEjE,IAAI,WAAW;4BAAE,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;oBAC5C,CAAC;gBACF,CAAC;YACF,CAAC;YAED,iCAAiC;YACjC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;gBACpC,MAAM,OAAO,GAAG,6BAAa,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC9F,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE,CAAC;oBACzB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,4BAA4B,CAAC,GAAG,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACzF,CAAC;QACF,CAAC;QAAC,OAAO,KAAU,EAAE,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,kCAAkC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACrF,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,6CAA6C,CAAC,GAAG,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC1G,OAAO,QAAQ,CAAC;IACjB,CAAC;IAEM,KAAK,CAAC,6BAA6B,CAAC,UAAyC;QACnF,IAAI,cAAc,GAAG,KAAK,CAAC;QAC3B,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,CAAC,oBAAoB;QACzH,MAAM,mBAAmB,GAAa,EAAE,CAAC;QAEzC,IAAI,CAAC,YAAY,EAAE,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,gDAAgD,CAAC,CAAC;YACnF,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,cAAc,CAAC,CAAC;QAElF,+BAA+B;QAC/B,MAAM,gBAAgB,GAAG,0BAAkB,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAClE,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CACjB,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,+DAA+D,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAC5J,CAAC;YACF,OAAO,KAAK,CAAC;QACd,CAAC;QACD,MAAM,WAAW,GAAG,gBAAgB,CAAC,IAAI,CAAC;QAE1C,sDAAsD;QACtD,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,+BAA+B;QAClF,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,oCAAoC,CAAC,GAAG,eAAe,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACzI,KAAK,MAAM,OAAO,IAAI,eAAe,EAAE,CAAC;YACvC,MAAM,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YAC/C,IAAI,aAAa,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;gBAC1E,2EAA2E;gBAC3E,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;gBACvD,IAAI,OAAO,EAAE,CAAC;oBACb,cAAc,GAAG,IAAI,CAAC;oBACtB,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;gBACzC,CAAC;YACF,CAAC;iBAAM,IAAI,aAAa,EAAE,CAAC;gBAC1B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAClB,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,cAAc,aAAa,YAAY,OAAO,sDAAsD,CAClJ,CAAC;YACH,CAAC;QACF,CAAC;QAED,+CAA+C;QAC/C,gEAAgE;QAEhE,IAAI,eAAe,GAAG,KAAK,CAAC;QAG5B,WAAW;QAEX,WAAW;QACX,MAAM,gBAAgB,GAAG,CAAC,WAAW,CAAC,cAAc,KAAK,SAAS,IAAI,WAAW,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC;QAC1G,IAAI,gBAAgB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,QAAQ,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,QAAQ,CAAC,EAAE,CAAC;YAClH,gHAAgH;YAChH,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;QAED,uBAAuB;QACvB,IAAI,WAAW,CAAC,WAAW,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,CAAC;YAChF,mHAAmH;YACnH,MAAM,IAAI,GAAgB,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;YAC/G,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;YACzC,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QACvD,CAAC;QACD,IAAI,WAAW,CAAC,iBAAiB,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE,CAAC;YAC5F,yHAAyH;YACzH,MAAM,IAAI,GAAgB,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;YACrH,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;YAC/C,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;QAC7D,CAAC;QAED,0BAA0B;QAC1B,IAAI,WAAW,CAAC,SAAS,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,uBAAO,CAAC,UAAU,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,UAAU,CAAC,EAAE,CAAC;YAC/L,2GAA2G;YAC3G,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACxC,CAAC;QAED,SAAS;QACT,IAAI,WAAW,CAAC,UAAU,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,MAAM,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,MAAM,CAAC,EAAE,CAAC;YAClI,wHAAwH;YACxH,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpC,CAAC;QAED,gBAAgB;QAChB,IAAI,WAAW,CAAC,sBAAsB,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,aAAa,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,aAAa,CAAC,EAAE,CAAC;YAC5J,2IAA2I;YAC3I,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC3C,CAAC;QAED,UAAU;QACV,IAAI,WAAW,CAAC,WAAW,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,OAAO,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,OAAO,CAAC,EAAE,CAAC;YACrI,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrC,CAAC;QAED,+BAA+B;QAC/B,MAAM,qBAAqB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAC5E,MAAM,cAAc,GAAG,WAAW,CAAC,GAAG,KAAK,SAAS,CAAC;QACrD,MAAM,gBAAgB,GAAG,WAAW,CAAC,SAAS,KAAK,SAAS,IAAI,qBAAqB,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACtH,MAAM,cAAc,GAAG,CAAC,cAAc,IAAI,gBAAgB,CAAC,CAAC;QAE5D,IAAI,cAAc,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,oBAAoB,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC;YACxI,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAClD,CAAC;QAED,qGAAqG;QACrG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,WAAW,CAAC,IAAI,MAAM,IAAI,CAAC,YAAY,CAAC,uBAAO,CAAC,WAAW,CAAC,EAAE,CAAC;YACpG,eAAe,GAAG,IAAI,CAAC;YACvB,mBAAmB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,CAAC;QACD,6EAA6E;QAC7E,mFAAmF;QACnF,yDAAyD;QAEzD,gDAAgD;QAEhD,IAAI,eAAe,IAAI,cAAc,EAAE,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,sDAAsD,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC1J,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,6BAA6B,CAAC,CAAC;QAClG,CAAC;QACD,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,OAAO,cAAc,IAAI,eAAe,CAAC,CAAC,kCAAkC;IAC7E,CAAC;IAEO,YAAY,CAAqB;IAElC,KAAK,CAAC,eAAe,CAAC,aAAiC;QAC7D,IAAI,aAAa,KAAK,SAAS,EAAE,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,oBAAoB,IAAI,CAAC,IAAI,yDAAyD,CAAC,CAAC;YAC5G,OAAO;QACR,CAAC;QACD,MAAM,cAAc,GAAG,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/C,MAAM,UAAU,GAAG,cAAc,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;QAC3D,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,IAAI,qCAAqC,aAAa,aAAa,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAC1J,OAAO;QACR,CAAC;QACD,MAAM,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC;QAEjC,iDAAiD;QACjD,IAAI,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE,CAAC;YACpC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,eAAe,QAAQ,kCAAkC,CAAC,CAAC;YAC5F,OAAO;QACR,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;QAE7B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,0BAA0B,QAAQ,aAAa,CAAC,CAAC;QACjF,MAAM,cAAc,GAA8B;YACjD,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACxD,CAAC,EAAE,CAAC,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YAClD,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACzF,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,CAAC;YAC1B,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACzF,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACzF,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACzF,CAAC,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YACzF,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,sBAAsB;YAClH,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,iBAAiB;YAC7G,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC;YAC1F,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,cAAc;YAC1G,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,2BAA2B;YACvH,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,SAAS;YACrG,EAAE,EAAE,CAAC,uBAAO,CAAC,aAAa,EAAE,uBAAO,CAAC,OAAO,EAAE,uBAAO,CAAC,MAAM,EAAE,uBAAO,CAAC,oBAAoB,CAAC,EAAE,yBAAyB;SACrH,CAAC;QACF,MAAM,QAAQ,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC;QAE1C,IAAI,QAAQ,EAAE,CAAC;YACd,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,qCAAqC,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,qDAAqD;YAC/J,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;gBAChC,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,sCAAsC;YACzE,CAAC;QACF,CAAC;aAAM,IAAI,QAAQ,KAAK,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,IAAI,uBAAuB,QAAQ,4EAA4E,CAAC,CAAC;QAC9J,CAAC;IACF,CAAC;IAED,yCAAyC;IAClC,mBAAmB,CAAC,SAA0B;QACpD,OAAO,gBAAgB,CAAC,SAAS,CAAC,WAAW,CAAC,SAAgE,CAAC,CAAC;IACjH,CAAC;IACM,qBAAqB,CAAC,UAAkB;QAC9C,yBAAyB;QACzB,OAAO,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACpE,CAAC;IACM,qBAAqB,CAAC,SAA0B;QACtD,MAAM,QAAQ,GAAG,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,SAAiE,CAAC,CAAC;QAC5H,IAAI,CAAC,QAAQ;YAAE,OAAO,SAAS,CAAC;QAEhC,MAAM,MAAM,GAAG,EAAE,GAAG,QAAQ,EAA0F,CAAC;QAEvH,IAAI,SAAS,KAAK,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;YAClE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC;QACjD,CAAC;aAAM,IAAI,SAAS,KAAK,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YACvE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAChD,CAAC;aAAM,IAAI,SAAS,KAAK,gBAAgB,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;YACnF,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC;QACtD,CAAC;aAAM,IAAI,SAAS,KAAK,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;YAC3E,MAAM,CAAC,MAAM,GAAG,EAAE,GAAG,MAAM,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QAC3E,CAAC;aAAM,IAAI,SAAS,KAAK,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YACjE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC;QAC7C,CAAC;QAED,OAAO,MAAM,CAAC;IACf,CAAC;IACM,qBAAqB,CAAC,SAA0B;QACtD,OAAO,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,SAAiE,CAAkC,CAAC;IACpJ,CAAC;IACM,wBAAwB,CAAC,SAA0B;QACzD,MAAM,IAAI,GAAG,gBAAgB,CAAC,SAAS,CAAC,eAAe,CAAC,SAAoE,CAAC,CAAC;QAC9H,OAAO,IAAiD,CAAC;IAC1D,CAAC;IACM,sBAAsB,CAAC,SAA0B;QACvD,8CAA8C;QAC9C,MAAM,IAAI,GAAG,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,SAAqE,CAAC,CAAC;QAChI,OAAO,IAAI,IAAI,aAAa,SAAS,EAAE,CAAC;IACzC,CAAC;IAED,kCAAkC;IAClC,uCAAuC;IAG7B,wBAAwB;QACjC,IAAI,CAAC,UAAU,CAAC,wBAAwB,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;QAC1E,IAAI,CAAC,UAAU,CAAC,mCAAmC,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,cAAc,EAAE,MAAM,EAAE,EAAE,cAAc,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QACrJ,IAAI,CAAC,UAAU,CAAC,0BAA0B,EAAE;YAC3C,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,YAAY;YACjB,MAAM,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE,KAAK,EAAE;SACnG,CAAC,CAAC;IACJ,CAAC;IAGY,kBAAkB;QAC3B,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;QACnE,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;QAClE,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE;YACtC,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,iBAAiB;YACtB,MAAM,EAAE,EAAE,iBAAiB,EAAE,KAAK,EAAE,iBAAiB,EAAE,QAAQ,EAAE,iBAAiB,EAAE,SAAS,EAAE;SAC/F,CAAC,CAAC;QACH,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE;YACxC,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,uCAAuC;YAC5C,MAAM,EAAE;gBACP,sCAAsC,EAAE,QAAQ;gBAChD,sCAAsC,EAAE,QAAQ;gBAChD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,QAAQ;gBACjD,uCAAuC,EAAE,UAAU;aACnD;SACD,CAAC,CAAC;IACJ,CAAC;IAGS,iBAAiB;QAC1B,IAAI,CAAC,UAAU,CAAC,sBAAsB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,eAAe,EAAE,MAAM,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,eAAe,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;QAC7I,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE;YACxC,IAAI,EAAE,MAAM;YACZ,GAAG,EAAE,sCAAsC;YAC3C,MAAM,EAAE;gBACP,sCAAsC,EAAE,KAAK;gBAC7C,qCAAqC,EAAE,IAAI;gBAC3C,sCAAsC,EAAE,IAAI;gBAC5C,sCAAsC,EAAE,IAAI;aAC5C;SACD,CAAC,CAAC;IACJ,CAAC;IAKS,mBAAmB;QAC5B,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,IAAI,kCAAgB,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;QAClG,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;QAEjF,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,IAAI,kCAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC;QAChH,IAAI,CAAC,UAAU,CAAC,2BAA2B,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,CAAC;IACjG,CAAC;IAGS,4BAA4B;QACrC,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;QACvF,OAAO,CAAC,MAAM,GAAG,EAAE,GAAG,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC,kBAAkB;QACnI,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;IAGS,mBAAmB;QAC5B,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;QACvF,OAAO,CAAC,MAAM,GAAG,EAAE,GAAG,OAAO,CAAC,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,CAAC;QACzD,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;IAIe,AAAN,KAAK,CAAC,kBAAkB;QACjC,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,gBAAgB;QACzD,IAAI,CAAC,EAAE,EAAE,CAAC;YACT,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,2DAA2D,CAAC,CAAC;YAC7F,OAAO;QACR,CAAC;QACD,MAAM,WAAW,GAAG;YACnB,WAAW,EAAE,UAAU,EAAE,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,oBAAoB,IAAI,CAAC,IAAI,EAAE;YAC7F,WAAW,EAAE,UAAU,EAAE,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,oBAAoB,IAAI,CAAC,IAAI,cAAc;YACzG,UAAU,EAAE,UAAU,EAAE,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,uBAAuB,IAAI,CAAC,IAAI,EAAE;YAC/F,IAAI,EAAE,UAAU,EAAE,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,QAAQ;SAC5E,CAAC;QACF,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,SAAS,CAAC,CAAC;QAC5D,KAAK,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC;YAC9D,yBAAyB;YACzB,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,UAAU,EAAE,CAAC,CAAC;QACxG,CAAC;IACF,CAAC;IAGe,AAAN,KAAK,CAAC,sBAAsB;QACrC,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,SAAS,CAAC,CAAC;QAC5D,KAAK,MAAM,OAAO,IAAI,CAAC,eAAe,EAAE,aAAa,EAAE,iBAAiB,CAAC,EAAE,CAAC;YAC3E,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACrG,CAAC;IACF,CAAC;IAEM,KAAK,CAAC,iBAAiB,CAAC,IAAU;QACxC,IAAI,SAA0C,CAAC;QAE/C,IAAI,IAAI,EAAE,CAAC;YACV,SAAS,GAAG,IAAI,CAAC;QAClB,CAAC;aAAM,CAAC;YACP,IAAI,CAAC;gBACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,gBAAgB,EAAE,EAAE,CAAC,CAAC;gBACpG,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE,CAAC;oBACjF,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;gBACvB,CAAC;qBAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,IAAI,EAAE,CAAC;oBAC1D,SAAS,GAAG,MAA6B,CAAC;gBAC3C,CAAC;YACF,CAAC;YAAC,OAAO,CAAM,EAAE,CAAC;gBACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,iCAAiC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;YACjI,CAAC;QACF,CAAC;QAED,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;QAC1C,CAAC;IACF,CAAC;IAES,KAAK,CAAC,kBAAkB,CAAC,SAA8B;QAChE,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,cAAc,CAAC,CAAC;QACjE,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,mBAAmB,CAAC,CAAC;QAEtE,sCAAsC;QACtC,IAAI,SAAS,CAAC,UAAU,EAAE,CAAC;YAC1B,MAAM,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QACrD,CAAC;QAED,6BAA6B;QAC7B,MAAM,iBAAiB,GAAG,CAAC,QAAQ,EAAE,YAAY,EAAE,YAAY,EAAE,YAAY,EAAE,OAAO,EAAE,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;QAClI,KAAK,MAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;YACrC,IAAI,SAAS,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE,CAAC;gBAClC,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,GAAG,EAAE,EAAE;oBACvE,IAAI,EAAE,GAAG;oBACT,IAAI,EAAE,OAAO,SAAS,CAAC,GAAG,CAAwB;oBAClD,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE,KAAK;iBACZ,CAAC,CAAC;gBACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YAC9H,CAAC;QACF,CAAC;QAED,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;YAC7B,MAAM,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;YAE3B,IAAI,GAAG,KAAK,YAAY,IAAI,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC;gBAAE,SAAS;YAEtE,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,OAAO,GAA0B,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;YAEtI,iCAAiC;YACjC,IAAI,CAAC,sBAAsB,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,0BAA0B,EAAE,mBAAmB,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBACzI,MAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;gBAC5E,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,UAAU,EAAE,EAAE,EAAE,GAAG,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;gBAExG,MAAM,aAAa,GAA2B;oBAC7C,YAAY,EAAE,GAAG;oBACjB,YAAY,EAAE,GAAG;oBACjB,QAAQ,EAAE,GAAG;oBACb,gBAAgB,EAAE,GAAG;oBACrB,QAAQ,EAAE,EAAE;iBACZ,CAAC;gBACF,MAAM,SAAS,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;gBAE1D,IAAI,SAAS,GAAG,CAAC,EAAE,CAAC;oBACnB,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;oBAC1D,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,UAAU,EAAE,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC7H,CAAC;YACF,CAAC;iBAAM,CAAC;gBACP,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,GAAG,EAAE,EAAE,MAAM,CAAC,CAAC;gBAC/E,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YAClH,CAAC;YAED,IAAI,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;gBAC/D,MAAM,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;gBAC1E,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,qBAAqB,QAAQ,EAAE,EAAE,EAAE,IAAI,EAAE,SAAS,QAAQ,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;YAC3K,CAAC;QACF,CAAC;IACF,CAAC;IAED,yCAAyC;IACjC,KAAK,CAAC,kBAAkB,CAAC,IAAS;QACzC,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ;YAAE,OAAO;QAE9C,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,cAAc,CAAC,CAAC;QAEjE,MAAM,OAAO,GAA2B;YACvC,IAAI,EAAE,MAAM;YACZ,EAAE,EAAE,IAAI;YACR,GAAG,EAAE,KAAK;YACV,KAAK,EAAE,OAAO;YACd,IAAI,EAAE,MAAM;YACZ,SAAS,EAAE,WAAW,CAAC,0BAA0B;SACjD,CAAC;QAEF,KAAK,MAAM,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC;YACxD,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE,CAAC;gBAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;gBACtB,MAAM,MAAM,GAAG;oBACd,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ;oBACnD,IAAI,EAAE,GAAG,KAAK,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM;oBAC5C,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,KAAK;iBACY,CAAC;gBAE1B,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;gBACrF,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,SAAS,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACxH,CAAC;QACF,CAAC;IACF,CAAC;IAIS,sBAAsB;QAC/B,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,CAAC;QACzH,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,CAAC,SAAS,CAAC,YAAY,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC;IACtI,CAAC;IAGe,AAAN,KAAK,CAAC,uBAAuB;QACtC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,wBAAwB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5I,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,aAAa,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACvH,CAAC;IAGe,AAAN,KAAK,CAAC,qBAAqB;QACpC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,sBAAsB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,sBAAsB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACzI,CAAC;IAGe,AAAN,KAAK,CAAC,qBAAqB;QACpC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,mBAAmB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACnI,CAAC;IAGe,AAAN,KAAK,CAAC,uBAAuB;QACtC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC1H,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,cAAc,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACzH,CAAC;IAGe,AAAN,KAAK,CAAC,qBAAqB;QACpC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,iBAAiB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IAC/H,CAAC;IAGe,AAAN,KAAK,CAAC,uBAAuB;QACtC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,mBAAmB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACnI,CAAC;IAID,sCAAsC;IAEtB,AAAN,KAAK,CAAC,eAAe,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,UAAU,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGrJ,AAAN,KAAK,CAAC,oBAAoB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGpK,AAAN,KAAK,CAAC,uBAAuB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,mBAAmB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAG/K,AAAN,KAAK,CAAC,gBAAgB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,WAAW,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGxJ,AAAN,KAAK,CAAC,oBAAoB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGpK,AAAN,KAAK,CAAC,qBAAqB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,gBAAgB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,gBAAgB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGvK,AAAN,KAAK,CAAC,oBAAoB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGpK,AAAN,KAAK,CAAC,gBAAgB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,WAAW,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGxJ,AAAN,KAAK,CAAC,gBAAgB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,WAAW,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGxJ,AAAN,KAAK,CAAC,iBAAiB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,YAAY,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAG3J,AAAN,KAAK,CAAC,qBAAqB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,cAAc,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGnK,AAAN,KAAK,CAAC,oBAAoB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGpK,AAAN,KAAK,CAAC,oBAAoB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,eAAe,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGpK,AAAN,KAAK,CAAC,mBAAmB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,QAAQ,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGrJ,AAAN,KAAK,CAAC,gCAAgC;QAC/C,IAAI,CAAC;YACJ,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,uBAAuB,CAAC,CAAC;YAE1E,yFAAyF;YACzF,MAAM,YAAY,GAAG;gBACpB,CAAC,EAAE,SAAS;gBACZ,CAAC,EAAE,OAAO;gBACV,CAAC,EAAE,IAAI;aACP,CAAC;YAEF,oFAAoF;YACpF,MAAM,gBAAgB,GAAG;gBACxB,EAAE,GAAG,EAAE,kBAAkB,EAAE,IAAI,EAAE,kBAAkB,EAAE;gBACrD,EAAE,GAAG,EAAE,sBAAsB,EAAE,IAAI,EAAE,kBAAkB,EAAE;gBACzD,EAAE,GAAG,EAAE,eAAe,EAAE,IAAI,EAAE,UAAU,EAAE;gBAC1C,EAAE,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,kBAAkB,EAAE;gBACxD,EAAE,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,iBAAiB,EAAE;gBACvD,EAAE,GAAG,EAAE,oBAAoB,EAAE,IAAI,EAAE,oBAAoB,EAAE;aACzD,CAAC;YAEF,KAAK,MAAM,QAAQ,IAAI,gBAAgB,EAAE,CAAC;gBACzC,MAAM,IAAI,CAAC,WAAW,CAAC,sBAAsB,EAAE,QAAQ,CAAC,GAAG,EAAE;oBAC5D,IAAI,EAAE,QAAQ,CAAC,IAAI;oBACnB,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,KAAK;oBACZ,MAAM,EAAE,YAAY;iBACpB,CAAC,CAAC;YACJ,CAAC;QAEF,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,MAAM,KAAK,CAAC;QACb,CAAC;IACF,CAAC;IAEe,KAAK,CAAC,sBAAsB;QAC3C,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAO,CAAC,YAAY,CAAC;YAAE,OAAO;QACnD,IAAI,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE1E,yFAAyF;QACzF,IAAI,OAAO,KAAK,KAAK,IAAI,CAAC,qBAAqB,EAAE,qBAAqB,EAAE,sBAAsB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;YAC3H,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,6CAA6C,IAAI,CAAC,UAAU,4BAA4B,EAAE,OAAO,CAAC,CAAC;YAC5K,OAAO,GAAG,KAAK,CAAC;QACjB,CAAC;QAED,IAAI,OAAO,KAAK,KAAK;YAAE,OAAO;QAE9B,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,iBAAiB,EAAE,EAAE,CAAC,CAAC;YACrG,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;gBAC3B,iDAAiD;gBACjD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBAE5D,eAAe;gBACf,MAAM,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;YAC1C,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,uCAAuC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QACvI,CAAC;IACF,CAAC;IAES,KAAK,CAAC,qBAAqB,CAAC,QAAkB;QACvD,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,mBAAmB,CAAC,CAAC;QAEtE,iDAAiD;QACjD,KAAK,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAAE,CAAC;YACtF,MAAM,WAAW,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;YAClD,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,IAAI,EAAE;gBAChD,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,GAAG,IAAI,SAAS,EAAE,GAAG;gBAC3B,KAAK,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CACtC,WAAW,IAAI,CAAC,IAAI,qBAAqB,IAAI,EAAE,EAC/C,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,EAAE,IAAI,EAAE,CAC/B,CAAC;QACH,CAAC;IACF,CAAC;IAED,iEAAiE;IACjD,KAAK,CAAC,YAAY;QACjC,IAAI,SAA0C,CAAC;QAE/C,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE,EAAE,CAAC,CAAC;YAChG,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE,CAAC;gBACjF,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACvB,CAAC;iBAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,KAAK,IAAI,EAAE,CAAC;gBAC1D,SAAS,GAAG,MAA6B,CAAC;YAC3C,CAAC;YAED,IAAI,SAAS,EAAE,CAAC;gBACf,MAAM,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YACrC,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,4BAA4B,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QAC5H,CAAC;IACF,CAAC;IAES,KAAK,CAAC,aAAa,CAAC,SAA8B;QAC3D,kEAAkE;QAClE,MAAM,QAAQ,GAAG,SAAS,CAAC,WAAW,CAAC,CAAC;QACxC,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC5B,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC9C,CAAC;QAED,2CAA2C;QAC3C,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC5B,OAAO,SAAS,CAAC,KAAK,CAAC,CAAC;YACxB,MAAM,IAAI,CAAC,0BAA0B,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzD,CAAC;QAED,sEAAsE;QACtE,IAAI,SAAS,CAAC,MAAM,CAAC,KAAK,SAAS;YAAE,SAAS,CAAC,WAAW,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAChF,IAAI,SAAS,CAAC,OAAO,CAAC,KAAK,SAAS;YAAE,SAAS,CAAC,gBAAgB,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;QACvF,IAAI,SAAS,CAAC,UAAU,CAAC,KAAK,SAAS;YAAE,SAAS,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;QACtF,IAAI,SAAS,CAAC,cAAc,CAAC,KAAK,SAAS;YAAE,SAAS,CAAC,cAAc,CAAC,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC;QAEnG,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,eAAe,CAAC,CAAC;QAClE,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;YAC7B,IAAI,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;YACzB,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,OAAO,GAA0B,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;YAElJ,4BAA4B;YAC5B,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,IAAI,EAAE,CAAC;gBAC7C,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAC3B,CAAC;YAED,IAAI,GAAG,KAAK,YAAY,EAAE,CAAC;gBAC1B,GAAG,GAAG,IAAI,CAAC,KAAK,CAAE,GAAc,GAAG,EAAE,CAAC,CAAC;YACxC,CAAC;iBAAM,IAAI,GAAG,KAAK,YAAY,IAAI,GAAG,KAAK,cAAc,EAAE,CAAC;gBAC3D,GAAG,GAAG,MAAM,CAAC,CAAE,GAAc,GAAG,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,CAAC;YAED,iDAAiD;YACjD,IAAI,CAAC,GAAG,KAAK,cAAc,IAAI,GAAG,KAAK,cAAc,CAAC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;gBACnF,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;YAC7C,CAAC;YAED,IAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;gBACzD,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC;YAED,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,GAAG,EAAE,EAAE,MAAM,CAAC,CAAC;YAChF,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;QACnH,CAAC;IACF,CAAC;IAES,KAAK,CAAC,0BAA0B,CAAC,GAAW;QACrD,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,uBAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC;YAC7D,OAAO;QACR,CAAC;QAED,4BAA4B;QAC5B,MAAM,MAAM,GAAG;YACd,gBAAgB,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,IAAI,EAAS,sCAAsC;YACnF,oBAAoB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,EAAM,6BAA6B;YAC1E,aAAa,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,EAAa,mCAAmC;YAChF,mBAAmB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,EAAO,6BAA6B;YAC1E,mBAAmB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,EAAO,4BAA4B;YACzE,kBAAkB,EAAE,GAAG,GAAG,IAAI,EAAe,+BAA+B;SAC5E,CAAC;QAEF,KAAK,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;YAClD,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CACtC,WAAW,IAAI,CAAC,IAAI,yBAAyB,IAAI,EAAE,EACnD,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CACvB,CAAC;QACH,CAAC;IACF,CAAC;IAIe,AAAN,KAAK,CAAC,WAAW,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGvI,AAAN,KAAK,CAAC,mBAAmB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,OAAO,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGnJ,AAAN,KAAK,CAAC,WAAW,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGvI,AAAN,KAAK,CAAC,kBAAkB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,aAAa,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAG9J,AAAN,KAAK,CAAC,WAAW,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGvI,AAAN,KAAK,CAAC,qBAAqB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,gBAAgB,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,gBAAgB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGvK,AAAN,KAAK,CAAC,mBAAmB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,cAAc,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAGjK,AAAN,KAAK,CAAC,kBAAkB,KAAoB,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,aAAa,EAAE,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAG9J,AAAN,KAAK,CAAC,8BAA8B;QAE7C,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,4BAA4B,EAAE;YAChE,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,IAAI;YACX,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC;YAC7C,GAAG,EAAE,CAAC;YACN,GAAG,EAAE,EAAE;SACP,CAAC,CAAC;IACJ,CAAC;IAGS,oBAAoB;QAC7B,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,IAAI,kCAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC;QACpG,yDAAyD;QACzD,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;IACrF,CAAC;IAGe,AAAN,KAAK,CAAC,oBAAoB;QACnC,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,cAAc,CAAC,CAAC;QACjE,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACnG,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC/F,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACjG,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACvG,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;IAClH,CAAC;IAGe,AAAN,KAAK,CAAC,qBAAqB;QACpC,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,eAAe,CAAC,CAAC;QAClE,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACzG,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,WAAW,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC1G,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;QAC/G,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,eAAe,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC3G,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;IACvG,CAAC;IAGS,mBAAmB;QAC5B,IAAI,CAAC,UAAU,CAAC,6BAA6B,EAAE;YAC9C,IAAI,EAAE,MAAM;YACZ,IAAI,EAAE,YAAY;YAClB,GAAG,EAAE,gEAAgE;YACrE,MAAM,EAAE;gBACP,2EAA2E,EAAE,gBAAgB;gBAC7F,gEAAgE,EAAE,YAAY;aAC9E;SACD,CAAC,CAAC;IACJ,CAAC;IAED,yCAAyC;IAE/B,MAAM,CAAU,oBAAoB,GAA2B,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;IAC9J,MAAM,CAAU,gCAAgC,GAA2B;QAClF,CAAC,EAAE,OAAO;QACV,CAAC,EAAE,KAAK;QACR,CAAC,EAAE,UAAU;QACb,CAAC,EAAE,MAAM;QACT,CAAC,EAAE,OAAO;QACV,CAAC,EAAE,UAAU;QACb,CAAC,EAAE,YAAY;QACf,CAAC,EAAE,YAAY;QACf,CAAC,EAAE,eAAe;QAClB,CAAC,EAAE,wBAAwB;KAC3B,CAAC;IAEc,KAAK,CAAC,iBAAiB;QACtC,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,kBAAkB,EAAE,EAAE,CAAC,CAAC;YACtG,IAAI,CAAC,WAAW,GAAG,MAAe,CAAC;YAEnC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACnD,OAAO;YACR,CAAC;YAED,IAAI,SAAS,GAAG,CAAC,CAAC;YAClB,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,IAAI,0BAA0B,CAAC,CAAC;YAE7G,IAAI,cAAc,IAAI,OAAO,cAAc,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;gBAC9D,SAAS,GAAG,cAAc,CAAC,GAAG,CAAC;YAChC,CAAC;iBAAM,CAAC;gBACP,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC7G,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,OAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,YAAY,IAAI,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;oBAClH,SAAS,GAAG,MAAM,CAAE,SAAS,CAAC,CAAC,CAAS,CAAC,YAAY,CAAC,CAAC,CAAC;gBACzD,CAAC;YACF,CAAC;YAED,MAAM,SAAS,GAAG,SAAS,IAAI,CAAC,CAAC;YACjC,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE3D,KAAK,MAAM,IAAI,IAAI,MAAM,EAAE,CAAC;gBAC3B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC;oBAAE,SAAS;gBACtD,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACxB,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE/B,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,MAAM,CAAC,CAAC;gBAC1D,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,OAAO,EAAE,CAAC;gBACtD,MAAM,QAAQ,GAAG,GAAG,SAAS,IAAI,OAAO,EAAE,CAAC;gBAE3C,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE;oBAC1C,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE,OAAO;oBACb,GAAG,EAAE,IAAI;oBACT,KAAK,EAAE,IAAI;oBACX,IAAI,EAAE,IAAI;iBACV,CAAC,CAAC;gBAEH,+DAA+D;gBAC/D,6BAA6B;gBAC7B,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,QAAQ,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACnH,CAAC;YAED,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,EAAE;gBAC9C,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,OAAO;gBACb,GAAG,EAAE,CAAC;gBACN,GAAG,EAAE,CAAC;gBACN,GAAG,EAAE,EAAE;gBACP,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,IAAI;aACV,CAAC,CAAC;QACJ,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,kCAAkC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QAClI,CAAC;IACF,CAAC;IAIe,KAAK,CAAC,gBAAgB,CAAC,MAAc,EAAE,MAAgB;QACtE,IAAI,MAAM,KAAK,mBAAmB,EAAE,CAAC;YACpC,IAAI,CAAC;gBACJ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,4CAA4C,EAAE,OAAO,CAAC,CAAC;gBAClI,MAAM,QAAQ,GAA2C,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;gBAErF,2BAA2B;gBAC3B,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,IAAI,0BAA0B,CAAC,CAAC;gBAC7G,IAAI,SAAS,GAAG,CAAC,CAAC;gBAClB,IAAI,cAAc,IAAI,OAAO,cAAc,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;oBAC9D,SAAS,GAAG,cAAc,CAAC,GAAG,IAAI,CAAC,CAAC;gBACrC,CAAC;qBAAM,CAAC;oBACP,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,gEAAgE,EAAE,MAAM,CAAC,CAAC;gBACrJ,CAAC;gBAED,mDAAmD;gBACnD,qGAAqG;gBACrG,MAAM,cAAc,GAAG,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,kBAAkB,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAU,CAAC;gBAE1I,IAAI,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC;oBACnC,KAAK,MAAM,IAAI,IAAI,cAAc,EAAE,CAAC;wBACnC,0BAA0B;wBAC1B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC;4BAAE,SAAS;wBACtD,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;wBAExB,wCAAwC;wBACxC,MAAM,SAAS,GAAG,WAAW,IAAI,CAAC,IAAI,WAAW,SAAS,IAAI,OAAO,EAAE,CAAC;wBACxE,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;wBAEnE,IAAI,SAAS,IAAI,SAAS,CAAC,GAAG,KAAK,IAAI,EAAE,CAAC;4BACzC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACjC,CAAC;oBACF,CAAC;gBACF,CAAC;gBAED,sBAAsB;gBACtB,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,IAAI,oBAAoB,CAAC,CAAC;gBACxG,IAAI,eAAe,IAAI,OAAO,eAAe,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;oBAChE,QAAQ,CAAC,MAAM,GAAG,eAAe,CAAC,GAAG,CAAC;gBACvC,CAAC;gBAED,wBAAwB;gBACxB,IAAI,QAAQ,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBACpC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,0EAA0E,EAAE,MAAM,CAAC,CAAC;gBAC/J,CAAC;qBAAM,CAAC;oBACP,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,qCAAqC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,QAAQ,CAAC,MAAM,GAAG,EAAE,MAAM,CAAC,CAAC;gBACrL,CAAC;gBAED,sDAAsD;gBACtD,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,IAAI,CAAC,IAAI,oBAAoB,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;gBAElG,6DAA6D;gBAC7D,OAAO,CAAC,QAAQ,CAAC,CAAC;YAEnB,CAAC;YAAC,OAAO,CAAM,EAAE,CAAC;gBACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,oDAAoD,CAAC,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC;gBACrJ,OAAO,MAAM,CAAC,CAAC,WAAW;YAC3B,CAAC;QACF,CAAC;QACD,MAAM,sBAAsB,GAAG;YAC9B,2BAA2B;YAC3B,iBAAiB;YACjB,sBAAsB;YACtB,cAAc;YACd,uBAAuB;YACvB,iBAAiB;YACjB,uBAAuB;YACvB,0BAA0B;YAC1B,4BAA4B;YAC5B,uBAAuB;YACvB,qBAAqB;YACrB,mCAAmC;SACnC,CAAC;QAEF,IAAI,sBAAsB,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7C,CAAC,MAAM,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAC5C,CAAC;YACF,oEAAoE;YACpE,qEAAqE;YACrE,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;gBAChC,IAAI,CAAC;oBACJ,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBAClC,OAAO,CAAC,MAAM,CAAC,CAAC;gBACjB,CAAC;gBAAC,MAAM,CAAC;oBACR,uBAAuB;oBACvB,OAAO,CAAC,MAAM,CAAC,CAAC;gBACjB,CAAC;YACF,CAAC;YACD,OAAO,CAAC,MAAM,CAAC,CAAC;QACjB,CAAC;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAEe,KAAK,CAAC,kBAAkB;QACvC,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAC1H,IAAI,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;YACxC,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,mCAAmC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QACnI,CAAC;IACF,CAAC;IAES,KAAK,CAAC,mBAAmB,CAAC,MAAW;QAC9C,IAAI,CAAC;YACJ,IAAI,SAAS,GAAG,MAAM,CAAC;YACvB,OAAO,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC3D,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC;YACD,MAAM,kBAAkB,GAAG,SAAoC,CAAC;YAEhE,KAAK,MAAM,iBAAiB,IAAI,kBAAkB,EAAE,CAAC;gBACpD,MAAM,eAAe,GAAG,gBAAgB,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,IAAI,iBAAiB,CAAC;gBACtG,MAAM,uBAAuB,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,CAAC;gBAE5E,IAAI,CAAC,YAAY,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,CAAC;oBAC3E,IAAI,GAAG,GAAG,kBAAkB,CAAC,iBAAiB,CAAW,CAAC;oBAE1D,IAAI,eAAe,KAAK,YAAY,EAAE,CAAC;wBACtC,GAAG,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,CAAC;yBAAM,IAAI,eAAe,KAAK,YAAY,EAAE,CAAC;wBAC7C,GAAG,GAAG,MAAM,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1C,CAAC;oBAED,IAAI,uBAAuB;wBAAG,uBAAgD,CAAC,IAAI,GAAG,QAAQ,CAAC;oBAE/F,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,eAAe,EAAE,EAAE,uBAAuB,IAAI,EAAE,CAAC,CAAC;oBACnH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,iBAAiB,eAAe,EAAE,EAAE;wBAC/F,GAAG,EAAE,GAA0B;wBAC/B,GAAG,EAAE,IAAI;qBACT,CAAC,CAAC;oBACH,SAAS;gBACV,CAAC;gBAED,IAAI,eAAe,IAAI,SAAS,EAAE,CAAC;oBAClC,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,uBAAuB,CAAC,CAAC;oBAC1E,MAAM,WAAW,GAAG,kBAAkB,CAAC,iBAAiB,CAA2B,CAAC;oBACpF,MAAM,mBAAmB,GAAc,EAAE,CAAC;oBAE1C,sEAAsE;oBACtE,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1F,MAAM,KAAK,GAAG,EAAE,CAAC,CAAC,sDAAsD;oBACxE,IAAI,SAAS,GAAG,CAAC,CAAC;oBAElB,KAAK,MAAM,cAAc,IAAI,cAAc,EAAE,CAAC;wBAC7C,IAAI,SAAS,IAAI,KAAK;4BAAE,MAAM;wBAC9B,SAAS,EAAE,CAAC;wBAEZ,IAAI,gBAAwB,CAAC;wBAC7B,IAAI,aAAa,GAAQ,IAAI,CAAC;wBAC9B,MAAM,SAAS,GAAG,WAAW,CAAC,cAAc,CAAQ,CAAC;wBAErD,IAAI,SAAS,IAAI,OAAO,SAAS,KAAK,QAAQ,IAAI,QAAQ,IAAI,SAAS,EAAE,CAAC;4BACzE,oBAAoB;4BACpB,aAAa,GAAG,SAAS,CAAC;4BAC1B,IAAI,CAAC;gCACJ,MAAM,MAAM,GAAG,OAAO,SAAS,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC;gCACtG,gBAAgB,GAAG,MAAM,CAAC,iBAAiB,IAAI,MAAM,CAAC,KAAK,CAAC;4BAC7D,CAAC;4BAAC,OAAO,CAAC,EAAE,CAAC;gCACZ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,sCAAsC,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;gCAC/H,SAAS;4BACV,CAAC;wBACF,CAAC;6BAAM,CAAC;4BACP,gBAAgB,GAAG,SAAmB,CAAC;wBACxC,CAAC;wBACD,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,eAAe;wBAEzE,IAAI,CAAC;4BACJ,0DAA0D;4BAC1D,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,WAAW,CAAC,CAAC;4BAC/H,IAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,KAAK,IAAI,IAAI,QAAQ,CAAC,GAAG,KAAK,SAAS,EAAE,CAAC;gCACrE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,8CAA8C,gBAAgB,YAAY,cAAc,GAAG,EAAE,OAAO,CAAC,CAAC;gCACjL,SAAS;4BACV,CAAC;4BAED,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,EAAE,CAAC,CAAC;4BAE5F,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;4BAC7E,MAAM,MAAM,GAAG,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,gBAAgB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC;4BAC3F,MAAM,2BAA2B,GAAG,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,kBAAkB,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;4BAEpJ,IAAI,eAAe,GAAG,2BAA2B,CAAC;4BAClD,OAAO,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gCACvE,eAAe,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;4BACtC,CAAC;4BACD,MAAM,wBAAwB,GAAG,eAA0C,CAAC;4BAE5E,mBAAmB,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,GAAG,wBAAwB,CAAC;4BAEzE,MAAM,cAAc,GAAQ,EAAE,GAAG,wBAAwB,EAAE,CAAC;4BAE5D,KAAK,MAAM,uBAAuB,IAAI,wBAAwB,EAAE,CAAC;gCAChE,MAAM,qBAAqB,GAAG,gBAAgB,CAAC,gCAAgC,CAAC,uBAAuB,CAAC,IAAI,uBAAuB,CAAC;gCACpI,IAAI,GAAG,GAAG,wBAAwB,CAAC,uBAAuB,CAAC,CAAC;gCAE5D,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC;oCACtD,GAAG,GAAG,IAAI,IAAI,CAAE,GAAc,GAAG,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;gCACnD,CAAC;qCAAM,IAAI,qBAAqB,IAAI,UAAU,EAAE,CAAC;oCAChD,GAAG,GAAG,IAAI,CAAC,KAAK,CAAE,GAAc,GAAG,EAAE,CAAC,CAAC;gCACxC,CAAC;qCAAM,IAAI,qBAAqB,IAAI,MAAM,IAAI,qBAAqB,IAAI,cAAc,EAAE,CAAC;oCACvF,GAAG,GAAG,MAAM,CAAC,CAAE,GAAc,GAAG,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;gCACtD,CAAC;gCAED,cAAc,CAAC,qBAAqB,CAAC,GAAG,GAAG,CAAC;gCAE5C,MAAM,oBAAoB,GAAG,IAAI,CAAC,wBAAwB,CAAC,qBAAqB,CAAC,CAAC;gCAClF,IAAI,oBAAoB,EAAE,CAAC;oCAC1B,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,IAAI,qBAAqB,EAAE,EAAE,oBAAoB,CAAC,CAAC;oCAC1I,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,IAAI,qBAAqB,EAAE,EAAE;wCACpI,GAAG,EAAE,GAA0B;wCAC/B,GAAG,EAAE,IAAI;qCACT,CAAC,CAAC;gCACJ,CAAC;4BACF,CAAC;4BAED,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,IAAI,IAAI,EAAE,CAAC;gCAClD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,EAAE,aAAa,CAAC,CAAC;gCAClF,IAAI,QAAQ,EAAE,CAAC;oCACd,cAAc,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;oCAC9C,cAAc,CAAC,kBAAkB,GAAG,QAAQ,CAAC,kBAAkB,CAAC;oCAEhE,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,cAAc,EAAE;wCACtG,IAAI,EAAE,eAAe;wCACrB,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,MAAM;qCACZ,CAAC,CAAC;oCACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,cAAc,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;oCAEzJ,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,gBAAgB,EAAE;wCACxG,IAAI,EAAE,6BAA6B;wCACnC,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,UAAU;qCAChB,CAAC,CAAC;oCACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,gBAAgB,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;oCAE7J,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,yBAAyB,EAAE;wCACjH,IAAI,EAAE,2BAA2B;wCACjC,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,UAAU;qCAChB,CAAC,CAAC;oCACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,yBAAyB,EAAE;wCAC7H,GAAG,EAAE,QAAQ,CAAC,kBAAkB;wCAChC,GAAG,EAAE,IAAI;qCACT,CAAC,CAAC;gCACJ,CAAC;4BACF,CAAC;4BAED,0CAA0C;4BAC1C,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,aAAa,EAAE;gCACrG,IAAI,EAAE,yCAAyC;gCAC/C,IAAI,EAAE,QAAQ;gCACd,IAAI,EAAE,MAAM;6BACZ,CAAC,CAAC;4BACH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,yBAAyB,cAAc,aAAa,EAAE;gCACtH,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC;gCACnC,GAAG,EAAE,IAAI;6BACT,CAAC,CAAC;wBACJ,CAAC;wBAAC,OAAO,CAAM,EAAE,CAAC;4BACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,qCAAqC,gBAAgB,KAAK,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;wBAC1J,CAAC;oBACF,CAAC;oBAED,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,oBAAoB,EAAE,EAAE,IAAI,EAAE,uBAAuB,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;oBACvI,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,oBAAoB,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;gBACjJ,CAAC;YACF,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,oCAAoC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QACpI,CAAC;IACF,CAAC;IAES,KAAK,CAAC,oBAAoB,CAAC,SAAiB,EAAE,cAAoB;QAC3E,IAAI,CAAC;YACJ,KAAK,cAAc,CAAC;YACpB,wCAAwC;YACxC,qDAAqD;YACrD,MAAM,MAAM,GAAG,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC;YACzC,MAAM,oBAAoB,GAAG,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,sBAAsB,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM;YAExJ,IAAI,SAAS,GAAG,oBAAoB,CAAC;YACrC,OAAO,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC3D,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC;YAED,IAAI,iBAAyB,CAAC;YAC9B,6DAA6D;YAC7D,IAAI,SAAS,IAAI,OAAO,SAAS,KAAK,QAAQ,IAAI,MAAM,IAAI,SAAS,IAAI,MAAM,CAAC,QAAQ,CAAE,SAAiB,CAAC,IAAI,CAAC,EAAE,CAAC;gBACnH,iBAAiB,GAAI,SAAiB,CAAC,IAAI,CAAC;YAC7C,CAAC;iBAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC;gBACvC,iBAAiB,GAAG,SAAS,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACP,OAAO,IAAI,CAAC;YACb,CAAC;YAED,kDAAkD;YAClD,IAAI,MAAM,GAAW,iBAAiB,CAAC;YACvC,IAAI,iBAAiB,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,iBAAiB,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC;gBACpE,IAAI,CAAC;oBACJ,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;oBACtC,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;oBACnC,MAAM,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;oBACtC,MAAM,GAAG,MAAM,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBAC/C,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACZ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,6BAA6B,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;oBACtH,OAAO,IAAI,CAAC;gBACb,CAAC;YACF,CAAC;YAED,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC;YAClH,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC;YACb,CAAC;YAED,kBAAkB;YAClB,MAAM,CAAC,uBAAuB,EAAE,SAAS,EAAE,kBAAkB,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAEvI,OAAO;gBACN,uBAAuB;gBACvB,SAAS;gBACT,kBAAkB;gBAClB,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;aAChC,CAAC;QACH,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,sCAAsC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;YACrI,OAAO,IAAI,CAAC;QACb,CAAC;IACF,CAAC;IAGe,KAAK,CAAC,SAAS;QAC9B,IAAI,CAAC;YACJ,sDAAsD;YACtD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;YAEjH,IAAI,MAA0B,CAAC;YAC/B,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzE,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAE7E,8DAA8D;YAC9D,IAAI,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,IAAI,MAAM,IAAI,MAAM,CAAC,QAAQ,CAAE,MAAc,CAAC,IAAI,CAAC,EAAE,CAAC;gBACvG,MAAM,GAAI,MAAc,CAAC,IAAI,CAAC;gBAC9B,IAAK,MAAc,CAAC,OAAO;oBAAE,MAAM,GAAI,MAAc,CAAC,OAAO,CAAC;YAC/D,CAAC;iBAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;gBACpC,MAAM,GAAG,MAAM,CAAC;YACjB,CAAC;iBAAM,IAAI,MAAM,EAAE,CAAC;gBACnB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,mCAAmC,OAAO,MAAM,EAAE,EAAE,OAAO,CAAC,CAAC;YACzI,CAAC;YAED,IAAI,MAAM,EAAE,CAAC;gBACZ,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;gBAClI,MAAM,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YACzC,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,yBAAyB,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QACzH,CAAC;IACF,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,iBAAiB,CAAC,SAA+E;QAC9G,IAAI,CAAC,SAAS;YAAE,OAAO;QAEvB,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,OAAO,EAAE,GAAG,SAAS,CAAC;QACzD,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,MAAM,CAAC,CAAC;QAEzD,IAAI,OAAO,EAAE,CAAC;YACb,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,cAAc,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;YACpH,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,cAAc,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;QAC/H,CAAC;QACD,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;YAC3H,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,gBAAgB,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;QACnH,CAAC;QACD,IAAI,cAAc,EAAE,CAAC;YACpB,MAAM,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,IAAI,qBAAqB,EAAE,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;YACxI,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,WAAW,IAAI,CAAC,IAAI,qBAAqB,EAAE,EAAE,GAAG,EAAE,cAAc,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;QAC7H,CAAC;IACF,CAAC;IAEe,KAAK,CAAC,iBAAiB;QACtC,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvE,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5E,QAAQ,UAAU,EAAE,CAAC;YACpB,KAAK,oBAAoB,CAAC;YAC1B,KAAK,oBAAoB,CAAC;YAC1B,KAAK,qBAAqB,CAAC;YAC3B,KAAK,qBAAqB,CAAC;YAC3B,KAAK,qBAAqB,CAAC;YAC3B,KAAK,qBAAqB;gBACzB,yBAAyB;gBACzB,MAAM;YACP,KAAK,oBAAoB,CAAC;YAC1B,KAAK,qBAAqB;gBACzB,IAAI,OAAO,KAAK,KAAK;oBAAE,MAAM,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBAC3F,MAAM;YACP,KAAK,qBAAqB;gBACzB,MAAM,IAAI,CAAC,iBAAiB,CAAC,mCAAmC,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBACtF,MAAM,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBACxE,MAAM,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBAC1E,MAAM,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBAC1E,MAAM;YACP;gBACC,sCAAsC;gBACtC,IAAI,OAAO,KAAK,KAAK,EAAE,CAAC;oBACvB,MAAM,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;oBACpE,MAAM,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;oBAC1E,MAAM,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,EAAE,EAAE,EAAE,cAAc,CAAC,CAAC;gBAC/E,CAAC;QACH,CAAC;IACF,CAAC;IAEe,KAAK,CAAC,QAAQ,CAAC,KAAa,EAAE,IAAY;QACzD,MAAM,aAAa,GAAG;YACrB,WAAW,EAAE;gBACZ,MAAM,EAAE,KAAK;gBACb,IAAI,EAAE,IAAI;aACV;SACD,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,aAAa,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9G,CAAC;IAOY,AAAN,KAAK,CAAC,mBAAmB;QAC/B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5E,IAAI,OAAO,KAAK,KAAK;YAAE,OAAO;QAC9B,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,qBAAqB,EAAE,EAAE,CAAC,CAAC;YACzG,IAAI,OAAO,GAAU,EAAE,CAAC;YAExB,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAC9D,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YAC9B,CAAC;iBAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAK,MAAc,CAAC,QAAQ,EAAE,CAAC;gBACnE,OAAO,GAAI,MAAc,CAAC,QAAQ,CAAC;YACpC,CAAC;YAED,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACxB,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,SAAS,CAAC,CAAC;gBAE5D,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE,CAAC;oBAC3B,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;oBAC5B,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,OAAO,OAAO,EAAE,CAAC;oBAC1C,MAAM,aAAa,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;oBAEhG,4DAA4D;oBAC5D,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,OAAO,EAAE,CAAC,CAAC;oBACvE,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;oBAE1G,gBAAgB;oBAChB,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC1G,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,OAAO,OAAO,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;oBAEjH,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC3G,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,OAAO,UAAU,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;oBAEvH,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC9G,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,WAAW,IAAI,CAAC,IAAI,WAAW,OAAO,WAAW,EAAE,EAAE,GAAG,EAAE,aAAa,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;oBAE9H,cAAc;oBACd,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;gBACrI,CAAC;YACF,CAAC;iBAAM,CAAC;gBACP,yDAAyD;gBACzD,MAAM,KAAK,CAAC,mBAAmB,EAAE,CAAC;YACnC,CAAC;QACF,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,uCAAuC,CAAC,CAAC,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;QACvI,CAAC;IACF,CAAC;IAWS,mBAAmB;QAC5B,kFAAkF;QAClF,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,kCAAkC,EAAE,OAAO,CAAC,CAAC;IACzH,CAAC;;AA1iDL,4CA2iDC;AA1mCU;IADN,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,aAAa,CAAC;;;;gEAU1D;AAGY;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,OAAO,CAAC;;;;0DAyBjD;AAGS;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,MAAM,CAAC;;;;yDAahD;AAKS;IAHT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,QAAQ,CAAC;IAClD,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,gBAAgB,CAAC;IAC1D,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,kBAAkB,CAAC;;;;2DAO5D;AAGS;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,kBAAkB,CAAC;;;;oEAK5D;AAGS;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,SAAS,CAAC;;;;2DAKnD;AAIe;IAFf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,SAAS,CAAC;IACnD,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,MAAM,CAAC;;;;0DAkBhD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,UAAU,CAAC;;;;8DAMpD;AAuHS;IAFT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,WAAW,CAAC;IACrD,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,iBAAiB,CAAC;;;;8DAI3D;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,yBAAyB,CAAC;;;;+DAInE;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;6DAGtD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;6DAGtD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,MAAM,CAAC;;;;+DAIhD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,yBAAyB,CAAC;;;;6DAGnE;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,0BAA0B,CAAC;;;;+DAGpE;AAMe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,OAAO,CAAC;;;;uDACmH;AAGrJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;4DAC6H;AAGpK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,UAAU,CAAC;;;;+DAC0I;AAG/K;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,QAAQ,CAAC;;;;wDACqH;AAGxJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;4DAC6H;AAGpK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,aAAa,CAAC;;;;6DAC+H;AAGvK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;4DAC6H;AAGpK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,QAAQ,CAAC;;;;wDACqH;AAGxJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,QAAQ,CAAC;;;;wDACqH;AAGxJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,SAAS,CAAC;;;;yDACuH;AAG3J;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,aAAa,CAAC;;;;6DAC2H;AAGnK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;4DAC6H;AAGpK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;4DAC6H;AAGpK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,WAAW,CAAC;;;;2DAC+G;AAGrJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,oBAAoB,CAAC;;;;wEAoC9D;AA+Ie;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,GAAG,CAAC;;;;mDACyG;AAGvI;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,WAAW,CAAC;;;;2DAC6G;AAGnJ;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,GAAG,CAAC;;;;mDACyG;AAGvI;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,UAAU,CAAC;;;;0DACyH;AAG9J;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,GAAG,CAAC;;;;mDACyG;AAGvI;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,aAAa,CAAC;;;;6DAC+H;AAGvK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,WAAW,CAAC;;;;2DAC2H;AAGjK;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,UAAU,CAAC;;;;0DACyH;AAG9J;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,sBAAsB,CAAC;;;;sEAWhE;AAGS;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,UAAU,CAAC;;;;4DAKpD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,WAAW,CAAC;;;;4DAQrD;AAGe;IADf,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,YAAY,CAAC;;;;6DAQtD;AAGS;IADT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,gBAAgB,CAAC;;;;2DAW1D;AA+fY;IALZ,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,sBAAsB,CAAC;IAChE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,uBAAuB,CAAC;IACjE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,uBAAuB,CAAC;IACjE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,sBAAsB,CAAC;IAChE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,6BAA6B,CAAC;;;;2DA8CvE;AAWS;IATT,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,oBAAoB,CAAC;IAC9D,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,0BAA0B,CAAC;IACpE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,0BAA0B,CAAC;IACpE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,qBAAqB,CAAC;IAC/D,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,wBAAwB,CAAC;IAClE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,0BAA0B,CAAC;IACpE,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,qBAAqB,CAAC;IAC/D,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,iBAAiB,CAAC;IAC3D,uCAAkB,CAAC,aAAa,CAAC,uBAAO,CAAC,eAAe,CAAC;;;;2DAIzD","sourcesContent":["import { z } from \"zod\";\nimport { MapManager } from \"../../map/MapManager\";\nimport { ProductHelper } from \"../../productHelper\";\nimport * as Q7Data from \"../../protocols/q7_dataset.json\";\nimport { BaseDeviceFeatures, CommandSpec, DeviceModelConfig, FeatureDependencies } from \"../baseDeviceFeatures\";\nimport { Feature } from \"../features.enum\";\nimport { VACUUM_CONSTANTS } from \"./vacuumConstants\";\n\n// --- Shared Constants ---\nexport const BASE_FAN = { 101: \"Quiet\", 102: \"Balanced\", 103: \"Turbo\", 104: \"Max\" };\nexport const BASE_WATER = { 200: \"Off\", 201: \"Mild\", 202: \"Moderate\", 203: \"Intense\" };\nexport const BASE_MOP = { 300: \"Standard\", 301: \"Deep\", 303: \"Deep+\" };\n\nexport interface VacuumProfile {\n    name?: string;\n    docks?: Record<number, { features: Feature[] }>;\n    mappings: {\n        fan_power: Record<number, string>;\n        water_box_mode?: Record<number, string>;\n        mop_mode?: Record<number, string>;\n        error_code?: Record<number, string>;\n        state?: Record<number, string>;\n    };\n    features: {\n        maxSuctionValue: number;\n        ultraWaterValue?: number;\n        hasSmartPlan?: boolean;\n    };\n    cleanMotorModePresets?: Record<string, string>;\n}\n\nexport const DEFAULT_PROFILE: VacuumProfile = {\n\tmappings: {\n\t\tfan_power: BASE_FAN,\n\t\twater_box_mode: BASE_WATER,\n\t\tmop_mode: BASE_MOP\n\t},\n\tfeatures: {\n\t\tmaxSuctionValue: 104\n\t}\n};\n\n// --- Zod Schema for Vacuum Status ---\nexport const VacuumStatusSchema = z\n\t.object({\n\t\tstate: z.number().int().optional(),\n\t\tfan_power: z.number().int().optional(),\n\t\twater_box_mode: z.number().int().optional(),\n\t\tmop_mode: z.number().int().optional(),\n\t\tdock_type: z.number().int().optional(),\n\t\terror_code: z.number().int().optional(),\n\t\tbattery: z.number().int().min(0).max(100).optional(),\n\t\tclean_time: z.number().int().optional(),\n\t\tclean_area: z.number().int().optional(),\n\t\tdss: z.number().int().optional(), // Docking station status bits\n\t\tmap_status: z.number().int().optional(),\n\t\t// Optional string fields that should be valid JSON\n\t\tcarpet_mode: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.refine(\n\t\t\t\t(val) => {\n\t\t\t\t\tif (val === undefined) return true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tJSON.parse(val);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ message: \"carpet_mode must be a valid JSON string or undefined\" }\n\t\t\t),\n\t\tcarpet_clean_mode: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.refine(\n\t\t\t\t(val) => {\n\t\t\t\t\tif (val === undefined) return true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tJSON.parse(val);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ message: \"carpet_clean_mode must be a valid JSON string or undefined\" }\n\t\t\t),\n\t\twater_box_custom_mode: z.number().int().optional(), // Required for WaterBox feature detection\n\t\t// Add other relevant vacuum status fields...\n\t})\n\t.passthrough(); // Allow fields not defined in the schema\n\nexport abstract class V1VacuumFeatures extends BaseDeviceFeatures {\n\tprotected profile: VacuumProfile;\n\n\t// --- Vacuum-specific Constants ---\n\tprotected static readonly CONSTANTS = VACUUM_CONSTANTS;\n\tprotected mappedRooms: any[] | null = null;\n\tprotected mapManager!: MapManager;\n\n\n\tconstructor(\n\t\tdependencies: FeatureDependencies,\n\t\tduid: string,\n\t\trobotModel: string,\n\t\tconfig: DeviceModelConfig,\n\t\tprofile: VacuumProfile = DEFAULT_PROFILE\n\t) {\n\t\t// Add default features that should be present on all vacuums\n\t\tconst defaultFeatures = [\n\t\t\tFeature.NetworkInfo,\n\t\t\tFeature.UpdateStatus,\n\t\t\tFeature.Timers,\n\t\t\tFeature.FirmwareInfo,\n\t\t\tFeature.MultiMap,\n\t\t\tFeature.RoomMapping,\n\t\t\tFeature.Consumables,\n\t\t];\n\t\tconst mergedConfig = {\n\t\t\t...config,\n\t\t\tstaticFeatures: [...defaultFeatures, ...config.staticFeatures]\n\t\t};\n\n\t\tsuper(dependencies, duid, robotModel, mergedConfig);\n\t\tthis.profile = profile;\n\n\t\tthis.applyLocalizedMappings();\n\n\t\t// Populate dynamic states map references\n\t\tV1VacuumFeatures.CONSTANTS.deviceStates.dock_type.states = V1VacuumFeatures.CONSTANTS.dockTypes;\n\t\tV1VacuumFeatures.CONSTANTS.deviceStates.error_code.states = V1VacuumFeatures.CONSTANTS.errorCodes;\n\t\tV1VacuumFeatures.CONSTANTS.deviceStates.state.states = V1VacuumFeatures.CONSTANTS.stateCodes;\n\n\t\tthis.applyCleanMotorModePresets();\n\n\t\t// Deduplicate static features\n\t\tthis.config.staticFeatures = [...new Set(this.config.staticFeatures)];\n\t}\n\n\tprotected applyLocalizedMappings(): void {\n\t\ttry {\n\t\t\t// Determine system language, default to 'en'\n\t\t\t// @ts-ignore - 'language' property might not be typed on adapter config correctly or needs access\n\t\t\tconst sysLang = (this.deps.adapter.config && this.deps.adapter.config.language) ? this.deps.adapter.config.language : \"en\";\n\n\t\t\t// Check if there is data for fault codes\n\t\t\tif (Q7Data && Q7Data.fault_codes) {\n\t\t\t\tconst errorMapping: Record<number, string> = {};\n\n\t\t\t\tfor (const [codeStr, data] of Object.entries(Q7Data.fault_codes)) {\n\t\t\t\t\tconst code = Number(codeStr);\n\t\t\t\t\tconst entry = data as any;\n\n\t\t\t\t\t// Try exact language match, simplified match (e.g. en-US -> en), or english fallback\n\t\t\t\t\tlet trans = entry[sysLang];\n\t\t\t\t\tif (!trans && sysLang.includes(\"-\")) {\n\t\t\t\t\t\tconst shortLang = sysLang.split(\"-\")[0];\n\t\t\t\t\t\ttrans = entry[shortLang];\n\t\t\t\t\t}\n\t\t\t\t\tif (!trans) trans = entry[\"en\"];\n\n\t\t\t\t\tif (trans && trans.title) {\n\t\t\t\t\t\terrorMapping[code] = trans.title;\n\t\t\t\t\t} else if (entry.internal) {\n\t\t\t\t\t\terrorMapping[code] = entry.internal;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override/Merge into profile mappings\n\t\t\t\tif (Object.keys(errorMapping).length > 0) {\n\t\t\t\t\tthis.profile.mappings.error_code = {\n\t\t\t\t\t\t...this.profile.mappings.error_code,\n\t\t\t\t\t\t...errorMapping\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.deps.adapter.log.error(`Failed to apply localized mappings: ${e}`);\n\t\t}\n\t}\n\n\n\tpublic override async setupProtocolFeatures(): Promise<void> {\n\t\tawait super.setupProtocolFeatures();\n\n\t\t// B01 devices will override this entirely, V1 devices will add their specific set\n\t\t// Protocol 1.0 (V1) specific overrides\n\t\tthis.commands = {\n\t\t\t...this.commands,\n\t\t\t...JSON.parse(JSON.stringify(V1VacuumFeatures.CONSTANTS.baseCommands))\n\t\t};\n\t}\n\n\tpublic override async initializeDeviceData(): Promise<void> {\n\t\tawait this.updateStatus();\n\t\tawait Promise.all([\n\t\t\tthis.updateFirmwareFeatures(),\n\t\t\tthis.updateMultiMapsList(),\n\t\t\tthis.updateRoomMapping(),\n\t\t\tthis.updateConsumables(),\n\t\t\tthis.updateTimers(),\n\t\t\tthis.updateNetworkInfo(),\n\t\t]);\n\n\t\tawait this.deps.adapter.checkForNewFirmware(this.duid);\n\n\t\t// Consumable Percentages (Cloud)\n\t\tawait this.updateConsumablesPercent();\n\n\t\t// Model-specific requests\n\t\tawait this.updateExtraStatus();\n\n\t\t// Initial Map\n\t\tawait this.updateMap();\n\t}\n\n\tprotected async updateConsumablesPercent(): Promise<void> {\n\t\tconst device = this.deps.adapter.http_api.getDevices().find((d: any) => d.duid === this.duid);\n\t\tif (!device?.deviceStatus) return;\n\t\tconst status = device.deviceStatus as Record<string, number>;\n\n\t\tconst consumableMap: Record<string, string> = {\n\t\t\t\"125\": \"main_brush_life\",\n\t\t\t\"126\": \"side_brush_life\",\n\t\t\t\"127\": \"filter_life\",\n\t\t};\n\n\t\tfor (const [attribute, value] of Object.entries(status)) {\n\t\t\tif (attribute === \"125\" || attribute === \"126\" || attribute === \"127\") {\n\t\t\t\tconst val = value >= 0 && value <= 100 ? value : 0;\n\t\t\t\tconst mappedName = consumableMap[attribute];\n\t\t\t\tconst common = this.getCommonConsumable(mappedName);\n\n\t\t\t\tawait this.deps.adapter.ensureState(`Devices.${this.duid}.consumables.${mappedName}`, common || {});\n\t\t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.consumables.${mappedName}`, { val, ack: true });\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected applyCleanMotorModePresets(): void {\n\t\tconst presets = this.profile.cleanMotorModePresets || {\n\t\t\t'{\"fan_power\":102,\"mop_mode\":300,\"water_box_mode\":200}': \"Vacuum\",\n\t\t\t'{\"fan_power\":105,\"mop_mode\":300,\"water_box_mode\":202}': \"Mop\",\n\t\t\t'{\"fan_power\":102,\"mop_mode\":300,\"water_box_mode\":202}': \"Vac & Mop\"\n\t\t};\n\n\t\tthis.addCommand(\"set_clean_motor_mode\", {\n\t\t\ttype: \"json\",\n\t\t\tdef: V1VacuumFeatures.CONSTANTS.baseCommands.set_clean_motor_mode.def,\n\t\t\tstates: presets\n\t\t});\n\n\t\tthis.mapManager = new MapManager(this.deps.adapter);\n\t}\n\n\n\tprotected getDynamicFeatures(): Set<Feature> {\n\t\tconst features = new Set<Feature>();\n\t\ttry {\n\t\t\tconst featureSet = this.deps.http_api.getFeatureSet(this.duid);\n\t\t\tconst newFeatureSet = this.deps.http_api.getNewFeatureSet(this.duid);\n\t\t\tif (featureSet === undefined) {\n\t\t\t\tthis.deps.log.error(`[${this.duid}] getDynamicFeatures: Could not get featureSet.`);\n\t\t\t\treturn features;\n\t\t\t}\n\n\t\t\tconst highFeatureSet = Math.floor(featureSet / 2 ** 32);\n\t\t\tconst newFeatureSetInt = newFeatureSet ? parseInt(\"0x\" + newFeatureSet.slice(-8)) : 0;\n\n\t\t\t// Map Bitfields to 'is...' Enum keys\n\t\t\tif (!!((highFeatureSet >> 5) & 1)) features.add(Feature.isWashThenChargeCmdSupported);\n\t\t\tif (!!(featureSet & 33554432)) features.add(Feature.isDustCollectionSettingSupported);\n\t\t\tif (!!((highFeatureSet >> 15) & 1)) features.add(Feature.isSupportedDrying);\n\t\t\tif (!!(featureSet & 262144)) features.add(Feature.isShakeMopSetSupported);\n\t\t\tif (!!(featureSet & 8)) features.add(Feature.isVideoMonitorSupported);\n\t\t\tif (!!(featureSet & 64)) features.add(Feature.isVideoSettingSupported);\n\t\t\tif (!!(featureSet & 512)) features.add(Feature.isCarpetSupported);\n\t\t\tif (!!(featureSet & 65536)) features.add(Feature.isPhotoUploadSupported);\n\t\t\tif (!!(featureSet & 134217728)) features.add(Feature.isAvoidCollisionSupported);\n\t\t\tif (!!(featureSet & 2147483648)) features.add(Feature.isCornerCleanModeSupported);\n\t\t\tif (!!(featureSet & 268435456)) features.add(Feature.isSupportSetSwitchMapMode);\n\t\t\tif (!!(featureSet & 2147483648)) features.add(Feature.isCustomWaterBoxDistanceSupported);\n\t\t\tif (!!(newFeatureSetInt & 4096)) features.add(Feature.isBackChargeAutoWashSupported);\n\t\t\tif (!!(newFeatureSetInt & 256)) features.add(Feature.isCleanRouteFastModeSupported);\n\n\t\t\t// Check firmware features\n\t\t\tconst fwResult = this.deps.http_api.getFwFeaturesResult(this.duid);\n\t\t\tif (fwResult) {\n\t\t\t\tfor (const id of fwResult) {\n\t\t\t\t\tconst featureName = V1VacuumFeatures.CONSTANTS.firmwareFeatures[id as keyof typeof V1VacuumFeatures.CONSTANTS.firmwareFeatures];\n\t\t\t\t\tif (featureName) {\n\t\t\t\t\t\tconst featureEnum = Feature[featureName as keyof typeof Feature];\n\n\t\t\t\t\t\tif (featureEnum) features.add(featureEnum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add features from product info\n\t\t\tif (this.deps.http_api.productInfo) {\n\t\t\t\tconst deduced = ProductHelper.deduceFeatures(this.deps.http_api.productInfo, this.robotModel);\n\t\t\t\tfor (const f of deduced) {\n\t\t\t\t\tfeatures.add(f);\n\t\t\t\t}\n\t\t\t\tthis.deps.log.silly(`[${this.duid}] ProductHelper deduced: ${[...deduced].join(\", \")}`);\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tthis.deps.log.error(`[${this.duid}] Error in getDynamicFeatures: ${error.message}`);\n\t\t}\n\t\tthis.deps.log.silly(`[${this.duid}] Detected dynamic vacuum features (raw): ${[...features].join(\", \")}`);\n\t\treturn features;\n\t}\n\n\tpublic async detectAndApplyRuntimeFeatures(statusData: Readonly<Record<string, any>>): Promise<boolean> {\n\t\tlet changedOverall = false;\n\t\tconst runDetection = !this.runtimeDetectionComplete || this.deps.config.forceRuntimeDetectEveryTime; // Check config flag\n\t\tconst appliedFeaturesList: string[] = [];\n\n\t\tif (!runDetection) {\n\t\t\tthis.deps.log.silly(`[${this.duid}] Skipping repeated runtime feature detection.`);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.deps.log.debug(`[RuntimeDetect|${this.robotModel}|${this.duid}] Running...`);\n\n\t\t// --- Validate Status Data ---\n\t\tconst validationResult = VacuumStatusSchema.safeParse(statusData);\n\t\tif (!validationResult.success) {\n\t\t\tthis.deps.log.warn(\n\t\t\t\t`[RuntimeDetect|${this.robotModel}|${this.duid}] Received invalid status data. Skipping detection. Errors: ${JSON.stringify(validationResult.error.issues)}`\n\t\t\t);\n\t\t\treturn false;\n\t\t}\n\t\tconst validStatus = validationResult.data;\n\n\t\t// --- Apply dynamic features first (Bitfields/FW) ---\n\t\tconst dynamicFeatures = this.getDynamicFeatures(); // Get current dynamic features\n\t\tthis.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Dynamic features from bits/fw: ${[...dynamicFeatures].join(\", \")}`);\n\t\tfor (const feature of dynamicFeatures) {\n\t\t\tconst mappedFeature = this.mapFeature(feature);\n\t\t\tif (mappedFeature && !this.config.staticFeatures.includes(mappedFeature)) {\n\t\t\t\t// Apply only if NOT applied by model specifics already and NOT conflicting\n\t\t\t\tconst applied = await this.applyFeature(mappedFeature);\n\t\t\t\tif (applied) {\n\t\t\t\t\tchangedOverall = true;\n\t\t\t\t\tappliedFeaturesList.push(mappedFeature);\n\t\t\t\t}\n\t\t\t} else if (mappedFeature) {\n\t\t\t\tthis.deps.log.silly(\n\t\t\t\t\t`[RuntimeDetect|${this.robotModel}|${this.duid}] Feature '${mappedFeature}' (from '${feature}') defined statically, skipping dynamic application.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// --- Rules based on validated status data ---\n\t\t// Apply features/commands only if they haven't been applied yet\n\n\t\tlet changedByStatus = false;\n\n\n\t\t// WaterBox\n\n\t\t// WaterBox\n\t\tconst detectedWaterBox = (validStatus.water_box_mode !== undefined || validStatus.mop_mode !== undefined);\n\t\tif (detectedWaterBox && !this.appliedFeatures.has(Feature.WaterBox) && await this.applyFeature(Feature.WaterBox)) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected WaterBox feature via status.`);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"WaterBox\");\n\t\t}\n\n\t\t// Carpet Mode Commands\n\t\tif (validStatus.carpet_mode !== undefined && !this.commands[\"set_carpet_mode\"]) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected carpet_mode command via status.`);\n\t\t\tconst spec: CommandSpec = { type: \"json\", states: V1VacuumFeatures.CONSTANTS.deviceStates.carpet_mode.states };\n\t\t\tthis.addCommand(\"set_carpet_mode\", spec);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"set_carpet_mode (Command)\");\n\t\t}\n\t\tif (validStatus.carpet_clean_mode !== undefined && !this.commands[\"set_carpet_clean_mode\"]) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected carpet_clean_mode command via status.`);\n\t\t\tconst spec: CommandSpec = { type: \"json\", states: V1VacuumFeatures.CONSTANTS.deviceStates.carpet_clean_mode.states };\n\t\t\tthis.addCommand(\"set_carpet_clean_mode\", spec);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"set_carpet_clean_mode (Command)\");\n\t\t}\n\n\t\t// Refine Fan Power (Max+)\n\t\tif (validStatus.fan_power === 108 && !this.appliedFeatures.has(Feature.FanMaxPlus) && !this.config.staticFeatures.includes(Feature.FanMaxPlus) && await this.applyFeature(Feature.FanMaxPlus)) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected FanMaxPlus state (108).`);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"FanMaxPlus\");\n\t\t}\n\n\t\t// MopDry\n\t\tif (validStatus.dry_status !== undefined && !this.appliedFeatures.has(Feature.MopDry) && await this.applyFeature(Feature.MopDry)) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected MopDry feature via 'dry_status' key.`);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"MopDry\");\n\t\t}\n\n\t\t// AutoEmptyDock\n\t\tif (validStatus.dust_collection_status !== undefined && !this.appliedFeatures.has(Feature.AutoEmptyDock) && await this.applyFeature(Feature.AutoEmptyDock)) {\n\t\t\t// this.deps.log.silly(`[RuntimeDetect|${this.robotModel}|${this.duid}] Detected AutoEmptyDock feature via 'dust_collection_status' key.`);\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"AutoEmptyDock\");\n\t\t}\n\n\t\t// MopWash\n\t\tif (validStatus.wash_status !== undefined && !this.appliedFeatures.has(Feature.MopWash) && await this.applyFeature(Feature.MopWash)) {\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"MopWash\");\n\t\t}\n\n\t\t// Dynamic DockingStationStatus\n\t\tconst dssSupportedDockTypes = [1, 2, 3, 6, 7, 8, 9, 10, 14, 15, 16, 17, 18];\n\t\tconst hasDssInStatus = validStatus.dss !== undefined;\n\t\tconst hasSupportedDock = validStatus.dock_type !== undefined && dssSupportedDockTypes.includes(validStatus.dock_type);\n\t\tconst shouldApplyDss = (hasDssInStatus || hasSupportedDock);\n\n\t\tif (shouldApplyDss && !this.appliedFeatures.has(Feature.DockingStationStatus) && await this.applyFeature(Feature.DockingStationStatus)) {\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"DockingStationStatus\");\n\t\t}\n\n\t\t// Ensure Consumables features are applied (standard for all vacuums really, but good to be explicit)\n\t\tif (!this.appliedFeatures.has(Feature.Consumables) && await this.applyFeature(Feature.Consumables)) {\n\t\t\tchangedByStatus = true;\n\t\t\tappliedFeaturesList.push(\"Consumables\");\n\t\t}\n\t\t// ResetConsumables is now handled dynamically inside updateConsumables loop,\n\t\t// but we might want to register the Feature if we attach commands to it in future.\n\t\t// For now, the buttons are created in updateConsumables.\n\n\t\t// Add more status-based detection rules here...\n\n\t\tif (changedByStatus || changedOverall) {\n\t\t\tthis.deps.log.info(`[RuntimeDetect|${this.robotModel}|${this.duid}] Runtime detection applied new features/commands: ${appliedFeaturesList.join(\", \")}`);\n\t\t} else {\n\t\t\tthis.deps.log.debug(`[RuntimeDetect|${this.robotModel}|${this.duid}] No new features detected.`);\n\t\t}\n\t\tthis.runtimeDetectionComplete = true;\n\t\treturn changedOverall || changedByStatus; // Return true if anything changed\n\t}\n\n\tprivate lastDockType: number | undefined;\n\n\tpublic async processDockType(dockTypeInput: number | undefined): Promise<void> {\n\t\tif (dockTypeInput === undefined) {\n\t\t\tthis.deps.log.debug(`[processDockType|${this.duid}] dockTypeInput is undefined, skipping dock processing.`);\n\t\t\treturn;\n\t\t}\n\t\tconst dockTypeSchema = z.number().int().min(0);\n\t\tconst validation = dockTypeSchema.safeParse(dockTypeInput);\n\t\tif (!validation.success) {\n\t\t\tthis.deps.log.warn(`[processDockType|${this.duid}] Invalid dockTypeInput received: ${dockTypeInput}. Errors: ${JSON.stringify(validation.error.issues)}`);\n\t\t\treturn;\n\t\t}\n\t\tconst dockType = validation.data;\n\n\t\t// Optimization: Skip if dock type hasn't changed\n\t\tif (this.lastDockType === dockType) {\n\t\t\tthis.deps.log.silly(`[${this.duid}] Dock type ${dockType} unchanged, skipping processing.`);\n\t\t\treturn;\n\t\t}\n\t\tthis.lastDockType = dockType;\n\n\t\tthis.deps.log.info(`[${this.duid}] Processing dock type ${dockType} for Vacuum`);\n\t\tconst dockFeatureMap: Record<number, Feature[]> = {\n\t\t\t1: [Feature.AutoEmptyDock, Feature.DockingStationStatus],\n\t\t\t2: [Feature.MopWash, Feature.DockingStationStatus],\n\t\t\t3: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t5: [Feature.AutoEmptyDock],\n\t\t\t6: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t7: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t8: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t9: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t14: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // Qrevo Master (a117)\n\t\t\t15: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // Qrevo S (a104)\n\t\t\t16: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus],\n\t\t\t10: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // S7 MaxV/Pro\n\t\t\t17: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // Qrevo Curv Series (a159)\n\t\t\t18: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // S8 Pro\n\t\t\t21: [Feature.AutoEmptyDock, Feature.MopWash, Feature.MopDry, Feature.DockingStationStatus], // Qrevo Edge / New Model\n\t\t};\n\t\tconst features = dockFeatureMap[dockType];\n\n\t\tif (features) {\n\t\t\tthis.deps.log.info(`[${this.duid}] Applying dock features for type ${dockType}: ${features.join(\", \")}`); // Apply features sequentially to handle dependencies\n\t\t\tfor (const feature of features) {\n\t\t\t\tawait this.applyFeature(feature); // applyFeature handles de-duplication\n\t\t\t}\n\t\t} else if (dockType !== 0) {\n\t\t\tthis.deps.log.warn(`[processDockType|${this.duid}] Unknown dock type ${dockType} encountered. No features applied. Please report this model and dock type.`);\n\t\t}\n\t}\n\n\t// --- Instance Getters for Constants ---\n\tpublic getCommonConsumable(attribute: string | number): { unit?: string } | undefined {\n\t\treturn V1VacuumFeatures.CONSTANTS.consumables[attribute as keyof typeof V1VacuumFeatures.CONSTANTS.consumables];\n\t}\n\tpublic isResetableConsumable(consumable: string): boolean {\n\t\t// Access static constant\n\t\treturn V1VacuumFeatures.CONSTANTS.resetConsumables.has(consumable);\n\t}\n\tpublic getCommonDeviceStates(attribute: string | number): { states?: Record<any, any>; unit?: string; type?: ioBroker.CommonType | undefined } | undefined {\n\t\tconst stateDef = V1VacuumFeatures.CONSTANTS.deviceStates[attribute as keyof typeof V1VacuumFeatures.CONSTANTS.deviceStates];\n\t\tif (!stateDef) return undefined;\n\n\t\tconst result = { ...stateDef } as { states?: Record<any, any>; unit?: string; type?: ioBroker.CommonType | undefined };\n\n\t\tif (attribute === \"fan_power\" && this.profile.mappings.fan_power) {\n\t\t\tresult.states = this.profile.mappings.fan_power;\n\t\t} else if (attribute === \"mop_mode\" && this.profile.mappings.mop_mode) {\n\t\t\tresult.states = this.profile.mappings.mop_mode;\n\t\t} else if (attribute === \"water_box_mode\" && this.profile.mappings.water_box_mode) {\n\t\t\tresult.states = this.profile.mappings.water_box_mode;\n\t\t} else if (attribute === \"error_code\" && this.profile.mappings.error_code) {\n\t\t\tresult.states = { ...result.states, ...this.profile.mappings.error_code };\n\t\t} else if (attribute === \"state\" && this.profile.mappings.state) {\n\t\t\tresult.states = this.profile.mappings.state;\n\t\t}\n\n\t\treturn result;\n\t}\n\tpublic getCommonCleaningInfo(attribute: string | number): Partial<ioBroker.StateCommon> | undefined {\n\t\treturn V1VacuumFeatures.CONSTANTS.cleaningInfo[attribute as keyof typeof V1VacuumFeatures.CONSTANTS.cleaningInfo] as Partial<ioBroker.StateCommon>;\n\t}\n\tpublic getCommonCleaningRecords(attribute: string | number): Partial<ioBroker.StateCommon> | undefined {\n\t\tconst spec = V1VacuumFeatures.CONSTANTS.cleaningRecords[attribute as keyof typeof V1VacuumFeatures.CONSTANTS.cleaningRecords];\n\t\treturn spec as Partial<ioBroker.StateCommon> | undefined;\n\t}\n\tpublic getFirmwareFeatureName(featureID: string | number): string {\n\t\t// Retrieve feature name from static constants\n\t\tconst name = V1VacuumFeatures.CONSTANTS.firmwareFeatures[featureID as keyof typeof V1VacuumFeatures.CONSTANTS.firmwareFeatures];\n\t\treturn name || `FeatureID_${featureID}`;\n\t}\n\n\t// --- Feature Implementations ---\n\t// Converted to methods with decorators\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.AutoEmptyDock)\n\tprotected addAutoEmptyDockCommands(): void {\n\t\tthis.addCommand(\"app_start_collect_dust\", { type: \"boolean\", def: false });\n\t\tthis.addCommand(\"app_stop_collect_dust\", { type: \"boolean\", def: false });\n\t\tthis.addCommand(\"set_dust_collection_switch_status\", { type: \"json\", def: '{\"status\":1}', states: { '{\"status\":0}': \"Off\", '{\"status\":1}': \"On\" } });\n\t\tthis.addCommand(\"set_dust_collection_mode\", {\n\t\t\ttype: \"json\",\n\t\t\tdef: '{\"mode\":0}',\n\t\t\tstates: { '{\"mode\":0}': \"Smart\", '{\"mode\":1}': \"Low\", '{\"mode\":2}': \"Medium\", '{\"mode\":4}': \"Max\" },\n\t\t});\n\t}\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.MopWash)\n    protected addMopWashCommands(): void {\n    \tthis.addCommand(\"app_start_wash\", { type: \"boolean\", def: false });\n    \tthis.addCommand(\"app_stop_wash\", { type: \"boolean\", def: false });\n    \tthis.addCommand(\"set_wash_towel_mode\", {\n    \t\ttype: \"json\",\n    \t\tdef: '{\"wash_mode\":2}',\n    \t\tstates: { '{\"wash_mode\":0}': \"Eco\", '{\"wash_mode\":1}': \"Medium\", '{\"wash_mode\":2}': \"Intense\" },\n    \t});\n    \tthis.addCommand(\"set_smart_wash_params\", {\n    \t\ttype: \"json\",\n    \t\tdef: '{\"smart_wash\":0,\"wash_interval\":1800}',\n    \t\tstates: {\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":600}': \"10 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":900}': \"15 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":1200}': \"20 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":1500}': \"25 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":1800}': \"30 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":2100}': \"35 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":2400}': \"40 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":2700}': \"45 Min\",\n    \t\t\t'{\"smart_wash\":0,\"wash_interval\":3000}': \"50 Min\",\n    \t\t\t'{\"smart_wash\":1,\"wash_interval\":1200}': \"Per room\",\n    \t\t},\n    \t});\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.MopDry)\n    protected addMopDryCommands(): void {\n    \tthis.addCommand(\"app_set_dryer_status\", { type: \"string\", def: '{\"status\": 0}', states: { '{\"status\": 1}': \"On\", '{\"status\": 0}': \"Off\" } });\n    \tthis.addCommand(\"app_set_dryer_setting\", {\n    \t\ttype: \"json\",\n    \t\tdef: '{\"on\":{\"dry_time\":10800},\"status\":0}',\n    \t\tstates: {\n    \t\t\t'{\"on\":{\"dry_time\":10800},\"status\":0}': \"Off\",\n    \t\t\t'{\"on\":{\"dry_time\":7200},\"status\":1}': \"2h\",\n    \t\t\t'{\"on\":{\"dry_time\":10800},\"status\":1}': \"3h\",\n    \t\t\t'{\"on\":{\"dry_time\":14400},\"status\":1}': \"4h\",\n    \t\t},\n    \t});\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.WaterBox)\n    @BaseDeviceFeatures.DeviceFeature(Feature.ShakeMopStrength)\n    @BaseDeviceFeatures.DeviceFeature(Feature.ElectronicWaterBox)\n    protected addWaterBoxCommands(): void {\n    \tconst mopStates = this.profile.mappings.mop_mode || VACUUM_CONSTANTS.deviceStates.mop_mode.states;\n    \tthis.addCommand(\"set_mop_mode\", { type: \"number\", def: 300, states: mopStates });\n\n    \tconst waterStates = this.profile.mappings.water_box_mode || VACUUM_CONSTANTS.deviceStates.water_box_mode.states;\n    \tthis.addCommand(\"set_water_box_custom_mode\", { type: \"number\", def: 201, states: waterStates });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanRouteFastMode)\n    protected addCleanRouteFastModeCommand(): void {\n    \tconst mopMode = this.commands.set_mop_mode || { type: \"number\", def: 300, states: {} };\n    \tmopMode.states = { ...V1VacuumFeatures.CONSTANTS.deviceStates.mop_mode.states, ...mopMode.states, 304: \"Fast\" }; // Merge carefully\n    \tthis.addCommand(\"set_mop_mode\", mopMode);\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.SmartPlan)\n    protected addSmartPlanFeature(): void {\n    \tconst mopMode = this.commands.set_mop_mode || { type: \"number\", def: 300, states: {} };\n    \tmopMode.states = { ...mopMode.states, 306: \"SmartPlan\" };\n    \tthis.addCommand(\"set_mop_mode\", mopMode);\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.LiveVideo)\n    @BaseDeviceFeatures.DeviceFeature(Feature.Camera)\n    protected async createCameraStates(): Promise<void> {\n    \tconst ip = this.deps.config.hostname_ip; // Use DI config\n    \tif (!ip) {\n    \t\tthis.deps.log.warn(`[${this.duid}] Cannot create camera states: IP address not configured.`);\n    \t\treturn;\n    \t}\n    \tconst streamTypes = {\n    \t\tstream_html: `http://${ip}:${8554 + this.deps.adapter.instance}/stream.html?src=${this.duid}`,\n    \t\twebrtc_html: `http://${ip}:${8554 + this.deps.adapter.instance}/webrtc.html?src=${this.duid}&media=video`,\n    \t\tstream_mp4: `http://${ip}:${8554 + this.deps.adapter.instance}/api/stream.mp4?src=${this.duid}`,\n    \t\trtsp: `rtsp://${ip}:${1984 + this.deps.adapter.instance}/${this.duid}?video`,\n    \t};\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.camera`);\n    \tfor (const [name, stream_uri] of Object.entries(streamTypes)) {\n    \t\t// Use ensureState helper\n    \t\tawait this.ensureState(\"camera\", name, { type: \"string\", role: \"url\", write: false, def: stream_uri });\n    \t}\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.MultiFloor)\n    protected async createMultiFloorStates(): Promise<void> {\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.floors`);\n    \tfor (const feature of [\"max_multi_map\", \"max_bak_map\", \"multi_map_count\"]) {\n    \t\tawait this.ensureState(\"floors\", feature, { ...this.getCommonDeviceStates(feature), write: false });\n    \t}\n    }\n\n    public async updateConsumables(data?: any): Promise<void> {\n    \tlet resultObj: Record<string, any> | undefined;\n\n    \tif (data) {\n    \t\tresultObj = data;\n    \t} else {\n    \t\ttry {\n    \t\t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_consumable\", []);\n    \t\t\tif (Array.isArray(result) && result.length > 0 && typeof result[0] === \"object\") {\n    \t\t\t\tresultObj = result[0];\n    \t\t\t} else if (typeof result === \"object\" && result !== null) {\n    \t\t\t\tresultObj = result as Record<string, any>;\n    \t\t\t}\n    \t\t} catch (e: any) {\n    \t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update consumables: ${e.message}`, \"warn\");\n    \t\t}\n    \t}\n\n    \tif (resultObj) {\n    \t\tawait this.processConsumables(resultObj);\n    \t}\n    }\n\n    protected async processConsumables(resultObj: Record<string, any>): Promise<void> {\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.consumables`);\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.resetConsumables`);\n\n    \t// Process Net Status if present (B01)\n    \tif (resultObj.net_status) {\n    \t\tawait this.processNetworkInfo(resultObj.net_status);\n    \t}\n\n    \t// Process other B01 settings\n    \tconst settingsToProcess = [\"volume\", \"voice_type\", \"light_mode\", \"child_lock\", \"sound\", \"charge_station_type\", \"dust_auto_state\"];\n    \tfor (const key of settingsToProcess) {\n    \t\tif (resultObj[key] !== undefined) {\n    \t\t\tawait this.deps.ensureState(`Devices.${this.duid}.deviceStatus.${key}`, {\n    \t\t\t\tname: key,\n    \t\t\t\ttype: typeof resultObj[key] as ioBroker.CommonType,\n    \t\t\t\trole: \"value\",\n    \t\t\t\twrite: false\n    \t\t\t});\n    \t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.deviceStatus.${key}`, { val: resultObj[key], ack: true });\n    \t\t}\n    \t}\n\n    \tfor (const key in resultObj) {\n    \t\tconst val = resultObj[key];\n\n    \t\tif (key === \"net_status\" || settingsToProcess.includes(key)) continue;\n\n    \t\tconst common = this.getCommonDeviceStates(key) || { name: key, type: typeof val as ioBroker.CommonType, role: \"value\", write: false };\n\n    \t\t// Check for specific consumables\n    \t\tif ([\"main_brush_work_time\", \"side_brush_work_time\", \"filter_work_time\", \"filter_element_work_time\", \"sensor_dirty_time\"].includes(key)) {\n    \t\t\tconst deviceName = key.replace(\"_work_time\", \"\").replace(\"_dirty_time\", \"\");\n    \t\t\tawait this.deps.ensureState(`Devices.${this.duid}.consumables.${deviceName}`, { ...common, unit: \"%\" });\n\n    \t\t\tconst fullLifeHours: Record<string, number> = {\n    \t\t\t\t\"main_brush\": 300,\n    \t\t\t\t\"side_brush\": 200,\n    \t\t\t\t\"filter\": 150,\n    \t\t\t\t\"filter_element\": 150,\n    \t\t\t\t\"sensor\": 30\n    \t\t\t};\n    \t\t\tconst totalTime = (fullLifeHours[deviceName] || 0) * 3600;\n\n    \t\t\tif (totalTime > 0) {\n    \t\t\t\tconst percent = Math.round(100 - (val / totalTime) * 100);\n    \t\t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.consumables.${deviceName}`, { val: percent, ack: true });\n    \t\t\t}\n    \t\t} else {\n    \t\t\tawait this.deps.ensureState(`Devices.${this.duid}.consumables.${key}`, common);\n    \t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.consumables.${key}`, { val: val, ack: true });\n    \t\t}\n\n    \t\tif (key.endsWith(\"_work_time\") || key.endsWith(\"_dirty_time\")) {\n    \t\t\tconst resetKey = key.replace(\"_work_time\", \"\").replace(\"_dirty_time\", \"\");\n    \t\t\tawait this.deps.ensureState(`Devices.${this.duid}.resetConsumables.${resetKey}`, { name: `Reset ${resetKey}`, type: \"boolean\", role: \"button\", write: true, def: false });\n    \t\t}\n    \t}\n    }\n\n    // Helper for B01 network info processing\n    private async processNetworkInfo(data: any): Promise<void> {\n    \tif (!data || typeof data !== \"object\") return;\n\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.networkInfo`);\n\n    \tconst mapping: Record<string, string> = {\n    \t\tssid: \"ssid\",\n    \t\tip: \"ip\",\n    \t\tmac: \"mac\",\n    \t\tbssid: \"bssid\",\n    \t\trssi: \"rssi\",\n    \t\tfrequency: \"frequency\" // Not standard but useful\n    \t};\n\n    \tfor (const [key, stateName] of Object.entries(mapping)) {\n    \t\tif (data[key] !== undefined) {\n    \t\t\tconst val = data[key];\n    \t\t\tconst common = {\n    \t\t\t\tname: stateName,\n    \t\t\t\ttype: typeof val === \"number\" ? \"number\" : \"string\",\n    \t\t\t\trole: key === \"rssi\" ? \"value.rssi\" : \"info\",\n    \t\t\t\tread: true,\n    \t\t\t\twrite: false\n    \t\t\t} as ioBroker.StateCommon;\n\n    \t\t\tawait this.deps.ensureState(`Devices.${this.duid}.networkInfo.${stateName}`, common);\n    \t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.networkInfo.${stateName}`, { val: val, ack: true });\n    \t\t}\n    \t}\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.AvoidCarpet)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isCarpetSupported)\n    protected addAvoidCarpetCommands(): void {\n    \tthis.addCommand(\"set_carpet_mode\", { type: \"json\", states: V1VacuumFeatures.CONSTANTS.deviceStates.carpet_mode.states });\n    \tthis.addCommand(\"set_carpet_clean_mode\", { type: \"json\", states: V1VacuumFeatures.CONSTANTS.deviceStates.carpet_clean_mode.states });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.isAvoidCollisionSupported)\n    protected async addAvoidCollisionStates(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"collision_avoid_status\", { ...this.getCommonDeviceStates(\"collision_avoid_status\"), write: false });\n    \tawait this.ensureState(\"deviceStatus\", \"avoid_count\", { ...this.getCommonDeviceStates(\"avoid_count\"), write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.MopForbidden)\n    protected async addMopForbiddenStates(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"mop_forbidden_enable\", { ...this.getCommonDeviceStates(\"mop_forbidden_enable\"), write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.VoiceControl)\n    protected async addVoiceControlStates(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"voice_chat_status\", { ...this.getCommonDeviceStates(\"voice_chat_status\"), write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.Camera)\n    protected async addCameraSettingsStates(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"camera_status\", { ...this.getCommonDeviceStates(\"camera_status\"), write: false });\n    \tawait this.ensureState(\"deviceStatus\", \"distance_off\", { ...this.getCommonDeviceStates(\"distance_off\"), write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportSetSwitchMapMode)\n    protected async addSwitchMapModeState(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"switch_map_mode\", { ...this.getCommonDeviceStates(\"switch_map_mode\"), write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.isCornerCleanModeSupported)\n    protected async addCornerCleanModeState(): Promise<void> {\n    \tawait this.ensureState(\"deviceStatus\", \"corner_clean_mode\", { ...this.getCommonDeviceStates(\"corner_clean_mode\"), write: false });\n    }\n\n\n\n    // --- State/Info Feature Handlers ---\n    @BaseDeviceFeatures.DeviceFeature(Feature.MapFlag)\n    protected async addMapFlagState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"map_flag\", { ...this.getCommonDeviceStates(\"map_flag\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CommonStatus)\n    protected async addCommonStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"common_status\", { ...this.getCommonDeviceStates(\"common_status\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.DockStatus)\n    protected async addDockErrorStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"dock_error_status\", { ...this.getCommonDeviceStates(\"dock_error_status\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.BackType)\n    protected async addBackTypeState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"back_type\", { ...this.getCommonDeviceStates(\"back_type\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.SwitchStatus)\n    protected async addSwitchStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"switch_status\", { ...this.getCommonDeviceStates(\"switch_status\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.MonitorStatus)\n    protected async addMonitorStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"monitor_status\", { ...this.getCommonDeviceStates(\"monitor_status\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanPercent)\n    protected async addCleanPercentState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"clean_percent\", { ...this.getCommonDeviceStates(\"clean_percent\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.InWarmup)\n    protected async addInWarmupState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"in_warmup\", { ...this.getCommonDeviceStates(\"in_warmup\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.ExitDock)\n    protected async addExitDockState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"exit_dock\", { ...this.getCommonDeviceStates(\"exit_dock\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.ExtraTime)\n    protected async addExtraTimeState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"extra_time\", { ...this.getCommonDeviceStates(\"extra_time\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.LastCleanTime)\n    protected async addLastCleanTimeState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"last_clean_t\", { ...this.getCommonDeviceStates(\"last_clean_t\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.ChargeStatus)\n    protected async addChargeStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"charge_status\", { ...this.getCommonDeviceStates(\"charge_status\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleaningInfo)\n    protected async addCleaningInfoState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"cleaning_info\", { ...this.getCommonDeviceStates(\"cleaning_info\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanRepeat)\n    protected async addCleanRepeatState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"repeat\", { ...this.getCommonDeviceStates(\"repeat\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.DockingStationStatus)\n    protected async createDockingStationStatusStates(): Promise<void> {\n    \ttry {\n    \t\tawait this.deps.ensureFolder(`Devices.${this.duid}.dockingStationStatus`);\n\n    \t\t// Common states mapping for docking station status values (from original implementation)\n    \t\tconst commonStates = {\n    \t\t\t0: \"UNKNOWN\",\n    \t\t\t1: \"ERROR\",\n    \t\t\t2: \"OK\"\n    \t\t};\n\n    \t\t// Create all docking station status states (original field names from working code)\n    \t\tconst stateDefinitions = [\n    \t\t\t{ key: \"cleanFluidStatus\", name: \"Clean Water Tank\" },\n    \t\t\t{ key: \"waterBoxFilterStatus\", name: \"Water Box Filter\" },\n    \t\t\t{ key: \"dustBagStatus\", name: \"Dust Bag\" },\n    \t\t\t{ key: \"dirtyWaterBoxStatus\", name: \"Dirty Water Tank\" },\n    \t\t\t{ key: \"clearWaterBoxStatus\", name: \"Clear Water Box\" },\n    \t\t\t{ key: \"isUpdownWaterReady\", name: \"Water Ready Status\" }\n    \t\t];\n\n    \t\tfor (const stateDef of stateDefinitions) {\n    \t\t\tawait this.ensureState(\"dockingStationStatus\", stateDef.key, {\n    \t\t\t\tname: stateDef.name,\n    \t\t\t\ttype: \"number\",\n    \t\t\t\trole: \"value\",\n    \t\t\t\tread: true,\n    \t\t\t\twrite: false,\n    \t\t\t\tstates: commonStates\n    \t\t\t});\n    \t\t}\n\n    \t} catch (error) {\n    \t\tthrow error;\n    \t}\n    }\n\n    public override async updateFirmwareFeatures(): Promise<void> {\n    \tif (!this.hasFeature(Feature.FirmwareInfo)) return;\n    \tlet version = await this.deps.adapter.getDeviceProtocolVersion(this.duid);\n\n    \t// Fallback: If version is 1.0 but model is known B01 (e.g. Q7 Max, Q7, Q7 L5), force B01\n    \tif (version === \"1.0\" && [\"roborock.vacuum.a27\", \"roborock.vacuum.a34\", \"roborock.vacuum.sc01\"].includes(this.robotModel)) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Debug\", version, undefined, `Force-overriding version to B01 for model ${this.robotModel} in updateFirmwareFeatures`, \"debug\");\n    \t\tversion = \"B01\";\n    \t}\n\n    \tif (version === \"B01\") return;\n\n    \ttry {\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_fw_features\", []);\n    \t\tif (Array.isArray(result)) {\n    \t\t\t// Store in http_api for getDynamicFeatures usage\n    \t\t\tthis.deps.http_api.storeFwFeaturesResult(this.duid, result);\n\n    \t\t\t// Setup states\n    \t\t\tawait this.setupFirmwareFeatures(result);\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update firmware features: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    protected async setupFirmwareFeatures(features: number[]): Promise<void> {\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.firmwareFeatures`);\n\n    \t// Loop through all known features from CONSTANTS\n    \tfor (const [id, name] of Object.entries(V1VacuumFeatures.CONSTANTS.firmwareFeatures)) {\n    \t\tconst isSupported = features.includes(Number(id));\n    \t\tawait this.ensureState(\"firmwareFeatures\", name, {\n    \t\t\ttype: \"boolean\",\n    \t\t\trole: \"indicator\",\n    \t\t\tname: `${name} (ID: ${id})`,\n    \t\t\twrite: false\n    \t\t});\n    \t\tawait this.deps.adapter.setStateChanged(\n    \t\t\t`Devices.${this.duid}.firmwareFeatures.${name}`,\n    \t\t\t{ val: isSupported, ack: true }\n    \t\t);\n    \t}\n    }\n\n    // Override updateStatus to process dss breakdown and B01 support\n    public override async updateStatus(): Promise<void> {\n    \tlet resultObj: Record<string, any> | undefined;\n\n    \ttry {\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_status\", []);\n    \t\tif (Array.isArray(result) && result.length > 0 && typeof result[0] === \"object\") {\n    \t\t\tresultObj = result[0];\n    \t\t} else if (typeof result === \"object\" && result !== null) {\n    \t\t\tresultObj = result as Record<string, any>;\n    \t\t}\n\n    \t\tif (resultObj) {\n    \t\t\tawait this.processStatus(resultObj);\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update status: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    protected async processStatus(resultObj: Record<string, any>): Promise<void> {\n    \t// Prioritize dock_type processing to ensure feature flags are set\n    \tconst dockType = resultObj[\"dock_type\"];\n    \tif (dockType !== undefined) {\n    \t\tawait this.processDockType(Number(dockType));\n    \t}\n\n    \t// Handle docking station status separately\n    \tconst dssValue = resultObj[\"dss\"];\n    \tif (dssValue !== undefined) {\n    \t\tdelete resultObj[\"dss\"];\n    \t\tawait this.updateDockingStationStatus(Number(dssValue));\n    \t}\n\n    \t// Map B01 specific keys to standard ioBroker states for compatibility\n    \tif (resultObj[\"wind\"] !== undefined) resultObj[\"fan_power\"] = resultObj[\"wind\"];\n    \tif (resultObj[\"water\"] !== undefined) resultObj[\"water_box_mode\"] = resultObj[\"water\"];\n    \tif (resultObj[\"quantity\"] !== undefined) resultObj[\"battery\"] = resultObj[\"quantity\"];\n    \tif (resultObj[\"clean_finish\"] !== undefined) resultObj[\"last_clean_t\"] = resultObj[\"clean_finish\"];\n\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.deviceStatus`);\n    \tfor (const key in resultObj) {\n    \t\tlet val = resultObj[key];\n    \t\tconst common = this.getCommonDeviceStates(key) || { name: key, type: typeof val as ioBroker.CommonType, role: \"value\", read: true, write: false };\n\n    \t\t// Serialize complex objects\n    \t\tif (typeof val === \"object\" && val !== null) {\n    \t\t\tval = JSON.stringify(val);\n    \t\t}\n\n    \t\tif (key === \"clean_time\") {\n    \t\t\tval = Math.round((val as number) / 60);\n    \t\t} else if (key === \"clean_area\" || key === \"cleaned_area\") {\n    \t\t\tval = Number(((val as number) / 1000000).toFixed(2));\n    \t\t}\n\n    \t\t// Formatting for specific keys (e.g. timestamps)\n    \t\tif ((key === \"last_clean_t\" || key === \"clean_finish\") && typeof val === \"number\") {\n    \t\t\tval = new Date(val * 1000).toLocaleString();\n    \t\t}\n\n    \t\tif (common.type === \"string\" && typeof val !== \"string\") {\n    \t\t\tval = String(val);\n    \t\t}\n\n    \t\tawait this.deps.ensureState(`Devices.${this.duid}.deviceStatus.${key}`, common);\n    \t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.deviceStatus.${key}`, { val: val, ack: true });\n    \t}\n    }\n\n    protected async updateDockingStationStatus(dss: number): Promise<void> {\n    \t// Guard: Feature must be active\n    \tif (!this.appliedFeatures.has(Feature.DockingStationStatus)) {\n    \t\treturn;\n    \t}\n\n    \t// Parse 2-bit status fields\n    \tconst status = {\n    \t\tcleanFluidStatus: (dss >> 10) & 0b11,        // Bits 10-11: Clean water tank status\n    \t\twaterBoxFilterStatus: (dss >> 8) & 0b11,     // Bits 8-9: Water box filter\n    \t\tdustBagStatus: (dss >> 6) & 0b11,            // Bits 6-7: Dust bag (Staubbeutel)\n    \t\tdirtyWaterBoxStatus: (dss >> 4) & 0b11,      // Bits 4-5: Dirty water tank\n    \t\tclearWaterBoxStatus: (dss >> 2) & 0b11,      // Bits 2-3: Clear water box\n    \t\tisUpdownWaterReady: dss & 0b11,              // Bits 0-1: Water ready status\n    \t};\n\n    \tfor (const [name, val] of Object.entries(status)) {\n    \t\tawait this.deps.adapter.setStateChanged(\n    \t\t\t`Devices.${this.duid}.dockingStationStatus.${name}`,\n    \t\t\t{ val: val, ack: true }\n    \t\t);\n    \t}\n    }\n\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.Rss)\n    protected async addRssState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"rss\", { ...this.getCommonDeviceStates(\"rss\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.RobotStatus)\n    protected async addRobotStatusState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"state\", { ...this.getCommonDeviceStates(\"state\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.Kct)\n    protected async addKctState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"kct\", { ...this.getCommonDeviceStates(\"kct\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanFluid)\n    protected async addCleanFluidState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"clean_fluid\", { ...this.getCommonDeviceStates(\"clean_fluid\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.Rdt)\n    protected async addRdtState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"rdt\", { ...this.getCommonDeviceStates(\"rdt\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.ReplenishMode)\n    protected async addReplenishModeState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"replenish_mode\", { ...this.getCommonDeviceStates(\"replenish_mode\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanedArea)\n    protected async addCleanedAreaState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"cleaned_area\", { ...this.getCommonDeviceStates(\"cleaned_area\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CleanTimes)\n    protected async addCleanTimesState(): Promise<void> { await this.ensureState(\"deviceStatus\", \"clean_times\", { ...this.getCommonDeviceStates(\"clean_times\"), write: false }); }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.CustomWaterBoxDistance)\n    protected async createCustomWaterDistanceState(): Promise<void> {\n\n    \tawait this.ensureState(\"commands\", \"set_water_box_distance_off\", {\n    \t\ttype: \"number\",\n    \t\trole: \"level\",\n    \t\twrite: true,\n    \t\t...this.getCommonDeviceStates(\"distance_off\"),\n    \t\tmin: 1,\n    \t\tmax: 30,\n    \t});\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.FanMaxPlus)\n    protected addFanMaxPlusCommand(): void {\n    \tconst fanStates = this.profile.mappings.fan_power || VACUUM_CONSTANTS.deviceStates.fan_power.states;\n    \t// Use set_custom_mode for fan power as per base commands\n    \tthis.addCommand(\"set_custom_mode\", { type: \"number\", def: 102, states: fanStates });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.NetworkInfo)\n    protected async addNetworkInfoStates(): Promise<void> {\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.networkInfo`);\n    \tawait this.ensureState(\"networkInfo\", \"ssid\", { type: \"string\", role: \"info.name\", write: false });\n    \tawait this.ensureState(\"networkInfo\", \"ip\", { type: \"string\", role: \"info.ip\", write: false });\n    \tawait this.ensureState(\"networkInfo\", \"mac\", { type: \"string\", role: \"info.mac\", write: false });\n    \tawait this.ensureState(\"networkInfo\", \"bssid\", { type: \"string\", role: \"info.address\", write: false });\n    \tawait this.ensureState(\"networkInfo\", \"rssi\", { type: \"number\", role: \"value.rssi\", write: false, unit: \"dBm\" });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.UpdateStatus)\n    protected async addUpdateStatusStates(): Promise<void> {\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.updateStatus`);\n    \tawait this.ensureState(\"updateStatus\", \"checking\", { type: \"boolean\", role: \"indicator\", write: false });\n    \tawait this.ensureState(\"updateStatus\", \"available\", { type: \"boolean\", role: \"indicator\", write: false });\n    \tawait this.ensureState(\"updateStatus\", \"progress\", { type: \"number\", role: \"value\", write: false, unit: \"%\" });\n    \tawait this.ensureState(\"updateStatus\", \"version\", { type: \"string\", role: \"info.firmware\", write: false });\n    \tawait this.ensureState(\"updateStatus\", \"description\", { type: \"string\", role: \"text\", write: false });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.SmartModeCommand)\n    protected addSmartModeCommand(): void {\n    \tthis.addCommand(\"app_set_clean_sequence_type\", {\n    \t\ttype: \"json\",\n    \t\trole: \"value.list\",\n    \t\tdef: '{\"fan_power\":110,\"mop_mode\":306,\"type\":0,\"water_box_mode\":209}',\n    \t\tstates: {\n    \t\t\t'{\"fan_power\":102,\"mop_mode\":300,\"repeat\":1,\"type\":1,\"water_box_mode\":201}': \"Mop and vacuum\",\n    \t\t\t'{\"fan_power\":110,\"mop_mode\":306,\"type\":0,\"water_box_mode\":209}': \"Smart mode\",\n    \t\t},\n    \t});\n    }\n\n    // --- Complex Update Implementations ---\n\n    protected static readonly MAPPED_CLEAN_SUMMARY: Record<string, string> = { 0: \"clean_time\", 1: \"clean_area\", 2: \"clean_count\", 3: \"records\", record_list: \"records\" };\n    private static readonly MAPPED_CLEANING_RECORD_ATTRIBUTE: Record<string, string> = {\n    \t0: \"begin\",\n    \t1: \"end\",\n    \t2: \"duration\",\n    \t3: \"area\",\n    \t4: \"error\",\n    \t5: \"complete\",\n    \t6: \"start_type\",\n    \t7: \"clean_type\",\n    \t8: \"finish_reason\",\n    \t9: \"dust_collection_status\",\n    };\n\n    public override async updateRoomMapping(): Promise<void> {\n    \ttry {\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_room_mapping\", []);\n    \t\tthis.mappedRooms = result as any[];\n\n    \t\tif (!Array.isArray(result) || result.length === 0) {\n    \t\t\treturn;\n    \t\t}\n\n    \t\tlet mapStatus = 0;\n    \t\tconst mapStatusState = await this.deps.adapter.getStateAsync(`Devices.${this.duid}.deviceStatus.map_status`);\n\n    \t\tif (mapStatusState && typeof mapStatusState.val === \"number\") {\n    \t\t\tmapStatus = mapStatusState.val;\n    \t\t} else {\n    \t\t\tconst statusRes = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_prop\", [\"get_status\"]);\n    \t\t\tif (Array.isArray(statusRes) && statusRes[0] && typeof statusRes[0] === \"object\" && \"map_status\" in statusRes[0]) {\n    \t\t\t\tmapStatus = Number((statusRes[0] as any)[\"map_status\"]);\n    \t\t\t}\n    \t\t}\n\n    \t\tconst roomFloor = mapStatus >> 2;\n    \t\tconst roomIDs = this.deps.http_api.getMatchedRoomIDs(true);\n\n    \t\tfor (const item of result) {\n    \t\t\tif (!Array.isArray(item) || item.length < 2) continue;\n    \t\t\tconst shortID = item[0];\n    \t\t\tconst roomID = String(item[1]);\n\n    \t\t\tconst room = roomIDs.find((r) => String(r.id) === roomID);\n    \t\t\tconst roomName = room ? room.name : `Room ${shortID}`;\n    \t\t\tconst pathName = `${roomFloor}.${shortID}`;\n\n    \t\t\tawait this.ensureState(\"floors\", pathName, {\n    \t\t\t\tname: roomName,\n    \t\t\t\ttype: \"boolean\",\n    \t\t\t\trole: \"value\",\n    \t\t\t\tdef: true,\n    \t\t\t\twrite: true,\n    \t\t\t\tread: true\n    \t\t\t});\n\n    \t\t\t// Only set to true if not already set? Old code set it always.\n    \t\t\t// Start with true (selected)\n    \t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.floors.${pathName}`, { val: true, ack: true });\n    \t\t}\n\n    \t\tawait this.ensureState(\"floors\", \"cleanCount\", {\n    \t\t\tname: \"Clean count\",\n    \t\t\ttype: \"number\",\n    \t\t\trole: \"value\",\n    \t\t\tdef: 1,\n    \t\t\tmin: 1,\n    \t\t\tmax: 10,\n    \t\t\twrite: true,\n    \t\t\tread: true\n    \t\t});\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update room mapping: ${e.message}`, \"warn\");\n    \t}\n    }\n\n\n\n    public override async getCommandParams(method: string, params?: unknown): Promise<unknown> {\n    \tif (method === \"app_segment_clean\") {\n    \t\ttry {\n    \t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Debug\", undefined, undefined, \"Generating params for app_segment_clean...\", \"debug\");\n    \t\t\tconst roomList: { segments: number[]; repeat: number } = { segments: [], repeat: 1 };\n\n    \t\t\t// 1. Get current map/floor\n    \t\t\tconst mapStatusState = await this.deps.adapter.getStateAsync(`Devices.${this.duid}.deviceStatus.map_status`);\n    \t\t\tlet roomFloor = 0;\n    \t\t\tif (mapStatusState && typeof mapStatusState.val === \"number\") {\n    \t\t\t\troomFloor = mapStatusState.val >> 2;\n    \t\t\t} else {\n    \t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, \"app_segment_clean: map_status not available, assuming floor 0.\", \"warn\");\n    \t\t\t}\n\n    \t\t\t// 2. Get Room Mapping (to know which IDs to check)\n    \t\t\t// We use the cached/latest mapping from API because looking up folders is harder without knowing IDs\n    \t\t\tconst mappedRoomList = (await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_room_mapping\", [], { priority: 1 })) as any[];\n\n    \t\t\tif (Array.isArray(mappedRoomList)) {\n    \t\t\t\tfor (const item of mappedRoomList) {\n    \t\t\t\t\t// item: [shortID, roomID]\n    \t\t\t\t\tif (!Array.isArray(item) || item.length < 1) continue;\n    \t\t\t\t\tconst shortID = item[0];\n\n    \t\t\t\t\t// 3. Check 'floors.floor.shortID' state\n    \t\t\t\t\tconst statePath = `Devices.${this.duid}.floors.${roomFloor}.${shortID}`;\n    \t\t\t\t\tconst roomState = await this.deps.adapter.getStateAsync(statePath);\n\n    \t\t\t\t\tif (roomState && roomState.val === true) {\n    \t\t\t\t\t\troomList.segments.push(shortID);\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n\n    \t\t\t// 4. Get Repeat Count\n    \t\t\tconst cleanCountState = await this.deps.adapter.getStateAsync(`Devices.${this.duid}.floors.cleanCount`);\n    \t\t\tif (cleanCountState && typeof cleanCountState.val === \"number\") {\n    \t\t\t\troomList.repeat = cleanCountState.val;\n    \t\t\t}\n\n    \t\t\t// 5. Build Final Params\n    \t\t\tif (roomList.segments.length === 0) {\n    \t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, \"app_segment_clean: No rooms selected! Command might be ignored by robot.\", \"warn\");\n    \t\t\t} else {\n    \t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Info\", undefined, undefined, `Starting segment clean for rooms: ${roomList.segments.join(\", \")} (Repeat: ${roomList.repeat})`, \"info\");\n    \t\t\t}\n\n    \t\t\t// Reset count to 1 after start (from legacy behavior)\n    \t\t\tawait this.deps.adapter.setState(`Devices.${this.duid}.floors.cleanCount`, { val: 1, ack: true });\n\n    \t\t\t// Roborock expects array of objects? Legacy code: [roomList]\n    \t\t\treturn [roomList];\n\n    \t\t} catch (e: any) {\n    \t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Error\", undefined, undefined, `Failed to generate params for app_segment_clean: ${e.message}`, \"error\");\n    \t\t\treturn params; // Fallback\n    \t\t}\n    \t}\n    \tconst commandsRequiringArray = [\n    \t\t\"set_water_box_custom_mode\",\n    \t\t\"set_custom_mode\",\n    \t\t\"set_clean_motor_mode\",\n    \t\t\"set_mop_mode\",\n    \t\t\"set_smart_wash_params\",\n    \t\t\"set_carpet_mode\",\n    \t\t\"set_carpet_clean_mode\",\n    \t\t\"set_dust_collection_mode\",\n    \t\t\"set_water_box_distance_off\",\n    \t\t\"app_set_dryer_setting\",\n    \t\t\"set_wash_towel_mode\",\n    \t\t\"set_dust_collection_switch_status\"\n    \t];\n\n    \tif (commandsRequiringArray.includes(method) &&\n\t\t\t(params !== undefined && !Array.isArray(params))\n    \t) {\n    \t\t// These commands require parameters to be wrapped in an array [val]\n    \t\t// If params is a string (ioBroker JSON state), try to parse it first\n    \t\tif (typeof params === \"string\") {\n    \t\t\ttry {\n    \t\t\t\tconst parsed = JSON.parse(params);\n    \t\t\t\treturn [parsed];\n    \t\t\t} catch {\n    \t\t\t\t// Not JSON, wrap as is\n    \t\t\t\treturn [params];\n    \t\t\t}\n    \t\t}\n    \t\treturn [params];\n    \t}\n    \treturn params;\n    }\n\n    public override async updateCleanSummary(): Promise<void> {\n    \ttry {\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_clean_summary\", [], { priority: -10 });\n    \t\tif (result) {\n    \t\t\tawait this.processCleanSummary(result);\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update clean summary: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    protected async processCleanSummary(result: any): Promise<void> {\n    \ttry {\n    \t\tlet unwrapped = result;\n    \t\twhile (Array.isArray(unwrapped) && unwrapped.length === 1) {\n    \t\t\tunwrapped = unwrapped[0];\n    \t\t}\n    \t\tconst cleaningAttributes = unwrapped as Record<string, unknown>;\n\n    \t\tfor (const cleaningAttribute in cleaningAttributes) {\n    \t\t\tconst mappedAttribute = V1VacuumFeatures.MAPPED_CLEAN_SUMMARY[cleaningAttribute] || cleaningAttribute;\n    \t\t\tconst cleaningAttributeCommon = this.getCommonCleaningInfo(mappedAttribute);\n\n    \t\t\tif ([\"clean_time\", \"clean_area\", \"clean_count\"].includes(mappedAttribute)) {\n    \t\t\t\tlet val = cleaningAttributes[cleaningAttribute] as number;\n\n    \t\t\t\tif (mappedAttribute === \"clean_time\") {\n    \t\t\t\t\tval = Number((val / 3600).toFixed(2));\n    \t\t\t\t} else if (mappedAttribute === \"clean_area\") {\n    \t\t\t\t\tval = Number((val / 1000000).toFixed(2));\n    \t\t\t\t}\n\n    \t\t\t\tif (cleaningAttributeCommon) (cleaningAttributeCommon as ioBroker.StateCommon).type = \"number\";\n\n    \t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.${mappedAttribute}`, cleaningAttributeCommon || {});\n    \t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.cleaningInfo.${mappedAttribute}`, {\n    \t\t\t\t\tval: val as ioBroker.StateValue,\n    \t\t\t\t\tack: true,\n    \t\t\t\t});\n    \t\t\t\tcontinue;\n    \t\t\t}\n\n    \t\t\tif (mappedAttribute == \"records\") {\n    \t\t\t\tawait this.deps.ensureFolder(`Devices.${this.duid}.cleaningInfo.records`);\n    \t\t\t\tconst recordsList = cleaningAttributes[cleaningAttribute] as Record<string, number>;\n    \t\t\t\tconst cleaningRecordsJSON: unknown[] = [];\n\n    \t\t\t\t// Process records sequentially, most recent first (index 0 is newest)\n    \t\t\t\tconst recordsIndices = Object.keys(recordsList).sort((a, b) => parseInt(a) - parseInt(b));\n    \t\t\t\tconst limit = 20; // Max records to process per update to avoid timeouts\n    \t\t\t\tlet processed = 0;\n\n    \t\t\t\tfor (const cleaningRecord of recordsIndices) {\n    \t\t\t\t\tif (processed >= limit) break;\n    \t\t\t\t\tprocessed++;\n\n    \t\t\t\t\tlet cleaningRecordID: number;\n    \t\t\t\t\tlet recordDetails: any = null;\n    \t\t\t\t\tconst rawRecord = recordsList[cleaningRecord] as any;\n\n    \t\t\t\t\tif (rawRecord && typeof rawRecord === \"object\" && \"detail\" in rawRecord) {\n    \t\t\t\t\t\t// B01 Record format\n    \t\t\t\t\t\trecordDetails = rawRecord;\n    \t\t\t\t\t\ttry {\n    \t\t\t\t\t\t\tconst detail = typeof rawRecord.detail === \"string\" ? JSON.parse(rawRecord.detail) : rawRecord.detail;\n    \t\t\t\t\t\t\tcleaningRecordID = detail.record_start_time || detail.begin;\n    \t\t\t\t\t\t} catch (e) {\n    \t\t\t\t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Error\", undefined, undefined, `Failed to parse B01 record detail: ${e}`, \"error\");\n    \t\t\t\t\t\t\tcontinue;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\tcleaningRecordID = rawRecord as number;\n    \t\t\t\t\t}\n    \t\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100)); // Pacing delay\n\n    \t\t\t\t\ttry {\n    \t\t\t\t\t\t// Optimization: Skip if record already exists in database\n    \t\t\t\t\t\tconst existing = await this.deps.adapter.getStateAsync(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.duration`);\n    \t\t\t\t\t\tif (existing && existing.val !== null && existing.val !== undefined) {\n    \t\t\t\t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Debug\", undefined, undefined, `Skipping already processed cleaning record ${cleaningRecordID} (Index: ${cleaningRecord})`, \"debug\");\n    \t\t\t\t\t\t\tcontinue;\n    \t\t\t\t\t\t}\n\n    \t\t\t\t\t\tawait this.deps.ensureFolder(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}`);\n\n    \t\t\t\t\t\tconst protocol = await this.deps.adapter.getDeviceProtocolVersion(this.duid);\n    \t\t\t\t\t\tconst params = protocol === \"B01\" ? [{ record_id: cleaningRecordID }] : [cleaningRecordID];\n    \t\t\t\t\t\tconst cleaningRecordAttributesRes = (await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_clean_record\", params, { priority: -10 }));\n\n    \t\t\t\t\t\tlet unwrappedRecord = cleaningRecordAttributesRes;\n    \t\t\t\t\t\twhile (Array.isArray(unwrappedRecord) && unwrappedRecord.length === 1) {\n    \t\t\t\t\t\t\tunwrappedRecord = unwrappedRecord[0];\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tconst cleaningRecordAttributes = unwrappedRecord as Record<string, unknown>;\n\n    \t\t\t\t\t\tcleaningRecordsJSON[parseInt(cleaningRecord)] = cleaningRecordAttributes;\n\n    \t\t\t\t\t\tconst combinedRecord: any = { ...cleaningRecordAttributes };\n\n    \t\t\t\t\t\tfor (const cleaningRecordAttribute in cleaningRecordAttributes) {\n    \t\t\t\t\t\t\tconst mappedRecordAttribute = V1VacuumFeatures.MAPPED_CLEANING_RECORD_ATTRIBUTE[cleaningRecordAttribute] || cleaningRecordAttribute;\n    \t\t\t\t\t\t\tlet val = cleaningRecordAttributes[cleaningRecordAttribute];\n\n    \t\t\t\t\t\t\tif ([\"begin\", \"end\"].includes(mappedRecordAttribute)) {\n    \t\t\t\t\t\t\t\tval = new Date((val as number) * 1000).toString();\n    \t\t\t\t\t\t\t} else if (mappedRecordAttribute == \"duration\") {\n    \t\t\t\t\t\t\t\tval = Math.round((val as number) / 60);\n    \t\t\t\t\t\t\t} else if (mappedRecordAttribute == \"area\" || mappedRecordAttribute == \"cleaned_area\") {\n    \t\t\t\t\t\t\t\tval = Number(((val as number) / 1000000).toFixed(2));\n    \t\t\t\t\t\t\t}\n\n    \t\t\t\t\t\t\tcombinedRecord[mappedRecordAttribute] = val;\n\n    \t\t\t\t\t\t\tconst cleaningRecordCommon = this.getCommonCleaningRecords(mappedRecordAttribute);\n    \t\t\t\t\t\t\tif (cleaningRecordCommon) {\n    \t\t\t\t\t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.${mappedRecordAttribute}`, cleaningRecordCommon);\n    \t\t\t\t\t\t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.${mappedRecordAttribute}`, {\n    \t\t\t\t\t\t\t\t\tval: val as ioBroker.StateValue,\n    \t\t\t\t\t\t\t\t\tack: true,\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}\n\n    \t\t\t\t\t\tif (this.deps.config.enable_map_creation == true) {\n    \t\t\t\t\t\t\tconst mapArray = await this.getCleaningRecordMap(cleaningRecordID, recordDetails);\n    \t\t\t\t\t\t\tif (mapArray) {\n    \t\t\t\t\t\t\t\tcombinedRecord.mapBase64 = mapArray.mapBase64;\n    \t\t\t\t\t\t\t\tcombinedRecord.mapBase64Truncated = mapArray.mapBase64Truncated;\n\n    \t\t\t\t\t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapData`, {\n    \t\t\t\t\t\t\t\t\tname: \"Map Data JSON\",\n    \t\t\t\t\t\t\t\t\ttype: \"string\",\n    \t\t\t\t\t\t\t\t\trole: \"json\",\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapData`, { val: mapArray.mapData, ack: true });\n\n    \t\t\t\t\t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapBase64`, {\n    \t\t\t\t\t\t\t\t\tname: \"Map Image (Full, Uncropped)\",\n    \t\t\t\t\t\t\t\t\ttype: \"string\",\n    \t\t\t\t\t\t\t\t\trole: \"text.png\",\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapBase64`, { val: mapArray.mapBase64, ack: true });\n\n    \t\t\t\t\t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapBase64Truncated`, {\n    \t\t\t\t\t\t\t\t\tname: \"Map Image (Full, Cropped)\",\n    \t\t\t\t\t\t\t\t\ttype: \"string\",\n    \t\t\t\t\t\t\t\t\trole: \"text.png\",\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map.mapBase64Truncated`, {\n    \t\t\t\t\t\t\t\t\tval: mapArray.mapBase64Truncated,\n    \t\t\t\t\t\t\t\t\tack: true,\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}\n\n    \t\t\t\t\t\t// Set combined map_object for this record\n    \t\t\t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map_object`, {\n    \t\t\t\t\t\t\tname: \"Combined cleaning record and map object\",\n    \t\t\t\t\t\t\ttype: \"string\",\n    \t\t\t\t\t\t\trole: \"json\",\n    \t\t\t\t\t\t});\n    \t\t\t\t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.cleaningInfo.records.${cleaningRecord}.map_object`, {\n    \t\t\t\t\t\t\tval: JSON.stringify(combinedRecord),\n    \t\t\t\t\t\t\tack: true,\n    \t\t\t\t\t\t});\n    \t\t\t\t\t} catch (e: any) {\n    \t\t\t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to process cleaning record ${cleaningRecordID}: ${e.message}`, \"warn\");\n    \t\t\t\t\t}\n    \t\t\t\t}\n\n    \t\t\t\tawait this.deps.ensureState(`Devices.${this.duid}.cleaningInfo.JSON`, { name: \"Cleaning Records JSON\", type: \"string\", role: \"json\" });\n    \t\t\t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.cleaningInfo.JSON`, { val: JSON.stringify(cleaningRecordsJSON), ack: true });\n    \t\t\t}\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to process clean summary: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    protected async getCleaningRecordMap(startTime: number, _recordDetails?: any): Promise<{ mapBase64CleanUncropped: string; mapBase64: string; mapBase64Truncated: string; mapData: string } | null> {\n    \ttry {\n    \t\tvoid _recordDetails;\n    \t\t// B01 devices are handled via override.\n    \t\t// V1 devices (1.0) expect an object with start_time.\n    \t\tconst params = { start_time: startTime };\n    \t\tconst cleaningRecordMapRes = (await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_clean_record_map\", params, { priority: -10 })); // LOW\n\n    \t\tlet unwrapped = cleaningRecordMapRes;\n    \t\twhile (Array.isArray(unwrapped) && unwrapped.length === 1) {\n    \t\t\tunwrapped = unwrapped[0];\n    \t\t}\n\n    \t\tlet cleaningRecordMap: Buffer;\n    \t\t// Check new return format { data, version } or legacy Buffer\n    \t\tif (unwrapped && typeof unwrapped === \"object\" && \"data\" in unwrapped && Buffer.isBuffer((unwrapped as any).data)) {\n    \t\t\tcleaningRecordMap = (unwrapped as any).data;\n    \t\t} else if (Buffer.isBuffer(unwrapped)) {\n    \t\t\tcleaningRecordMap = unwrapped;\n    \t\t} else {\n    \t\t\treturn null;\n    \t\t}\n\n    \t\t// Check if map is gzipped (starts with 0x1f 0x8b)\n    \t\tlet mapBuf: Buffer = cleaningRecordMap;\n    \t\tif (cleaningRecordMap[0] === 0x1f && cleaningRecordMap[1] === 0x8b) {\n    \t\t\ttry {\n    \t\t\t\tconst { promisify } = require(\"util\");\n    \t\t\t\tconst { gunzip } = require(\"zlib\");\n    \t\t\t\tconst gunzipAsync = promisify(gunzip);\n    \t\t\t\tmapBuf = await gunzipAsync(cleaningRecordMap);\n    \t\t\t} catch (e) {\n    \t\t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Error\", undefined, undefined, `Failed to unzip map data: ${e}`, \"error\");\n    \t\t\t\treturn null;\n    \t\t\t}\n    \t\t}\n\n    \t\tconst mapData = await this.deps.adapter.requestsHandler.mapParser.parsedata(mapBuf, null, { isHistoryMap: true });\n    \t\tif (!mapData) {\n    \t\t\treturn null;\n    \t\t}\n\n    \t\t// Generate images\n    \t\tconst [mapBase64CleanUncropped, mapBase64, mapBase64Truncated] = await this.deps.adapter.requestsHandler.mapCreator.canvasMap(mapData);\n\n    \t\treturn {\n    \t\t\tmapBase64CleanUncropped,\n    \t\t\tmapBase64,\n    \t\t\tmapBase64Truncated,\n    \t\t\tmapData: JSON.stringify(mapData),\n    \t\t};\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to get cleaning record map: ${e.message}`, \"warn\");\n    \t\treturn null;\n    \t}\n    }\n\n\n    public override async updateMap(): Promise<void> {\n    \ttry {\n    \t\t// \"get_map_v1\" is usually the command to GET the map.\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_map_v1\", [], { priority: 0 });\n\n    \t\tlet mapBuf: Buffer | undefined;\n    \t\tlet mapVer = await this.deps.adapter.getDeviceProtocolVersion(this.duid);\n    \t\tconst robotModel = this.deps.adapter.http_api.getRobotModel(this.duid) || \"\";\n\n    \t\t// Handle new return format { data, version } or legacy Buffer\n    \t\tif (result && typeof result === \"object\" && \"data\" in result && Buffer.isBuffer((result as any).data)) {\n    \t\t\tmapBuf = (result as any).data;\n    \t\t\tif ((result as any).version) mapVer = (result as any).version;\n    \t\t} else if (Buffer.isBuffer(result)) {\n    \t\t\tmapBuf = result;\n    \t\t} else if (result) {\n    \t\t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Debug\", undefined, undefined, `get_map_v1 returned non-buffer: ${typeof result}`, \"debug\");\n    \t\t}\n\n    \t\tif (mapBuf) {\n    \t\t\tconst mapResult = await this.mapManager.processMap(mapBuf, mapVer, robotModel, this.duid, this.mappedRooms, this.duid, \"Unknown\");\n    \t\t\tawait this.processMapResults(mapResult);\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update map: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    /**\n     * Helper to process map results and update ioBroker states.\n     */\n    private async processMapResults(mapResult: { mapBase64: string, mapBase64Clean?: string, mapData?: any } | null): Promise<void> {\n    \tif (!mapResult) return;\n\n    \tconst { mapBase64, mapBase64Clean, mapData } = mapResult;\n    \tawait this.deps.ensureFolder(`Devices.${this.duid}.map`);\n\n    \tif (mapData) {\n    \t\tawait this.deps.ensureState(`Devices.${this.duid}.map.mapData`, { name: \"Map Data\", type: \"string\", role: \"json\" });\n    \t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.map.mapData`, { val: JSON.stringify(mapData), ack: true });\n    \t}\n    \tif (mapBase64) {\n    \t\tawait this.deps.ensureState(`Devices.${this.duid}.map.mapBase64`, { name: \"Map Image\", type: \"string\", role: \"text.png\" });\n    \t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.map.mapBase64`, { val: mapBase64, ack: true });\n    \t}\n    \tif (mapBase64Clean) {\n    \t\tawait this.deps.ensureState(`Devices.${this.duid}.map.mapBase64Clean`, { name: \"Map Image (Clean)\", type: \"string\", role: \"text.png\" });\n    \t\tawait this.deps.adapter.setStateChangedAsync(`Devices.${this.duid}.map.mapBase64Clean`, { val: mapBase64Clean, ack: true });\n    \t}\n    }\n\n    public override async updateExtraStatus(): Promise<void> {\n    \tconst robotModel = this.deps.adapter.http_api.getRobotModel(this.duid);\n    \tconst version = await this.deps.adapter.getDeviceProtocolVersion(this.duid);\n\n    \tswitch (robotModel) {\n    \t\tcase \"roborock.vacuum.s4\":\n    \t\tcase \"roborock.vacuum.s5\":\n    \t\tcase \"roborock.vacuum.s5e\":\n    \t\tcase \"roborock.vacuum.a08\":\n    \t\tcase \"roborock.vacuum.a10\":\n    \t\tcase \"roborock.vacuum.a40\":\n    \t\t\t// No extra params needed\n    \t\t\tbreak;\n    \t\tcase \"roborock.vacuum.s6\":\n    \t\tcase \"roborock.vacuum.a72\":\n    \t\t\tif (version !== \"B01\") await this.requestAndProcess(\"get_carpet_mode\", [], \"deviceStatus\");\n    \t\t\tbreak;\n    \t\tcase \"roborock.vacuum.a27\":\n    \t\t\tawait this.requestAndProcess(\"get_dust_collection_switch_status\", [], \"deviceStatus\");\n    \t\t\tawait this.requestAndProcess(\"get_wash_towel_mode\", [], \"deviceStatus\");\n    \t\t\tawait this.requestAndProcess(\"get_smart_wash_params\", [], \"deviceStatus\");\n    \t\t\tawait this.requestAndProcess(\"app_get_dryer_setting\", [], \"deviceStatus\");\n    \t\t\tbreak;\n    \t\tdefault:\n    \t\t\t// Assume newer models, try to get all\n    \t\t\tif (version !== \"B01\") {\n    \t\t\t\tawait this.requestAndProcess(\"get_carpet_mode\", [], \"deviceStatus\");\n    \t\t\t\tawait this.requestAndProcess(\"get_carpet_clean_mode\", [], \"deviceStatus\");\n    \t\t\t\tawait this.requestAndProcess(\"get_water_box_custom_mode\", [], \"deviceStatus\");\n    \t\t\t}\n    \t}\n    }\n\n    public override async getPhoto(imgId: string, type: number): Promise<any> {\n    \tconst requestParams = {\n    \t\tdata_filter: {\n    \t\t\timg_id: imgId,\n    \t\t\ttype: type,\n    \t\t},\n    \t};\n    \treturn this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_photo\", requestParams, { priority: 0 });\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.isShakeMopSetSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isVideoMonitorSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isVideoSettingSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isPhotoUploadSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isBackChargeAutoWashSupported)\n    public async updateMultiMapsList(): Promise<void> {\n    \tconst version = await this.deps.adapter.getDeviceProtocolVersion(this.duid);\n    \tif (version === \"B01\") return;\n    \ttry {\n    \t\tconst result = await this.deps.adapter.requestsHandler.sendRequest(this.duid, \"get_multi_maps_list\", []);\n    \t\tlet mapInfo: any[] = [];\n\n    \t\tif (Array.isArray(result) && result[0] && result[0].map_info) {\n    \t\t\tmapInfo = result[0].map_info;\n    \t\t} else if (typeof result === \"object\" && (result as any).map_info) {\n    \t\t\tmapInfo = (result as any).map_info;\n    \t\t}\n\n    \t\tif (mapInfo.length > 0) {\n    \t\t\tawait this.deps.ensureFolder(`Devices.${this.duid}.floors`);\n\n    \t\t\tfor (const map of mapInfo) {\n    \t\t\t\tconst mapFlag = map.mapFlag;\n    \t\t\t\tconst name = map.name || `Map ${mapFlag}`;\n    \t\t\t\tconst formattedTime = map.add_time ? new Date(map.add_time * 1000).toLocaleString() : \"Unknown\";\n\n    \t\t\t\t// Create folder for this floor (using mapFlag as stable ID)\n    \t\t\t\tawait this.deps.ensureFolder(`Devices.${this.duid}.floors.${mapFlag}`);\n    \t\t\t\tawait this.deps.adapter.extendObjectAsync(`Devices.${this.duid}.floors.${mapFlag}`, { common: { name } });\n\n    \t\t\t\t// Create States\n    \t\t\t\tawait this.ensureState(`floors.${mapFlag}`, \"name\", { name: \"Floor Name\", type: \"string\", write: false });\n    \t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.floors.${mapFlag}.name`, { val: name, ack: true });\n\n    \t\t\t\tawait this.ensureState(`floors.${mapFlag}`, \"mapFlag\", { name: \"Map Flag\", type: \"number\", write: false });\n    \t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.floors.${mapFlag}.mapFlag`, { val: mapFlag, ack: true });\n\n    \t\t\t\tawait this.ensureState(`floors.${mapFlag}`, \"add_time\", { name: \"Created At\", type: \"string\", write: false });\n    \t\t\t\tawait this.deps.adapter.setStateChanged(`Devices.${this.duid}.floors.${mapFlag}.add_time`, { val: formattedTime, ack: true });\n\n    \t\t\t\t// Load Button\n    \t\t\t\tawait this.ensureState(`floors.${mapFlag}`, \"load\", { name: \"Load Map\", type: \"boolean\", role: \"button\", write: true, def: false });\n    \t\t\t}\n    \t\t} else {\n    \t\t\t// Fallback to default behavior if no map info (or empty)\n    \t\t\tawait super.updateMultiMapsList();\n    \t\t}\n    \t} catch (e: any) {\n    \t\tthis.deps.adapter.rLog(\"System\", this.duid, \"Warn\", undefined, undefined, `Failed to update floors/multi-maps: ${e.message}`, \"warn\");\n    \t}\n    }\n\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportFDSEndPoint)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportAutoSplitSegments)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportOrderSegmentClean)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isMapSegmentSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportLedStatusSwitch)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportFetchTimerSummary)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isOrderCleanSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isRemoteSupported)\n    @BaseDeviceFeatures.DeviceFeature(Feature.isSupportTaskId)\n    protected placeholderFeatures(): void {\n    \t// No-op: These features are detected but require no specific initialization logic\n    \tthis.deps.adapter.rLog(\"System\", this.duid, \"Debug\", undefined, undefined, \"Placeholder feature initialized.\", \"debug\");\n    }\n}\n"]}